!(function(){var dtmRoutine;(function(routine){var data={"resources":{"vtUrl":"https://developer.huawei.com/consumer/cn/service/josp/agc/WiseCloudDTMPortal/","id":"DTM-ac1262027c6e10a2817cc06442e74a12"}};var I=function(){var e=data&&data.resources&&data.resources.id||"";return{getDtmLogId:function(){return e},warn:function(){var e=Array.prototype.slice.call(arguments).join("");e.length},error:function(){var e=Array.prototype.slice.call(arguments).join("");e.length}}}();var i=null;function j(e,t,r){var n=document.createElement("script");n.type="text/javascript";n.async=!0;n.src=e;t&&(n.addEventListener?n.onload=t:n.onreadystatechange=function(){n.readyState in{loaded:!0,complete:!0}&&(n.onreadystatechange=null,t())});r&&(n.onerror=r);if(null===i){e=window.document.querySelector&&window.document.querySelector("script[nonce]");i="";if(e){r=e.nonce||e.getAttribute("nonce");r&&/^[\w+/_-]+[=]{0,2}$/.test(r)&&(i=r)}}i&&n.setAttribute("nonce",i);e=document.getElementsByTagName("script")[0]||document.body||document.head;e.parentNode.insertBefore(n,e)}function G(){return data&&data.resources&&data.resources.vtUrl||""}function D(){I.warn("[TAG] window property is overridden")}var q="function"==typeof window.addEventListener?window.addEventListener:D;var U=window.parent&&window.parent.postMessage&&"function"==typeof window.parent.postMessage?window.parent:{postMessage:D};var V=window.opener&&window.opener.postMessage&&"function"==typeof window.opener.postMessage?window.opener:{postMessage:D};var H={inquiry:function(){q("message",this._callback,!1);try{U.postMessage({type:"notify",code:"inIframe",options:{url:window.location.href,id:data&&data.resources&&data.resources.id||""}},"*")}catch(e){}},_makeValidUrl:function(e,t){var r="dist/static/vt/dtm-vt.js";var n={code:0,url:""};var i=document.getElementsByTagName("script");for(var a=0;a<i.length;a++)if(-1!==i[a].src.indexOf(r))return n.code=-1,n;if(e.publicId&&u!==e.publicId)n.code=-2;else if(e.vtHost)if(-1===t.indexOf(e.vtHost))n.code=-4;else{e=String.prototype.charAt.call(t,t.length-1);e=-1===e.indexOf("/")?"/":"";n.url=t+e+r}else n.code=-3;return n},_callback:function(e){e=e.data;if("iFrameOk"===e.status){var t=G();t="string"==typeof t?t:"";e=H._makeValidUrl(e,t);0===e.code?j(e.url,function(){try{U.postMessage({type:"notify",code:"vtLoaded",options:{url:window.location.href}},"*")}catch(e){}},function(){I.warn("[TAG] failed to load dtm vt js.")}):I.warn("[TAG] dtm vt url is wrong with "+e.code)}}};q("load",function(e){H.inquiry()},!0);var B=function(e){e=e.split("://");var t="http"===e[0].toLowerCase()?"http://":"https://";e=e[1].split("/");e=e[0];t+=e;return t}(G());var u=data&&data.resources&&data.resources.id||"";function W(e){this.code=String(e.code)||"pulse";e.extra&&(this.extra=e.extra);this.feedbackCB="function"==typeof e.feedBackCallback?e.feedBackCallback:function(e){};this.errorCB="function"==typeof e.errorCallback?e.errorCallback:function(e){};this.timeOut=Number(e.timeOut)||0}W.prototype.sendMessage=function(e){try{var t=String(e);var r={type:"r",code:this.code,ver:n.dtm_version,hash:t};this.extra&&(r.extra=this.extra);n.dtm_ext_enable?window.postMessage({code:"dtm-packet-to-portal",packet:r},window.location.origin):V.postMessage(r,B);return t}catch(e){return""}};var z=function(){var s=["dtm_version","dtm_digest","dtm_id","dtm_debug","dtm_lang","dtm_portal_ver","dtm_t","workspaceId"];var c=[!0,!0,!0,!1,!1,!1,!1,!1];function t(e){return Array.prototype.indexOf.call(s,e)}return{checkIfParamLegal:function(e){return 0<=t(e)},checkIfParamMandatory:function(e){e=t(e);return 0<=e&&!!c[e]},getQueryKeyList:function(){return s},justifyParams:function(e){var t;if(e.dtm_id&&e.dtm_id!==u)t="dtmMismatch";else{var r=[];for(var n=0;n<s.length;n++){var i=s[n];e[i]?r.push(c[n]):r.push(!1)}var a=r.join();var o=c.join();a===o?t="ok":0<=a.indexOf("true")&&(t="dtmParamMissing")}return t}}}();var K=function(){var e=["dtm_version","dtm_digest","dtm_debug","workspaceId"];return{getJsQueryKeyList:function(){return e}}}();var n=function(){var r=window.location.search;if(window[u])I.warn("[bootloader] preview "+u+" is duplicated!");else{var e=function(){var t={};if("?"===r[0]){r=r.substring(1);var e=r.split("&");Array.prototype.forEach.call(e,function(e){e=e.split("=");z.checkIfParamLegal(e[0])&&(t[e[0]]=e[1])})}return t}();if(!e.dtm_t){"{}"===JSON.stringify(e)&&(e=n()||{});var t=z.justifyParams(e);t&&(e.dtm_preview_err=t);return e}t=window.location.search;t=t.replace(/(&|\?)dtm_t=([0-9]+)/,"");"&"===t[0]&&(t=t.slice(1));t&&"?"!==t[0]&&(t="?"+t);t=window.location.origin+window.location.pathname+t+window.location.hash;window.location.replace(t)}function n(){var e=document.getElementsByTagName("head")[0];var t=e.getElementsByTagName("script");var r;for(var n=0;n<t.length;n++){var i=t[n];if(i.src&&-1!==i.src.indexOf("dtm.js?id=")){r=function(r){var n={};Array.prototype.forEach.call(z.getQueryKeyList(),function(e){var t=r.getAttribute(e);t&&(n[e]=t)});return n}(i);if(r.dtm_id===u){r.dtm_ext_enable=!0;break}}}return r}}();var a=function(){};routine&&void 0===routine.name&&(routine.name="dtmRoutine");a="function"==typeof routine&&"dtmRoutine"===routine.name?routine:a;function o(e){I.warn("[bootloader]","Error: failed to load preview: "+e);e=n.dtm_id||u;e=window[e]&&window[e].ballonTip;e&&"function"==typeof e.turnOff&&e.turnOff()}function F(e,t,r){var n=G();var i=String.prototype.charAt.call(n,n.length-1);i=-1===i.indexOf("/")?"/":"";n=n+i+"dist/static/pv/dtm-pv.js#id="+e;j(n,t,r)}if(n&&"ok"===n.dtm_preview_err){n.dtmLog=I;window[n.dtm_id]=n;n.dtmDebugReqQ={_requestQueue:{serialNo:0},_add:function(e,t){this._requestQueue[e]=t},_remove:function(e){if(this._requestQueue[e])return delete this._requestQueue[e],!0;return!1},triggerRequest:function(e){var t=new W(e);var r=t.sendMessage(this._requestQueue.serialNo);this._requestQueue.serialNo=(this._requestQueue.serialNo+1)%Number.MAX_SAFE_INTEGER;if(r){this._add(r,t);var n=this;t.timeOut&&setTimeout(function(){n._remove(r)&&t.errorCB("postMessage timeout")},t.timeOut)}else t.errorCB("postMessage exception")},feedBackHandle:function(e){var t=e.hash;var r=this._requestQueue[t];if(r){this._remove(t);r.code===e.code?r.feedbackCB(e):r.errorCB("feedback code:"+e.code+" is mismatched with "+r.code)}else e.code}};Object.defineProperty(window,n.dtm_id,{configurable:!1,writable:!1});Object.freeze(n.dtmDebugReqQ);q("message",function(e){"f"===e.data.type?n.dtmDebugReqQ.feedBackHandle(e.data):e.data.code},!1);var Z=function(e){for(var t=0;t<e.length;t++)if(-1!==e[t].src.indexOf("dtm.js?id=")&&0<=e[t].src.indexOf(u))return e[t].src;return""}(document.getElementsByTagName("script"));var Y=function(e){var t=function(e){e=e.split("#");var t=[];t.push(e[0].slice());e[0]="";t.push(e.join("#"));return t}(e);var r=t[0].split("&");if(-1===r[0].indexOf("dtm.js")){o("noDtmJs");a(I)}else{Array.prototype.forEach.call(K.getJsQueryKeyList(),function(e){n[e]&&r.push(e+"="+n[e])});e=r.join("&")+t[1];e=e.replace("/download/","/preview/");j(e,function(){},function(){o("missingVersion");n.dtmDebugReqQ.triggerRequest({code:"err",extra:{errInfo:"missing"},timeOut:1e3});a(I)})}};F(n.dtm_id,function(){Y(Z)},function(){o("missingDtmPv");n.dtmDebugReqQ.triggerRequest({code:"err",extra:{errInfo:"missing"},timeOut:1e3});Y(Z)})}else if(n){var J=n.dtm_preview_err;J&&"ok"!==J&&o(J);a(I)}})(dtmRoutine);function dtmRoutine(){var data=
{"functions":[],"resources":{"id":"DTM-ac1262027c6e10a2817cc06442e74a12","version":"10","variables":[{"exec":"__rtv","name":"order_id","params":{"setDefaultValue":false,"key":"order_id"}},{"exec":"__rtv","name":"receipt_id","params":{"setDefaultValue":false,"key":"receipt_id"}},{"exec":"__rtv","name":"validated","params":{"setDefaultValue":false,"key":"validated"}},{"exec":"__rtv","name":"payment_info_available","params":{"setDefaultValue":false,"key":"payment_info_available"}},{"exec":"__rtv","name":"quantity","params":{"setDefaultValue":false,"key":"quantity"}},{"exec":"__rtv","name":"content_id","params":{"setDefaultValue":false,"key":"content_id"}},{"exec":"__rtv","name":"content_list","params":{"setDefaultValue":false,"key":"content_list"}},{"exec":"__rtv","name":"content_type","params":{"setDefaultValue":false,"key":"content_type"}},{"exec":"__rtv","name":"price","params":{"setDefaultValue":false,"key":"price"}},{"exec":"__rtv","name":"Domain5","params":{"setDefaultValue":false,"key":"Domain5"}},{"exec":"__rtv","name":"Domain4","params":{"setDefaultValue":false,"key":"Domain4"}},{"exec":"__rtv","name":"Domain3","params":{"setDefaultValue":false,"key":"Domain3"}},{"exec":"__rtv","name":"Domain2","params":{"setDefaultValue":false,"key":"Domain2"}},{"exec":"__rtv","name":"Domain1","params":{"setDefaultValue":false,"key":"Domain1"}},{"exec":"__rtv","name":"revenue","params":{"setDefaultValue":true,"defaultValue":"0","key":"revenue"}},{"exec":"__rtv","name":"currency","params":{"setDefaultValue":true,"defaultValue":"USD","key":"currency"}},{"exec":"__rtv","name":"value","params":{"setDefaultValue":true,"defaultValue":"0","key":"value"}},{"exec":"__e","name":"Event","params":{"key":"eventName"}},{"exec":"__rtv","name":"report_enable","params":{"setDefaultValue":true,"defaultValue":"true","key":"report_enable"}},{"exec":"__rtv","name":"tracking_id","params":{"setDefaultValue":false,"key":"tracking_id"}},{"exec":"__e","name":"$Event","params":{"key":"eventName"}}],"conditions":[["_eq",["var",20],"dtm.init"],["_eq",["var",20],"dtm.js"],["_eq",["var",20],"dtm.dom"],["_eq",["var",20],"dtm.load"],["_re",["var",20],".*"],["_nsw",["var",17],"dtm."],["_neq",["var",17],"OnConsentChanged"],["_eq",["var",20],"OnConsentChanged"]],"tags":[{"exec":"__hads","name":"One_For_All","conditions":["list",["list",0,4,5,6]],"params":{"options":["map","value",["var",16],"revenue",["var",14],"currency",["var",15],"price",["var",8],"content_type",["var",7],"content_list",["var",6],"content_id",["var",5],"quantity",["var",4],"payment_info_available",["var",3],"validated",["var",2],"receipt_id",["var",1],"order_id",["var",0]],"tracking_id":["var",19]}},{"exec":"__trlnk","name":"trace_link","conditions":["list",["list",0,1],["list",0,7]],"params":{"supportUrlTracking":"true","cookiePermit":["var",18],"domains":["list",["var",13],["var",12],["var",11],["var",10],["var",9]]}}]}}
;function se(){return{grs_server_config:{grs_server:{grs_base_url:["https://grs-pub.platform.dbankcloud.com","https://grs-pub.platform.dbankcloud.cn","https://grs-pub.platform.dbankcloud.ru"],grs_query_endpoint:"/grs/2.0/router",grs_query_timeout:2}},package_name:"com.huawei.hms.dtm",version_name:"5.0.6",product_line:"cloud_BU",product_name:"dtm",app_name:"hms",grs_sdk_global_route_config:{grs_sdk_global_route_config_dtm:{applications:[],services:[{name:"com.huawei.hms.dtm",routeBy:"ser_country > issue_country > geo_ip",servings:[{countryOrAreaGroup:"DR1",addresses:{ROOT:"https://dtm-drcn.platform.dbankcloud.cn",adsUrl:"https://ppscrowd-drcn.op.cloud.huawei.com"}},{countryOrAreaGroup:"DR2",addresses:{ROOT:"https://dtm-dra.platform.dbankcloud.cn",adsUrl:"https://ppscrowd-dra.op.cloud.huawei.com"}},{countryOrAreaGroup:"DR3",addresses:{ROOT:"https://dtm-dre.platform.dbankcloud.cn",adsUrl:"https://ppscrowd-dre.op.cloud.huawei.com"}},{countryOrAreaGroup:"DR4",addresses:{ROOT:"https://dtm-drru.platform.dbankcloud.ru",adsUrl:"https://ppscrowd-drru.op.cloud.huawei.ru"}}],countryOrAreaGroups:[]}],countryOrAreaGroups:[{id:"DR1",name:"China",countriesOrAreas:["CN"],description:"China zone"},{id:"DR2",name:"Asian-African-Latin American",countriesOrAreas:["AE","AF","AG","AI","AM","AO","AQ","AR","AS","AW","AZ","BB","BD","BF","BH","BI","BJ","BL","BM","BN","BO","BR","BS","BT","BV","BW","BY","BZ","CC","CD","CF","CG","CI","CK","CL","CM","CO","CR","CU","CV","CX","DJ","DM","DO","DZ","EC","EG","EH","ER","ET","FJ","FK","FM","GA","GD","GE","GF","GH","GM","GN","GP","GQ","GS","GT","GU","GW","GY","HK","HM","HN","HT","ID","IN","IO","IQ","JM","JO","JP","KE","KG","KH","KI","KM","KN","KP","KR","KW","KY","KZ","LA","LB","LC","LK","LR","LS","LY","MA","MG","MH","ML","MM","MN","MO","MP","MQ","MR","MS","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NF","NG","NI","NP","NR","NU","OM","PA","PE","PF","PG","PH","PK","PN","PR","PS","PW","PY","QA","RE","RW","SA","SB","SC","SD","SG","SH","SL","SN","SO","SR","SS","ST","SV","SY","SZ","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TT","TV","TW","TZ","UG","UY","UZ","VE","VG","VI","VN","VU","WF","WS","YE","YT","ZA","ZM","ZW"],description:"Asian-African-Latin American zone"},{id:"DR3",name:"Europe",countriesOrAreas:["AD","AL","AN","AT","AU","AX","BA","BE","BG","BQ","CA","CH","CW","CY","CZ","DE","DK","EE","ES","FI","FO","FR","GB","GG","GI","GL","GR","HR","HU","IE","IL","IM","IS","IT","JE","LI","LT","LU","LV","MC","MD","ME","MF","MK","MT","NL","NO","NZ","PL","PM","PT","RO","RS","SE","SI","SJ","SK","SM","SX","TR","UA","UM","US","VA","VC","XK","YK"],description:"Europe zone"},{id:"DR4",name:"Russia",countriesOrAreas:["RU"],description:"Russia zone"},{id:"DR5",name:"A2",countriesOrAreas:["IR"],description:"A2 zone"}]}},grs_sdk_global_route_config_test:{grs_sdk_global_route_config_dtm:{applications:[],services:[{name:"com.huawei.hms.dtm",routeBy:"ser_country > issue_country > geo_ip",servings:[{countryOrAreaGroup:"DR1",addresses:{ROOT:"https://dtm-beta.hwcloudtest.cn",adsUrl:"https://api-pps1.hwcloudtest.cn:8444"}},{countryOrAreaGroup:"DR2",addresses:{ROOT:"https://dtm-beta-sg.hwcloudtest.cn",adsUrl:"https://api-pps1.hwcloudtest.cn:8461"}},{countryOrAreaGroup:"DR3",addresses:{ROOT:"https://dtm-beta-eu.hwcloudtest.cn",adsUrl:"https://api-pps1.hwcloudtest.cn:8444"}},{countryOrAreaGroup:"DR4",addresses:{ROOT:"https://dtm-beta-ru.hwcloudtest.cn",adsUrl:"https://api-pps1.hwcloudtest.cn:8666"}}],countryOrAreaGroups:[{id:"DR1",name:"China",countriesOrAreas:["CN"],description:"China zone"},{id:"DR2",name:"Asian-African-Latin American",countriesOrAreas:["AE","AF","AG","AI","AM","AO","AQ","AR","AS","AW","AZ","BB","BD","BF","BH","BI","BJ","BL","BM","BN","BO","BR","BS","BT","BV","BW","BY","BZ","CC","CD","CF","CG","CI","CK","CL","CM","CO","CR","CU","CV","CX","DJ","DM","DO","DZ","EC","EG","EH","ER","ET","FJ","FK","FM","GA","GD","GE","GF","GH","GM","GN","GP","GQ","GS","GT","GU","GW","GY","HK","HM","HN","HT","ID","IN","IO","IQ","JM","JO","JP","KE","KG","KH","KI","KM","KN","KP","KR","KW","KY","KZ","LA","LB","LC","LK","LR","LS","LY","MA","MG","MH","ML","MM","MN","MO","MP","MQ","MR","MS","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NF","NG","NI","NP","NR","NU","OM","PA","PE","PF","PG","PH","PK","PN","PR","PS","PW","PY","QA","RE","RW","SA","SB","SC","SD","SG","SH","SL","SN","SO","SR","SS","ST","SV","SY","SZ","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TT","TV","TW","TZ","UG","UY","UZ","VE","VG","VI","VN","VU","WF","WS","YE","YT","ZA","ZM","ZW"],description:"Asian-African-Latin American zone"},{id:"DR3",name:"Europe",countriesOrAreas:["AD","AL","AN","AT","AU","AX","BA","BE","BG","BQ","CA","CH","CW","CY","CZ","DE","DK","EE","ES","FI","FO","FR","GB","GG","GI","GL","GR","HR","HU","IE","IL","IM","IS","IT","JE","LI","LT","LU","LV","MC","MD","ME","MF","MK","MT","NL","NO","NZ","PL","PM","PT","RO","RS","SE","SI","SJ","SK","SM","SX","TR","UA","UM","US","VA","VC","XK","YK"],description:"Europe zone"},{id:"DR4",name:"Russia",countriesOrAreas:["RU"],description:"Russa zone"}]}],countryOrAreaGroups:[]}},grs_server_config_test:{grs_server:{grs_base_url:["https://lfgrstest.hwcloudtest.cn:8443","https://lfgrstest.hwcloudtest.cn:8475"],grs_query_endpoint:"/grs/2.0/router",grs_query_timeout:2}}}}function l(e){return void 0===e}function _(e){return"[object Object]"===Object.prototype.toString.call(e)}function E(e){return"[object Array]"===Object.prototype.toString.call(e)}function ce(e){return"[object String]"===Object.prototype.toString.call(e)}function ue(e){return"[object Boolean]"===Object.prototype.toString.call(e)}function L(e){var t=new RegExp("^[1-9]\\d*$");return t.test(e)}function le(e){var t=new RegExp("^[0]*([1-9][0-9]?|100)$");return t.test(e)}function de(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function fe(e){e&&" "!==e&&(e=e.replace(/^[\s\xa0]+|[\s\xa0]+$/g,""));e=e&&e.replace(/(\xa0+|\s{2,}|\n|\r\t)/g," ");return e}function pe(e){if(""==e)return 2e3;e=Number(e);return 0==e?0:!e||e<0?2e3:e}function m(e,t){e=e[t];return e}function ve(e,t){e=e.getAttribute(t);return e}function me(){var e=window.recordTier.length;return 1<=e?window.recordTier[e-1]:{}}function ge(){return y.eventName}function he(e,t){return-1!=String(e).indexOf(String(t))}function _e(e,t){for(var r={},n=0;n<t.length;n++)r[t[n]]=!0;for(var i=e,a=0;i&&a<=100;a++){if(r[String(i.tagName).toLowerCase()])return i;i=i.parentElement}return null}function c(){this.array=[];function a(e,t){this.ele=e;this.priority=t}c.prototype.add=function(e,t){var r=new a(e,t);if(this.isEmpty())this.array.push(r);else{var n=!1;for(var i=0;i<this.array.length;i++)if(r.priority<this.array[i].priority){this.array.splice(i,0,r);n=!0;break}n||this.array.push(r)}};c.prototype.poll=function(){return this.array.shift()};c.prototype.peek=function(){return this.array[0]};c.prototype.end=function(){return this.array[this.array.length-1]};c.prototype.isEmpty=function(){return 0==this.array.length};c.prototype.size=function(){return this.array.length}}function we(e){var t=document.createElement("a");t.href=e;e={href:t.href,protocol:t.protocol,host:t.host,hostname:t.hostname,pathname:t.pathname,search:t.search,hash:t.hash,port:t.port};return e}function d(e){return Array.isArray(e)?0===e.length?"":"var"===e[0]?ye(e):"map"===e[0]?Se(e):"list"===e[0]?be(e):"hybrid"===e[0]?Te(e):e:e}function ye(e){e=e[1];if(e<0||e>v.variables.length-1)I.warn("var index out of bound : ",e);else{e=v.variables[e];if("function"==typeof h.funcList[e.exec])return h.funcList[e.exec](e.params);I.warn("miss this var func : ",e.exec)}}function be(e){var t=[];if(!(e.length<=1))for(var r=1;r<e.length;r++)t.push(d(e[r]));return t}function Se(e){var t={};if(!(e.length<=1))for(var r=1;r<e.length;r++){var n=d(e[r]);var i=d(e[r+1]);t[n]=i;r++}return t}function Te(e){var t="";for(var r=1;r<e.length;r++){var n=d(e[r]);void 0!==n&&(t+=n)}return t}function p(e){var t={};for(var r in e)t[r]=d(e[r]);return t}function ke(e,t){var r="";if(Array.isArray(e)&&"hybrid"===e[0]){var n="";for(var i=1;i<e.length;i++){var a=d(e[i]);var o=Array.isArray(e[i]);if(o&&"js"===t.toLowerCase()){var s=Le(a);n+=s||a}else o&&"html"===t.toLowerCase()?n=Ae(n,a):n+=a}r=n}else r=d(e);return r}function Ae(e,t){var r=e.toLowerCase().lastIndexOf("<script");var n=e.toLowerCase().lastIndexOf("<\/script>");if(-1<r&&n<r){n=Le(t);e+=n||t}else e+=t;return e}function Le(e){var t=f();e=h.localStackHandler.pushVar(e);return unescape("window.recordTier.ids[%27"+t+"%27].lsh.read("+e+")")}function xe(r,n){var e=n.part;var i;var t=[[function(){return"HOST"===e},function(){i=r.hostname;if(Object.prototype.hasOwnProperty.call(n,"stripWww")&&n.stripWww){var e=/^www\d*\./.exec(i);if(e)return i.substr(e[0].length)}return i}],[function(){return"PATH"===e},function(){i=r.pathname;if(Object.prototype.hasOwnProperty.call(n,"defaultPages")){var e=n.defaultPages||[];var t=i.split("/");-1!==e.indexOf(t[t.length-1])&&(t[t.length-1]="");return t.join("/")}return i}],[function(){return"URL"===e},function(){i=r.href;return i}],[function(){return"PROTOCOL"===e},function(){return r.protocol?r.protocol.replace(":","").toLowerCase():""}],[function(){return"EXTENSIONNAME"===e},function(){var e=r.pathname.split(".").length;var t="";1<e&&(t=r.pathname.split(".")[e-1]);return t}],[function(){return"PARAM"===e},function(){var e=r.search;return Object.prototype.hasOwnProperty.call(n,"paramName")?Object.prototype.hasOwnProperty.call(n,"paramName")&&""!=e?Ge(e,n.paramName):void 0:""}],[function(){return"FRAGMENT"===e},function(){i=r.hash;return i.replace("#","")}],[function(){return"PORT"===e},function(){i=r.port;var e;return i||(e=r.protocol?r.protocol.replace(":","").toLowerCase():"","http"==e?80:"https"==e?443:"")}]];return st(void 0,t)}function Oe(e){if(!e||document.hidden)return!1;var t=window.getComputedStyle(e,null);if("hidden"===t.visibility)return!1;var r=e;for(;r;){var n=window.getComputedStyle(r,null);if("none"===n.display)return!1;var i=n.opacity,n=n.filter;if(n){var a=n.indexOf("opacity(");if(0<=a){n=n.substring(a+8,n.indexOf(")",a));"%"===n.charAt(n.length-1)&&(n=n.substring(0,n.length-1));i=Math.min(n,i)}}if(i<=0)return!1;r=r.parentElement}return!0}function Ie(e,t){if(e||t){var r=e.width,e=e.height;var n=t.bottom-t.top,i=t.right-t.left;return n&&i?(1-Math.min((Math.max(0-t.left,0)+Math.max(t.right-r,0))/i,1))*(1-Math.min((Math.max(0-t.top,0)+Math.max(t.bottom-e,0))/n,1)):0}return 0}function Ee(n,e,t){var i,a,o;var s=Number(t);var c=[];String(e),f();s=s||500;var u="dtm-clickEvent-timestamp-"+f()+String(e);return function(){a=this;o=arguments;var e=o[0].target;var t;var r=(new Date).getTime();c.push(e);if(e.attributes[u]){t=e.attributes[u].nodeValue;if(s<r-t){n.apply(a,o);e.setAttribute(u,r)}}else{n.apply(a,o);e.setAttribute(u,r)}if(i){clearTimeout(i);i=null}i=setTimeout(function(){for(var e=0;e<c.length;e++)c[e].removeAttribute(u);c=[];i=null},s)}}function f(){return data&&data.resources&&data.resources.id||""}function Ce(e){var t=navigator.userAgent||"";e=new RegExp(String(e));return e.test(t)}var Ne={getRecordData:function(){return me()},getValue:function(e){e=String(e);return b(e,y)}};function Pe(e,t,r){r=r||100;for(var n={},i=0;i<t.length;i++)n[t[i]]=!0;for(var a=e,o=0;a&&o<=r;o++){if(n[String(a.tagName).toLowerCase()])return a;a=a.parentElement}}var g=function(){var s="_dtm_trlnk_";function c(e){var t=e.split(".");if(/^(?:[0-9]{1,3}\.){4}$/.test(e+"."))return[e];var r=[];var n=t.length-1;for(var i=0;i<n;i++){r.push(t.join("."));t.shift()}0==r.length&&r.push(e);return r}function u(){return h._dtm_track_linker_.cookiePermit||b("enable_tcf_support",y)}function l(e,t){var r=document.cookie.split(e);for(var n=1;n<r.length;n++){var i=r[n].split(";")[0];if(i==t)return 1}}return{write:function(e,t){if(!u())return!1;var r=!1;if("_pa_aaid"===e){e+="=";r=!0}else e=s+e+"=";if(l(e,t))return!1;var n=c(window.location.hostname);var i=n.length;for(var a=i-1;0<=a;a--){var o=e+t+function(e,t){t=t?"max-age=31536000; path=/":"max-age=2592000; path=/";t=["",t];t.push("domain="+e);return Array.prototype.join.call(t,"; ")}(n[a],r);document.cookie=o;if(l(e,t))return!0}return!0},readAll:function(){if(!u())return{};var e=document.cookie.split("; ");var t={};for(var r=0;r<e.length;r++){var n=e[r].split("=");if(0===n[0].indexOf(s)){var i=n[0].substring(s.length);t[i]=n[1]}else"_pa_aaid"===n[0]&&(t[n[0]]=n[1])}return t},delAll:function(){var e=document.cookie.split("; ");var r="=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/";for(var t=0;t<e.length;t++){var n=e[t].split("=");0===n[0].indexOf(s)&&!function(t){var e=c(window.location.hostname);Array.prototype.forEach.call(e,function(e){document.cookie=t+r+"; domain="+e});document.cookie=t+r}(n[0])}}}}();var v={variables:[],conditions:[],tags:[],conditionItems:[]};var h={eventList:{},funcList:{},autoEventPriorityQueue:new c,localStackHandler:Me()};var w={first:1,second:2,third:3};var y={};function Me(){var t=[];var e={pushMark:function(){return t.length},popMark:function(e){e=Math.max(0,e);for(;e<t.length;)t.pop()},pushVar:function(e){if(!(1e3<=t.length))return t.push(e),t.length-1;I.warn("[DTM] custom javascript stack to reference var is overflow:"+t.length)},read:function(e){if(0<=e&&e<t.length)return t[e]}};return e}function Re(){var e=f();var t="";if(e){if(!Object.prototype.hasOwnProperty.call(window.recordTier,"jsFunctionHandler")){var r=window.eval;window.recordTier.jsFunctionHandler=function(e){return r(e)};Object.defineProperty(window.recordTier,"jsFunctionHandler",{configurable:!1,writable:!1});Object.defineProperty(window,"recordTier",{configurable:!1,writable:!1})}if(!Object.prototype.hasOwnProperty.call(window.recordTier,"ids")){window.recordTier.ids={};Object.defineProperty(window.recordTier,"ids",{configurable:!1,writable:!1})}var n=window.recordTier.ids;if(Object.prototype.hasOwnProperty.call(n,e))t="dupId";else{n[e]=function(){var e=function(e){var t={};for(var r in e){t[r]=e[r];Object.freeze(t[r])}return t}({rt:Ne,lsh:h.localStackHandler,attr:{overwriteSubmit:h.overwriteSubmit}});Object.freeze(e);return e}();Object.defineProperty(n,e,{configurable:!1,writable:!1});try{xt(data.resources.tagList);t="ok"}catch(e){t=" frmwrk > "+e.message}delete data.resources.tagList}}else t="noneId";return t}function je(e){var t="";Object.prototype.hasOwnProperty.call(e,"setDefaultValue")?e.setDefaultValue&&Object.prototype.hasOwnProperty.call(e,"defaultValue")?t=e.defaultValue:!1===e.setDefaultValue&&(t=void 0):t=void 0;return t}function b(e,t){var r=e&&e.split(".")||[void 0];var n=t;for(var i=0;i<r.length;i++){if(!n||!Object.prototype.hasOwnProperty.call(n,r[i]))return;n=n[r[i]]}return n}function Ge(e,t){var r;e&&1<e.length&&(r=e.substring(1).split("&"));for(var n=0;n<r.length;n++)if(r[n]&&r[n].split("=")[0]==t)return r[n].split("=")[1]}h.funcList._eq=function(e,t){return String(e)===String(t)};h.funcList._ieq=function(e,t){return String(e).toLowerCase()===String(t).toLowerCase()};h.funcList._neq=function(e,t){return String(e)!==String(t)};h.funcList._nieq=function(e,t){return String(e).toLowerCase()!==String(t).toLowerCase()};h.funcList._ge=function(e,t){return Number(e)>=Number(t)};h.funcList._gt=function(e,t){return Number(e)>Number(t)};h.funcList._le=function(e,t){return Number(e)<=Number(t)};h.funcList._lt=function(e,t){return Number(e)<Number(t)};h.funcList._sw=function(e,t){return String(e).startsWith(String(t))};h.funcList._isw=function(e,t){return String(e).toLowerCase().startsWith(String(t).toLowerCase())};h.funcList._nsw=function(e,t){return!String(e).startsWith(String(t))};h.funcList._nisw=function(e,t){return!String(e).toLowerCase().startsWith(String(t).toLowerCase())};h.funcList._re=function(e,t){try{var r=new RegExp(t);return r.test(e)}catch(e){I.warn("[COND]","Invalid regular expression");return!1}};h.funcList._nre=function(e,t){try{var r=new RegExp(t);return!r.test(e)}catch(e){I.warn("[COND]","Invalid regular expression");return!0}};h.funcList._cn=function(e,t){return-1!=String(e).indexOf(String(t))};h.funcList._icn=function(e,t){return-1!=String(e).toLowerCase().indexOf(String(t).toLowerCase())};h.funcList._ncn=function(e,t){return-1==String(e).indexOf(String(t))};h.funcList._nicn=function(e,t){return-1==String(e).toLowerCase().indexOf(String(t).toLowerCase())};h.funcList._ew=function(e,t){return String(e).endsWith(t)};h.funcList._iew=function(e,t){return String(e).toLowerCase().endsWith(String(t).toLowerCase())};h.funcList._new=function(e,t){return!String(e).endsWith(t)};h.funcList._niew=function(e,t){return!String(e).toLowerCase().endsWith(String(t).toLowerCase())};h.funcList._ire=function(e,t){try{var r=new RegExp(t,"i");return r.test(e)}catch(e){I.warn("[COND]","Invalid regular expression");return!1}};h.funcList._nire=function(e,t){try{var r=new RegExp(t,"i");return!r.test(e)}catch(e){I.warn("[COND]","Invalid regular expression");return!0}};h.funcList._css=function(e,t){if(e){var r=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"];try{for(var n=0;n<r.length;n++)if(e[r[n]])return e[r[n]](t)}catch(e){}}};h.funcList._ncss=function(e,t){return!h.funcList._css(e,t)};function De(){if(data&&data.resources){data.resources.variables&&qe(data.resources.variables);data.resources.conditions&&Ue(data.resources.conditions);data.resources.tags&&Ve(data.resources.tags)}}function qe(e){v.variables=e}function Ue(e){for(var t=0;t<e.length;t++)if(e[t]&&"var"===e[t][1][0]){var r={exec:e[t][0],varIdx:e[t][1][1],result:e[t][2]};v.conditions.push(r)}}function Ve(e){for(var t=0;t<e.length;t++)if(e[t]){var r={exec:"",name:"",params:{}};r.exec=e[t].exec;r.name=e[t].name;e[t].params&&(r.params=e[t].params);v.tags.push(r);e[t].conditions&&He(e[t].conditions,t)}}function He(e,t){if(0<e.length&&"list"===e[0])for(var r=1;r<e.length;r++)We(e[r],t)}function Be(e){var t={index:0,isExist:!1};for(var r=0;r<v.conditionItems.length;r++)if(e.indexes.sort().toString()==v.conditionItems[r].indexes.sort().toString()){t.index=r;t.isExist=!0;return t}return t}function We(e,t){if("list"===e[0]){var r={indexes:[],activeTags:[],blockTags:[]};for(var n=2;n<e.length;n++)r.indexes.push(e[n]);var i=Be(r);!0===i.isExist?r=v.conditionItems[i.index]:v.conditionItems.push(r);0===e[1]?r.activeTags.push(t):1===e[1]&&r.blockTags.push(t)}}function ze(e){if(!(e<0||e>v.variables.length-1)){var t=v.variables[e];var r={};t&&Object.prototype.hasOwnProperty.call(t,"params")&&(r=t.params);var n=void 0;if("function"==typeof h.funcList[t.exec])try{n=h.funcList[t.exec](r)}catch(e){I.warn("var:"+t.exec+"exception")}return n}I.warn("var index out of bound : ",e)}function Ke(e){var t;return e?(t=ze(e.varIdx),!("function"!=typeof h.funcList[e.exec]||!h.funcList[e.exec](t,e.result))):(I.warn("condition should not be empty"),!1)}function Fe(e){var t=v.conditions;for(var r=0;r<e.indexes.length;r++){var n=e.indexes[r];if(!Ke(t[n]))return!1}return!0}function Ze(e,t){e=e.filter(function(e){return-1===t.indexOf(e)});return e}function Ye(e){var t=[];if(e)for(var r=0;r<e.length;r++)-1==t.indexOf(e[r])&&t.push(e[r]);return t}function Je(){var e=me();var t=v.conditionItems;var r=[];var n=[];for(var i=0;i<t.length;i++){var a=t[i];if(Fe(a)){r=r.concat(a.activeTags);n=n.concat(a.blockTags)}}var o=Ze(r,n);o=Ye(o);Qe(o);e.execTags=o}function Qe(e){var t=v.tags;for(var r=0;r<e.length;r++){var n=e[r];n=t[n];if("function"==typeof h.funcList[n.exec]){var i=recordTier.unifiedMan.waitForTags;i.inc(n.exec);try{h.funcList[n.exec](n)}catch(e){I.warn("[exec] tag execute exception, ignore it: "+e)}}}}function S(e,t,r,n){e.addEventListener?e.addEventListener(t,r,!!n):e.attachEvent&&e.attachEvent("on"+t,r)}function $e(e,t,r,n){e.removeEventListener?e.removeEventListener(t,r,!!n):e.detachEvent&&e.detachEvent("on"+t,r)}function Xe(e,t){var r={};var n=r;var i=e.split(".");for(var a=0;a<i.length-1;a++)n=n[i[a]]={};n[i[i.length-1]]=t;return r}function et(e,t){var r=t;for(var n in e){var i=e[n];if(_(i)){_(r[n])||(r[n]={});r[n]=et(i,r[n])}else r[n]=i}return r}function tt(e){var t=f();for(var r=0;r<e.length;r++){var n=e[r];var i=rt(n);if(i){var a=n._dtmIDs_||[];if(a.indexOf(t)<0)continue}if(n){for(var o in n){o=Xe(o,n[o]);et(o,y)}i&&Je()}}}function rt(e){return!!e&&Object.prototype.hasOwnProperty.call(e,"eventName")}function T(e,t){h.autoEventPriorityQueue.add(e,t)}function nt(){var e=h.autoEventPriorityQueue;for(;!e.isEmpty();){var t=e.poll();t=t.ele;h.eventList[t]&&"function"==typeof h.eventList[t].func&&h.eventList[t].func()}}function it(e,t){e._dtmIDs_=e._dtmIDs_||[];e._dtmIDs_.once=t;t=f();e._dtmIDs_.indexOf(t)<0&&e._dtmIDs_.push(t)}function at(){function e(){}return[[function(e){return!rt(e)},e],[function(e){return"dtm.js"===e.eventName},e],[function(e){return e._dtmIDs_&&e._dtmIDs_.once},e],[function(e){e=(!e._dtmIDs_||!e._dtmIDs_.once)&&(e.eventName&&0<=e.eventName.indexOf("dtm.")||Object.prototype.hasOwnProperty.call(e,"triggerIds_"));return e},function(e){for(var t in e)delete e[t]}],[function(){return!0},function(e){it(e,!1)}]]}function ot(){var n=[];var r=!1;function e(){}for(var t=0;t<recordTier.length;t++)!function(t){st(recordTier[t],[[function(e){return!rt(e)},function(e){n.push(e)}],[function(e){return e._dtmIDs_&&e._dtmIDs_.once},e],[function(e){return"dtm.js"===e.eventName},function(e){if(!r){r=!0;it(e,!0);n.push(e);delete recordTier[t]}}],[function(e){return e._dtmIDs_?!e._dtmIDs_.once:!(e.eventName&&0<=e.eventName.indexOf("dtm.")||Object.prototype.hasOwnProperty.call(e,"triggerIds_"))},function(e){var t={};for(var r in e)t[r]=e[r];delete t._dtmIDs_;it(t,!0);n.push(t)}]])}(t);return n}function st(e,t){var r;for(var n=0;n<t.length;n++){var i=t[n][0];var a=t[n][1];if(i(e)){r=a(e);break}}return r}function ct(){var t=window.recordTier=window.recordTier||[];var r=t.push;t.push=function(){var e=[].slice.call(arguments,0);Array.prototype.forEach.call(e,function(e){st(e,at())});r.apply(t,e);for(;300<this.length;)this.shift();tt(arguments)};setTimeout(function(){var e=ot();Array.prototype.forEach.call(e,function(e){e&&"dtm.js"===e.eventName&&x({eventName:"dtm.init"},!0);t.push(e)})},0)}function x(e){it(e,!0);window.recordTier.push(e)}function ut(){var e,t,r=document.body,n=document.documentElement||r&&r.parentElement;if(document.compatMode&&"BackCompat"!==document.compatMode){e=n?n.clientHeight:0;t=n?n.clientWidth:0}else{function i(e,t){return e&&t?Math.min(e,t):Math.max(e,t)}e=i(n?n.clientHeight:0,r?r.clientHeight:0);t=i(n?n.clientWidth:0,r?r.clientWidth:0)}return{width:t,height:e}}var lt=function(){var r={};return{register:function(e,t){r[String(e)]=t instanceof k?t:{}},getHandler:function(e){return r[String(e)]}}}();function k(e,t){this._cb="function"==typeof t?t:function(){};this._template=E(e)?e:[];k.prototype.simplify=function(e){var t={};for(var r in e)-1!==Array.prototype.indexOf.call(this._template,r)&&(t[r]=e[r]);return t};k.prototype.invoke=function(){this._cb.apply(this,arguments)}}var dt=function(){var r=["__ua","__hads","__hsead"];var n=0;return{inc:function(e){var t=n;-1!==Array.prototype.indexOf.call(r,e)&&n++;return t},dec:function(){var e=n;0<n&&n--;return e}}}();var ft=function(){var i;function e(){var e;var t=!1;try{for(var r in recordTier.ids){var n=recordTier.ids[r].attr;e=n&&n.overwriteSubmit;if("function"==typeof e){e.apply(this,arguments);t=!0}}}catch(e){t=!1}finally{t||"function"!=typeof i||i.apply(this,arguments)}}return{enableOverwrite:function(){if(!i){i=HTMLFormElement.prototype.submit;HTMLFormElement.prototype.submit=e}return i},orgSubmit:function(){return i}}}();var pt=function(){var n=null;var r=0;var i=null;function a(){var e=n;if(n){i&&clearTimeout(i);n=null;i=null}return e}function o(e){if(n){var t=n;a();var r=t.eventName;r=lt.getHandler(r);if(r)try{k.prototype.invoke.call(r,t,e)}catch(e){I.warn("[event] deferCallback is illegal")}else I.warn("[event] no defer type of event are configured by CP!")}else I.warn("[event] there is no event be deferred, skip!")}return{setDeferEvent:function(e,t){this.clearDeferEvent();n=e;r=Math.max(r,t);e="timeout cost "+r;i=setTimeout(o,r,e)},clearDeferEvent:a,tagsOnResponse:function(e){return 1===dt.dec()&&(setTimeout(o,0,String(e)),!0)}}}();var vt={preventDefault:function(e){if(!e.preventBySdk){e.preventBySdk=e.defaultPrevented?"cp":"sdk";e.preventDefault()}},getPreventDefault:function(e){e=e.preventBySdk||(e.defaultPrevented?"cp":"none");return e}};recordTier.unifiedMan=recordTier.unifiedMan||{waitForTags:dt,deferHandleEvent:pt,overwriteFormSubmit:ft,preventWrapper:vt};var I=function(e){var t=data&&data.resources&&data.resources.id||"";return e&&"function"==typeof e.getDtmLogId&&e.getDtmLogId()==t?e:{error:function(){},warn:function(){}}}(arguments[0]);var A=null;function C(e,t,r){var n=document.createElement("script");n.type="text/javascript";n.async=!0;n.src=e;t&&(n.addEventListener?n.onload=t:n.onreadystatechange=function(){n.readyState in{loaded:!0,complete:!0}&&(n.onreadystatechange=null,t())});r&&(n.onerror=r);if(null===A){e=window.document.querySelector&&window.document.querySelector("script[nonce]");A="";if(e){r=e.nonce||e.getAttribute("nonce");r&&/^[\w+/_-]+[=]{0,2}$/.test(r)&&(A=r)}}A&&n.setAttribute("nonce",A);e=document.getElementsByTagName("script")[0]||document.body||document.head;e.parentNode.insertBefore(n,e)}function N(e){var t;switch(typeof e){case"string":t=!!e;break;case"object":t=E(e)?!!e.length:!_(e)||!!Object.getOwnPropertyNames(e).length;break;default:t=!0}return t}function P(e){var t={};for(var r in e)t[r]=d(e[r]);return t}function O(e){return _(e)}function M(e,t){e=void 0===t?"":e;switch(e){case"b":t="FALSE"!=String(t).toUpperCase()&&!!t;break;case"n":t=Number(t)||0;break;case"i":t=Math.round(Number(t))||0;break;case"s":t=String(t)}return t}function R(e,t,r,n,i){if(!window.gtagEntryOfDtm){var a="https://www.googletagmanager.com/gtag/js?id="+encodeURIComponent(e);window.dataLayer=window.dataLayer||[];window.gtagEntryOfDtm=function(){window.dataLayer.push(arguments)};gtagEntryOfDtm("js",new Date);C(a,function(){},function(){I.warn("[TAG]","gtag.js script fail to be loaded")})}n&&gtagEntryOfDtm("set","linker",n);t&&(e+="/"+t);i||(O(r)?gtagEntryOfDtm("config",e,r):gtagEntryOfDtm("config",e));return gtagEntryOfDtm}function mt(e){var t=String(e.url).trim().split("#");var r=t[0];this.hashStr=t[1]||"";t=r.split("?");this.url=t[0];this.queryStr=t[1]||"";this.extra=O(e.extra)?e.extra:{};this.success="function"==typeof e.success?e.success:void 0;this.error="function"==typeof e.error?e.error:void 0}mt.prototype._buildExtra=function(){var e=this.extra;var t=[];for(var r in e)t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t.join("&")};mt.prototype._spliceStringList=function(e,t){if(!E(e))return"";var r=[];Array.prototype.forEach.call(e,function(e){e&&r.push(e)});return r.join(String(t))};function gt(e){e=new mt(e);var n=Object.create(e);return function(){var e=new Image(1,1);var t=n;var r=t._buildExtra();r=t._spliceStringList([r,t.queryStr],"&");r=t._spliceStringList([t.url,r],"?");r=t._spliceStringList([r,t.hashStr],"#");e.src=r;e.onload=function(){e.onload=null;t.success&&t.success()};e.onerror=function(){e.onerror=null;t.error&&t.error()}}}function ht(e){this.headers=O(e.headers)?e.headers:{};e=new mt(e);Object.setPrototypeOf(this,e);Object.getPrototypeOf(this)._xhrPrepare=ht.prototype._xhrPrepare}ht.prototype._xhrPrepare=function(){var t;var r=this;t=window.XMLHttpRequest?new XMLHttpRequest:ActiveXObject("Microsoft.XMLHTTP");t.onreadystatechange=function(){t.readyState,t.status;if(4==t.readyState){var e={status:t.status,response:t.responseText,responseXML:t.responseXML};200<=e.status&&e.status<400?r.success&&r.success(e):(400<=e.status||0===e.status)&&r.error&&r.error(e)}};return t};function _t(e){var i=new ht(e);return function(){var t=i;var e=t._xhrPrepare();var r=t._buildExtra();r=t._spliceStringList([r,t.queryStr],"&");r=t._spliceStringList([t.url,r],"?");r=t._spliceStringList([r,t.hashStr],"#");try{e.open("GET",r,!0);for(var n in t.headers)e.setRequestHeader(n,t.headers[n]);e.send(null)}catch(e){t.error("xhr get failed")}}}function wt(e){var i=new ht(e);return function(){var t=i;var e=t._xhrPrepare();var r;r=t._spliceStringList([t.url,t.queryStr],"?");r=t._spliceStringList([r,t.hashStr],"#");try{e.open("POST",r,!0);for(var n in t.headers)e.setRequestHeader(n,t.headers[n]);t.headers&&"application/json"===t.headers["content-type"]?e.send(JSON.stringify(t.extra)):e.send(t._buildExtra())}catch(e){t.error("xhr post failed")}}}var yt={name:["c","s"],clientId:["c","s"],sampleRate:["c","n"],siteSpeedSampleRate:["c","n"],alwaysSendReferrer:["c","b"],allowAnchor:["c","b"],allowLinker:["c","b"],cookieName:["c","s"],cookieDomain:["c","s"],cookieExpires:["c","i"],legacyCookieDomain:["c","s"],legacyHistoryImport:["c","b"],storage:["c","s"],storeGac:["c","b"],trackingId:["c","s"],anonymizeIp:["s","b"],forceSSL:["s","b"],javaEnabled:["s","b"],nonInteraction:["s","b"],useBeacon:["s","b"],allowAdFeatures:["s","b"],doubleClick:["r","b"],eventValue:["d","i"],eventCategory:["d","s"],eventAction:["d","s"],eventLabel:["d","s"],timingValue:["d","i"],timingCategory:["d","s"],timingVar:["d","s"],timingLabel:["d","s"],socialNetwork:["d","s"],socialAction:["d","s"],socialTarget:["d","s"],exDescription:["d","s"],exFatal:["d","b"]};function bt(r,n,e,t){this.url=r;this.loadCallback=n;this.errCallback=e;this.scriptAttributeObj=t;this.createScript=function(){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=r;if(this.scriptAttributeObj){e.integrity=this.scriptAttributeObj.integrityMark||"";e.crossOrigin=this.scriptAttributeObj.crossOrigin||"anonymous"}this.loadCallback&&(e.addEventListener?e.onload=this.loadCallback:e.onreadystatechange=function(){e.readyState in{loaded:!0,complete:!0}&&(e.onreadystatechange=null,n())});this.errCallback&&(e.onerror=this.errCallback);if(null===A){var t=window.document.querySelector&&window.document.querySelector("script[nonce]");A="";if(t){t=t.nonce||t.getAttribute("nonce");t&&/^[\w+/_-]+[=]{0,2}$/.test(t)&&(A=t)}}A&&e.setAttribute("nonce",A);t=document.getElementsByTagName("script")[0]||document.body||document.head;t.parentNode.insertBefore(e,t)}}function C(e,t,r){e=new bt(e,t,r);e.createScript()}function St(e,t,r,n){e=new bt(e,t,r,n);e.createScript()}function Tt(t,e,r){if(!window.GoogleAnalyticsObject){window.GoogleAnalyticsObject=t||"ga";e=e?"u/analytics_debug.js":"analytics.js";r=kt(r);r=r+"//www.google-analytics.com/"+e;C(r,function(){var e=Tt(t);e&&e.loaded||I.warn("[TAG]","ga analytics.js fail to be initialized")},function(){recordTier.unifiedMan.deferHandleEvent.tagsOnResponse("ga error"),I.warn("[TAG]","ga analytics.js script fail to be loaded")})}var n=window[window.GoogleAnalyticsObject];if(n){if("function"!=typeof n)return I.warn("[TAG]","ga api:"+window.GoogleAnalyticsObject+" is not a function."),void 0}else{n=function(){n.q=n.q||[];n.q.push(arguments)};n.l=Number(new Date);window[window.GoogleAnalyticsObject]=n}return n}function kt(e){var t="https:";if(!e){e=document.currentScript&&document.currentScript.src&&0===document.currentScript.src.toLowerCase().indexOf("http:");var r=document.location.protocol&&0===document.location.protocol.toLowerCase().indexOf("http:");t=e&&r?"http:":"https:"}return t}function At(){window._dtmUaTrackNameCount=window._dtmUaTrackNameCount||0;var e=window._dtmUaTrackNameCount;window._dtmUaTrackNameCount++;return"dtm"+e}function Lt(e,t,r){if(e&&"string"!=typeof e)I.warn("[TAG]","sha256 only accept string as input");else{function n(e){if(window.TextEncoder)return(new TextEncoder).encode(e);var t=encodeURIComponent(e);var r=[];for(var n=0,i=0;n<t.length;n++){var a=t.charCodeAt(n);if(37===a){r[i]=parseInt(t.substring(n+1,n+3),16);n+=2}else r[i]=a;i++}var o=new Uint8Array(r.length);n=0;Array.prototype.forEach.call(r,function(e){o[n++]=e});return o}function i(e){var t=new Uint8Array(e);var r=[];for(var n in t){var i=t[n].toString(16);r[n]=function(e,t){e-=t.length;0<e&&(t=Array(1+e).join("0")+t);return t}(2,i)}return r.join("")}if(window.crypto&&window.crypto.subtle){e=n(e);window.crypto.subtle.digest("SHA-256",e).then(function(e){"function"==typeof t&&t(i(e))},function(e){I.warn("[TAG]","crypto sha-256 failed");"function"==typeof r&&r("")});return!0}if(window.msCrypto&&window.msCrypto.subtle){e=n(e);e=window.msCrypto.subtle.digest("SHA-256",e);e.oncomplete=function(e){"function"==typeof t&&t(i(e.target.result))};e.onerror=function(e){I.warn("[TAG]","msCrypto sha-256 failed");"function"==typeof r&&r("")};return!0}I.warn("[TAG]","crypto api is not supported in this browser!")}return!1}window.hmscore_dtm=window.hmscore_dtm||{logEvent:function(e,t){t=JSON.parse(JSON.stringify(t));t.eventName=e;x(t,!0);return!1},logAutoEvent:function(e,t){t=JSON.parse(JSON.stringify(t));t.eventName=e;x(t,!1)}};function xt(e){var r={};var n={};var i=this;if(E(e)){Array.prototype.forEach.call(e,function(e){if(h.funcList&&Object.prototype.hasOwnProperty.call(h.funcList,e.exec))throw Error("duplicated tag template ID: "+e.exec);var t=function(e){var t=0;"function"!=typeof e.code&&(t=-1);ce(e.exec)||(t=-2);return t}(e);if(t<0)throw Error("3rd part tags initial error: "+t);r[e.exec]=e.code;n[e.exec]=function(e){var t={};for(var r in e)t[r]=Ot[r];Object.freeze(t);return t}(e.reqApi||Ot);h.funcList[e.exec]=function(e){var t;t=r[e.exec];t.call(i,p(e.params),n[e.exec])}});Object.freeze(e);Object.freeze(r);Object.freeze(n)}}var Ot=function(){function a(e,t){t=new Error(t);t.name="dtmAPi."+e;throw t}function o(e,t,r){_(e)||a(t,r+" is not key/value object");for(var n in e)"string"!=typeof e[n]&&a(t,"one of the value in "+r+" is not string");return e}function s(e,t,r){var n={};_(e)||a(t,r+" is not key/value object");for(var i in e){"string"!=typeof e[i]&&a(t,"one of the value in "+r+" is not string");n[i.toLowerCase()]=e[i].toLowerCase()}return n}return{getRecordTierValue:function(e){e=String(e);return b(e,y)},insertScript:function(e,t,r){r="function"==typeof r?r:void 0;t="function"==typeof t?t:void 0;return C(String(e),t,r)},http1PxGetRequest:function(e,t,r,n){e=gt({url:String(e),extra:o(t,"http1PxGetRequest","parameters"),success:r,error:n});e()},httpXhrGetRequest:function(e,t,r,n,i){e=_t({url:String(e),extra:o(t,"httpXhrGetRequest","parameters"),headers:s(r,"httpXhrGetRequest","headers"),success:n,error:i});e()},httpXhrPostRequest:function(e,t,r,n,i){e=wt({url:String(e),extra:o(t,"httpXhrPostRequest","parameters"),headers:s(r,"httpXhrPostRequest","headers"),success:n,error:i});e()},getSha256Hash:function(e,t,r){"function"!=typeof t&&a("getSha256Hash","none successCallback, which is mandatory to output hash value");return Lt(e,t,r)},getDtmId:function(){return f()}}}();h.funcList.__rtv=function(e){e=p(e);var t=e.key;t=b(t,y);e=l(t)?je(e):t;return e};h.funcList.__e=function(e){e=e.key;if(Object.prototype.hasOwnProperty.call(y,e))return y[e]};h.funcList.__hads=function(e){function n(e){g.write("_pa_aaid",e)}function o(e){return"true"===e||!0===e||1==e?"1":"false"===e||!1===e||0==e?"0":""}function s(){var e=decodeURIComponent(function(e){var t=window.location.search.substring(1);var r=t.split("&");for(var n=0;n<r.length;n++){var i=r[n].split("=");if(i[0]===e)return i[1]}return""}("tracking_url"));e=e||decodeURIComponent(b("_dtm_track_linker_.tracking_url",y)||"");e=e.split("?");if(2==e.length&&e[1])return e}function i(e,t){var r={method:"GET",keepalive:"true"};t&&(r.credentials="include");if(Ce("Chrome")&&"function"==typeof window.fetch){window.fetch(e,r).then(e=>{e.json().then(e=>{e.aaid&&e.aaid&&c()&&n(e.aaid)})});setTimeout(function(){recordTier.unifiedMan.deferHandleEvent.tagsOnResponse("hads ok by fetch")},0)}else{t=e;r=null;t={url:t,extra:r,success:function(e){e=JSON.parse(e.response);recordTier.unifiedMan.deferHandleEvent.tagsOnResponse("hads ok by ajax");e.aaid?c()&&n(e.aaid):I.warn("[TAG]","hads response type is error! "+e)},error:function(e){recordTier.unifiedMan.deferHandleEvent.tagsOnResponse("hads error");I.warn("[TAG]","hads custom url http request failed! "+(e&&e.status)||"")}};r=_t(t);r()}}function a(e){var t=["tracking_id="+e.tracking_id,"tracking_time="+e.trackingTime];e.altAaid&&t.push("aaid="+e.altAaid);var r=b("enable_tcf_support",y);if(r){r=b("gdpr_consent",y)?b("gdpr_consent",y):"";t.push("gdpr="+b("gdpr",y));t.push("gdpr_consent="+r)}""!==e.allowPersonalizedAd&&t.push("pa="+e.allowPersonalizedAd);if(_(e.paramsMap.options))for(var n in e.paramsMap.options){var i=e.paramsMap.options[n];n=[encodeURIComponent(n),encodeURIComponent(i)].join("=");t.push(n)}e.trackingUrlArr&&t.push(e.trackingUrlArr[1]);return t.join("&")}function c(){var e=h._dtm_track_linker_.cookiePermit;var t=b("enable_tcf_support",y);var r=b("gdpr",y);var n=b("gdpr_consent_856_p1",y);var i=!1;i=t?!r||n:e;return i}function t(r){!async function(){if("undefined"==typeof grs)return Promise.reject();var e=se();var t=new grs.GrsBaseInfo;t.setPackageName(e.package_name);t.setVersionName(e.version_name);t.setProductLine(e.product_line);t.setProductName(e.product_name);t.setAppName(e.app_name);t.setServerConfig(e.grs_server_config);var r=b("serCountry",y);r&&t.setSerCountry(r);t.setSdkRouteConfig(e.grs_sdk_global_route_config);r=new grs.GrsClient(t);t=r.initLocal();if(t!==grs.GrsErrorCode.ERR_OK)throw new Error("grs init error:"+t);return r.syncGetGrsUrls(e.package_name)}().then(e=>{var t=a(r);e=(e.adsUrl.match(/^http[s]?:\/\//)?"":"https://")+[e.adsUrl+"/dmpadapter-action/dtmweb-na/v1",t].join("?");i(e,!0)})}var r=function(){var e=b("report_enable",y);e=!!l(e)||"FALSE"!=String(e).toUpperCase()&&!!e;return!!e}();if(!r){I.warn("[TAG]forbid hads to upload");recordTier.unifiedMan.deferHandleEvent.tagsOnResponse("hads forbid");return!1}var u=function(e){e=P(e.params);var t=s();var r=(new Date).getTime();n=String(e.tracking_id).trim();n="string"==typeof n&&/^[0-9]{8}$/.test(n)?n:(I.warn("[TAG]","Hads TrackingId type is error!"),"");var n;i=g.readAll();i=i._pa_aaid||"";var i;a=b("allow_personalized_ad",y);a=""===a?"":null!=a?o(a):(a=h._dtm_track_linker_.allow_personalized_ad,""!==a&&null!=a?o(a):"");var a;return{paramsMap:e,trackingUrlArr:t,trackingTime:r,tracking_id:n,altAaid:i,allowPersonalizedAd:a}}(e);if(c())if(r=u,r.trackingUrlArr&&r.trackingTime&&r.tracking_id&&c()){e=u;r=e.trackingUrlArr[0];e=a(e);r=(r.match(/^http[s]?:\/\//)?"":"https://")+[r,e].join("?");r=we(r);r=r.protocol+"//"+r.host;r=[r+"/dmpadapter-action/dtmweb-na/v1",e].join("?");i(r,!0);e=u;r=e.trackingUrlArr[0];e=a(e);r=(r.match(/^http[s]?:\/\//)?"":"https://")+[r,e].join("?");i(r,!1)}else"undefined"==typeof grs?C("https://developer.huawei.com/consumer/cn/service/josp/agc/WiseCloudDTMPortal/dist/static/grs/grs.js",function(){t(u)},function(){I.warn("[GRS]","grs.js script fail to be loaded")}):t(u)};h.funcList.__trlnk=function(e){e=P(e.params);function f(e){if(h._dtm_track_linker_.supportUrlTracking){if(window.location.hostname.toLowerCase()===e.toLowerCase()){if(h._dtm_track_linker_.cookiePermit)return}else if(-1===h._dtm_track_linker_.domains.indexOf(e))return;return 1}}function p(e){e=e.split("#");var t=e[0];e[0]="";e=e.join("#");t=t.split("?");var r=t[0];t=1<t.length?t[1].split("&"):[];var n={};Array.prototype.forEach.call(t,function(e){e=e.split("=");n[e[0]]=e[1]});for(var i in h._dtm_track_linker_.trackParamsMap)n[i]=h._dtm_track_linker_.trackParamsMap[i];var a="?";for(var i in n){r+=a;a="&";r+=i+"="+n[i]}r+=e;return r}function t(e){e=e.target||e.srcElement;try{var t=e;for(var r=100;t&&0<r&&(!t.href||!t.nodeName.match(/^a(?:rea)?$/i));r--)t=t.parentNode;if(t&&("http:"===t.protocol||"https:"===t.protocol)&&f(t.hostname)){var n=p(t.href);t.href=n}}catch(e){I.warn("[TAG]","__trlnk touch event handler except")}}function r(e){try{l=e&&e.action||"",d=l.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);var t=d&&{href:l,protocol:d[1],host:d[2],hostname:d[3],port:d[4],pathname:d[5],search:d[6],hash:d[7]};if(t&&("http:"===t.protocol||"https:"===t.protocol)&&f(t.hostname)){var r=(e.method||"").toLowerCase();switch(r){case"get":var n=e;if("form"===(n.tagName||"").toLowerCase()){var i={};for(var a in h._dtm_track_linker_.trackParamsMap)i[a]=h._dtm_track_linker_.trackParamsMap[a];var o=n.children||[];for(var s=0;s<o.length;s++){var c=o[s];if(Object.prototype.hasOwnProperty.call(i,c.name)){c.setAttribute("value",i[c.name]);delete i[c.name]}}for(var a in i){var u=document.createElement("input");u.setAttribute("type","hidden");u.setAttribute("name",a);u.setAttribute("value",i[a]);n.appendChild(u)}}break;case"post":e.action=p(t.href)}}}catch(e){I.warn("[TAG]","__trlnk submit handler except")}var l,d}function n(e,t){if(e.gdprApplies){if(t&&["tcloaded","useractioncomplete"].includes(e.eventStatus)){recordTier.push({gdpr:1});recordTier.push({gdpr_consent:e.tcString});if(e.vendor.consents[856]&&e.purpose.consents[1]){recordTier.push({gdpr_consent_856_p1:1});i()}else{recordTier.push({gdpr_consent_856_p1:0});g.delAll()}}}else{i();recordTier.push({gdpr:0})}}function i(){var e=b("_dtm_track_linker_.tracking_url",y)||"";""!==e&&g.write("tracking_url",e)}if(!Object.prototype.hasOwnProperty.call(h,"_dtm_track_linker_")){h._dtm_track_linker_=h._dtm_track_linker_||{domains:[],trackParamNames:[],supportUrlTracking:!0,trackParamsMap:{},updateParams:function(e,t){this.trackParamsMap[e]=t}};S(document,"mousedown",t,!0);S(document,"keyup",t,!0);S(document,"submit",function(e){e=e.target||e.srcElement;return r(e)},!0);var a=HTMLFormElement.prototype.submit;HTMLFormElement.prototype.submit=function(){r(this);a.call(this)}}function o(e,t){var r=[];E(e)&&Array.prototype.forEach.call(e,function(e){e="string"==typeof e?e:String(e);e=e.trim();t&&(e=encodeURIComponent(e));e&&r.push(e)});return r}function s(t,e){Array.prototype.forEach.call(e,function(e){Array.prototype.indexOf.call(t,e)<0&&t.push(e)})}var c=o(e.domains,!1);var u=o(e.trackingParams,!0);0===u.length&&u.push("tracking_url");s(h._dtm_track_linker_.domains,c);s(h._dtm_track_linker_.trackParamNames,u);h._dtm_track_linker_.supportUrlTracking="TRUE"===String(e.supportUrlTracking).toUpperCase();h._dtm_track_linker_.cookiePermit="TRUE"===String(e.cookiePermit).toUpperCase();if(null!=e.enable_tcf_support){h._dtm_track_linker_.enable_tcf_support="TRUE"===String(e.enable_tcf_support).toUpperCase();void 0===b("enable_tcf_support",y)&&recordTier.push({enable_tcf_support:h._dtm_track_linker_.enable_tcf_support})}null!=e.allow_personalized_ad&&(h._dtm_track_linker_.allow_personalized_ad=e.allow_personalized_ad);var l=g.readAll();c=window.location.search;if("?"===c[0]){c=c.substring(1);u=c.split("&");Array.prototype.forEach.call(u,function(e){e=e.split("=");l[e[0]]=e[1]})}for(var d in h._dtm_track_linker_.trackParamsMap)h._dtm_track_linker_.trackParamsMap[d]=void 0;for(var d in l)0<=Array.prototype.indexOf.call(h._dtm_track_linker_.trackParamNames,d)&&h._dtm_track_linker_.updateParams(d,l[d]);recordTier.push({_dtm_track_linker_:h._dtm_track_linker_.trackParamsMap});if(null!=e.enable_tcf_support){recordTier.push({gdpr:1});recordTier.push({gdpr_consent_856_p1:0});b("enable_tcf_support",y)?(v=0,m=setInterval(function(){v+=1;600===v&&clearInterval(m);if(void 0!==window.__tcfapi){clearInterval(m);window.__tcfapi("getTCData",2,n);window.__tcfapi("addEventListener",2,n)}v++},100)):h._dtm_track_linker_.cookiePermit?i():g.delAll()}else h._dtm_track_linker_.cookiePermit?i():g.delAll();var v,m};!function(){var e=h.eventList.domLoad=h.eventList.domLoad||{};var t=function(e){e={eventName:e};return e};function r(){var e=t("dtm.dom");x(e,!0)}var n=function(){if(!e.init){"interactive"===document.readyState||"complete"===document.readyState?setTimeout(function(){r()}):S(document,"DOMContentLoaded",r);e.init=!0}};e.func=n;e.init=!1;T("domLoad",w.first)}();!function(){var e=h.eventList.winLoad=h.eventList.winLoad||{};var t=function(e){e={eventName:e};return e};function r(){var e=t("dtm.load");x(e,!0)}var n=function(){if(!e.init){"interactive"===document.readyState||"complete"===document.readyState?setTimeout(function(){r()}):S(window,"load",r);e.init=!0}};e.func=n;e.init=!1;T("winLoad",w.second)}();function It(){var e=Re();if("ok"!==e)I.warn("[DTMSDK] runtime error:"+e);else{De();ct();nt()}}It();}})();