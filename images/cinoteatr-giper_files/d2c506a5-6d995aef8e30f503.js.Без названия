"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7989],{71201:function(e,t,n){n.d(t,{$L:function(){return qn},rq:function(){return me},um:function(){return h},KN:function(){return to},OR:function(){return ro}});var r="https://passport.yandex.{tld}",o="https://passport.yandex.{tld}/support";function i(e){return{config:e}}var a={test:i("testing"),alpha:i("development"),prod:i("production")};function s(e){return{origin:e}}var u={external:{dev:s("https://renderer-chat-dev.hamster.yandex.{tld}/chat"),prod:s("https://yandex.{tld}/chat"),release:s("https://webtemplates.hamster.yandex.{tld}/chat"),local:function(e){return s(e)},pull:function(e){return s("https://renderer-chat-pull-"+e+".hamster.yandex.{tld}/chat")}},team:{dev:s("https://renderer-chat-dev.test.q.yandex-team.ru/embed"),prod:s("https://q.yandex-team.ru/embed"),release:s("https://webtemplates.test.q.yandex-team.ru/embed"),local:function(e){return s(e)},pull:function(e){return s("https://renderer-chat-pull-"+e+".test.q.yandex-team.ru/embed")}}},c=function(e,t){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},c(e,t)};function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var p=function(){return p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},p.apply(this,arguments)};function d(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function f(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}var h={backend:a,origin:u,type:{external:{multiChats:function(e){return{build:"chamb",flags:p({newHeader:"1",embedButton:"1"},(null===e||void 0===e?void 0:e.inline)&&{hideClose:"1"})}},singleChat:function(e){return{build:"chamb",flags:p({disableNavigation:"1",disableChatList:"1",newHeader:"1",embedButton:"1"},(null===e||void 0===e?void 0:e.inline)&&{hideClose:"1"})}}},team:{multiChats:function(e){return{build:"yamb-embed-internal",flags:p({newHeader:"1",embedButton:"1"},(null===e||void 0===e?void 0:e.inline)&&{hideClose:"1"})}},singleChat:function(e){return{build:"yamb-embed-internal",flags:p({disableChatList:"1",disableNavigation:"1",newHeader:"1",embedButton:"1"},(null===e||void 0===e?void 0:e.inline)&&{hideClose:"1"})}}}},debug:{all:{debug:"*"},filter:function(e){return{debug:e}}},fullscreen:{flags:{fullscreenSupported:"1"}},support:function(e){return{unreadWithCountChats:!0,unreadCounterOtherGuid:e,workspaceId:"support",iframeOpenData:{guid:e}}}};function v(){return-1!==document.cookie.search(/(^|; )yandex_login=[^;]+/)}function y(e){try{e&&e.parentNode&&e.parentNode.removeChild(e)}catch(t){}}var b="yandex\\."+("("+["com.tr","com.ge","com.am","co.il","ua","ru","kz","by","com","net","uz","fr","az","kg","lv","lt","md","tj","tm","ee"].map((function(e){return e.replace(/\./g,"\\.")})).join("|")+")");function g(e){var t,n=function(e){var t=new RegExp(b+"$").exec(e);return t&&t[1]||""}(e);return(t=n)&&"net"!==t?n:"ru"}var m=function(){return m.memo||(m.memo=g(window.location.hostname)),m.memo};function w(e,t){return void 0===t&&(t=m()),e.replace(/\{tld\}/,t)}function O(e,t){return void 0===t||null===t||""===t?"":encodeURIComponent(e)+"="+encodeURIComponent(String(t))}function _(e,t){var n=-1===e.search(/\?/)?"?":"&",r=function(e){return e.map((function(e){var t=e.name,n=e.value;return Array.isArray(n)?n.map((function(e){return O(t,e)})).filter(Boolean).join("&"):O(t,n)})).filter(Boolean).join("&")}(Object.keys(t).map((function(e){return{name:e,value:t[e]}})));return e+(r?n+r:"")}function C(){return window.location.origin||window.location.protocol+"//"+window.location.host}var E=function(e,t){return!!e.trim()&&t.some((function(t){return t===e}))};function j(e){return void 0===e&&(e="xxxx-xxxx-xxxx-xxxx"),e.replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}var P=function(){},x=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},k=function(){function e(){this.listeners=new Set}return e.prototype.addListener=function(e){return!this.listeners.has(e)&&(this.listeners.add(e),!0)},e.prototype.removeListener=function(e){return this.listeners.delete(e)},e.prototype.removeAllListener=function(){this.listeners.clear()},e.prototype.hasListeners=function(){return this.listeners.size>0},e.prototype.dispatch=function(t){var n,r;try{for(var o=x(this.listeners),i=o.next();!i.done;i=o.next()){var a=i.value;try{var s=a(t);if(s&&s.stopPropagation)return}catch(u){e.errorHandler(u)}}}catch(c){n={error:c}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e.errorHandler=P,e}();function I(e){return"undefined"!==typeof e}function T(e,t){if("undefined"===typeof e)throw new Error(t)}function L(e){return"string"===typeof e}function S(e){return"object"===typeof e&&null!==e}function M(e){return"boolean"===typeof e}function R(e){return"number"===typeof e&&!Number.isNaN(e)}var q="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},N={},A={};Object.defineProperty(A,"__esModule",{value:!0}),A.attachRef=void 0,A.attachRef=function(e){return function(t,n){Object.defineProperty(t,n,{configurable:!0,get:function(){var t=this,r=function(n){r.current=n;var o=t.props[e];o&&("function"===typeof o?o(n):"object"===typeof o&&(o.current=n))};return r.current=null,Object.defineProperty(this,n,{configurable:!0,value:r}),r}})}};var B={};Object.defineProperty(B,"__esModule",{value:!0}),B.bind=void 0,B.bind=function(e,t,n){if("function"===typeof e)throw new TypeError("Cannot bind static method "+t);var r=n.value,o=!1;return{configurable:!0,get:function(){if(o)return r;var e=r.bind(this);return o=!0,Object.defineProperty(this,t,{configurable:!0,get:function(){return e}}),o=!1,e}}},function(e){var t=q&&q.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=q&&q.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(A,e),n(B,e)}(N);var z=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},F=function(){function e(e,t,n){void 0===n&&(n=500),this.callback=e,this.timeout=t,this.step=n,this.timeoutId=void 0,this.endTime=0,this.endTime=Date.now()+t,this.tick()}return e.prototype.cancel=function(){this.timeoutId&&clearTimeout(this.timeoutId)},e.prototype.tick=function(){var e=Date.now();if(this.endTime<=e||this.timeout<=0)return this.timeoutId=void 0,void this.callback();this.timeoutId=setTimeout(this.tick,this.endTime-e>this.step?this.step:this.endTime-e)},z([N.bind],e.prototype,"tick",null),e}();var V=function(){function e(e){void 0===e&&(e=!1),this.isLocked=e,this.queue=[],this.isExecuting=!1,this.isFreezed=!1}return e.prototype.lock=function(){this.isLocked=!0},e.prototype.unlock=function(){this.isLocked&&(this.isLocked=!1,this.execute())},e.prototype.push=function(e,t){return!this.isFreezed&&(t&&this.cancel(t),this.queue.push(e),this.execute(),!0)},e.prototype.execute=function(){if(!this.isLocked&&!this.isExecuting){for(this.isExecuting=!0;this.queue.length&&!this.isLocked;){var e=this.queue.shift();e&&e.run()}this.isExecuting=!1}},e.prototype.cancel=function(e,t){e?(this.isFreezed=!0,this.queue=this.queue.filter((function(n){var r=function(e){return"tag"in e}(e)?n.tag===e.tag:n.id===e.id;return r&&n.cancel(t),!r})),this.isFreezed=!1):this.cancelAll(t)},e.prototype.isEmpty=function(){return!this.queue.length},e.prototype.cancelAll=function(e){this.isFreezed=!0,this.queue.forEach((function(t){t.cancel(e)})),this.queue=[],this.isFreezed=!1},e}(),U=function(){function e(e,t){var n=void 0===t?{}:t,r=n.tag,o=void 0===r?"default":r,i=n.id,a=void 0===i?j("xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx"):i,s=n.onCancel;this.task=e,this.tag=o,this.onCancel=s,this.id=a}return e.prototype.run=function(){try{this.task()}catch(e){}},e.prototype.cancel=function(e){if(this.onCancel)try{this.onCancel(e)}catch(t){}},e}(),D={},H={},W={};Object.defineProperty(W,"__esModule",{value:!0}),W.createHandler=W.ErrorVisitor=void 0;var Z=function(e,t){this.error=e,this.callback=t};W.ErrorVisitor=Z,W.createHandler=function(e,t){return Object.keys(e).reduce((function(e,n){return e[n]=function(e){return t(e,n)},e}),{})};var G=q&&q.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(H,"__esModule",{value:!0}),H.BaseError=void 0;var Y=W,X=function(e){function t(n,r){var o=e.call(this,n)||this;return r&&(o.stack=r),Object.setPrototypeOf(o,t.prototype),o}return G(t,e),t.handle=function(e){return new Y.ErrorVisitor(this,e)},t.is=function(e){return e instanceof this},t.prototype.accept=function(e){this instanceof e.error&&e.callback(this)},t}(Error);H.BaseError=X;var J={},K=q&&q.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(J,"__esModule",{value:!0}),J.LoggableError=void 0;var Q=function(e){function t(n,r,o){var i=e.call(this,n)||this;return i.loggerFields=r,i.additional=r&&r.additional,o&&(i.stack=o),Object.setPrototypeOf(i,t.prototype),i}return K(t,e),t}(H.BaseError);J.LoggableError=Q;var $={},ee=q&&q.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty($,"__esModule",{value:!0}),$.serializeId=$.SerializableError=void 0;var te=function(e){function t(n,r){var o=e.call(this,n,r)||this;return Object.setPrototypeOf(o,t.prototype),o}return ee(t,e),t.makeSerializable=function(e){this.cache.set(e.SERIALIZE_ID,e)},t.serialize=function(e){return e.serialize()},t.deserialize=function(e){if(e.serializeId===t.SERIALIZE_ID)return new t(e.message);var n=this.cache.get(e.serializeId);return n?new n(e.message):new Error(e.message)},t.prototype.serialize=function(){return{serializeId:this.constructor.SERIALIZE_ID,message:this.message}},t.SERIALIZE_ID="@SerializableError",t.cache=new Map,t}(H.BaseError);$.SerializableError=te,$.serializeId=function(e){return function(t){t.SERIALIZE_ID=e,te.makeSerializable(t)}};var ne={},re=q&&q.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(ne,"__esModule",{value:!0}),ne.TransportError=void 0;var oe=function(e){function t(n,r){var o=e.call(this,"TransportError, "+n,r)||this;return Object.setPrototypeOf(o,t.prototype),o}return re(t,e),t}(H.BaseError);ne.TransportError=oe;var ie={},ae=q&&q.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(ie,"__esModule",{value:!0}),ie.RequestTimeoutError=void 0;var se=function(e){function t(n){var r=e.call(this,"Request timeout",n)||this;return Object.setPrototypeOf(r,t.prototype),r}return ae(t,e),t}(ne.TransportError);ie.RequestTimeoutError=se,function(e){var t=q&&q.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=q&&q.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.LoggableError=e.ErrorVisitor=e.createHandler=e.BaseError=void 0;var r=H;Object.defineProperty(e,"BaseError",{enumerable:!0,get:function(){return r.BaseError}});var o=W;Object.defineProperty(e,"createHandler",{enumerable:!0,get:function(){return o.createHandler}}),Object.defineProperty(e,"ErrorVisitor",{enumerable:!0,get:function(){return o.ErrorVisitor}});var i=J;Object.defineProperty(e,"LoggableError",{enumerable:!0,get:function(){return i.LoggableError}}),n($,e),n(ne,e),n(ie,e)}(D);var ue=function(){function e(e,t,n){var r=this;void 0===t&&(t=1e4),this.onResult=e,this.timeout=new F((function(){r.result(new n)}),t)}return e.prototype.result=function(e,t){this.clearTimeout(),e?this.onResult(e):this.onResult(void 0,t)},e.prototype.clearTimeout=function(){this.timeout&&(this.timeout.cancel(),this.timeout=void 0)},e}(),ce=function(){function e(e){void 0===e&&(e=D.RequestTimeoutError),this.RequestTimeoutErrorCtr=e,this.awaiters=new Map,this.seqNo=1}return e.prototype.event=function(e){var t=e(this.seqNo);return this.seqNo++,t},e.prototype.request=function(e,t){var n=this;return new Promise((function(r,o){var i=e(n.seqNo);n.seqNo++;var a=new ue((function(e,t){n.remove(i),e?o(e):r(t)}),t,n.RequestTimeoutErrorCtr);n.awaiters.set(i,a)}))},e.prototype.result=function(e,t,n){var r=this.awaiters.get(e);return!!r&&(t?r.result(t):r.result(void 0,n),!0)},e.prototype.drop=function(e){this.awaiters.forEach((function(t){return t.result(e)})),this.awaiters.clear(),this.seqNo=1},e.prototype.remove=function(e){return this.awaiters.delete(e)},e}(),le=function(){function e(){this.isOptional=!1,this.isUndefinable=!1,this.validators=[]}return Object.defineProperty(e.prototype,"string",{get:function(){return this.validators.push(L),this},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"notEmptyString",{get:function(){return this.validators.push((function(e){return L(e)&&""!==e})),this},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"object",{get:function(){return this.validators.push(S),this},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"number",{get:function(){return this.validators.push(R),this},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"boolean",{get:function(){return this.validators.push(M),this},enumerable:!1,configurable:!0}),e.prototype.shape=function(e){return this.validators.push((function(t){return e.validate(t)})),this},Object.defineProperty(e.prototype,"optional",{get:function(){return this.isOptional=!0,this},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"undefinable",{get:function(){return this.isUndefinable=!0,this},enumerable:!1,configurable:!0}),e.prototype.values=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.validators.push((function(t){return e.some((function(e){return t===e}))})),this},e.prototype.arrayOf=function(e){return this.validators.push((function(t){return Array.isArray(t)&&t.every(e)})),this},Object.defineProperty(e.prototype,"any",{get:function(){return this.isUndefinable=!0,this.validators.push((function(){return!0})),this},enumerable:!1,configurable:!0}),e.prototype.validate=function(e){return I(e)?this.validators.some((function(t){return t(e)})):this.isOptional||this.isUndefinable},e}(),pe=function(){function e(e){this.shape=e}return e.prototype.validate=function(e){var t=this;return!(!I(e)||!S(e))&&Object.keys(this.shape).every((function(n){return n in e?t.shape[n].validate(e[n]):t.shape[n].isOptional}))},e.is=function(){return new le},e}(),de={get is(){return new le},create:function(e){return new pe(e)}},fe=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},he=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(fe(arguments[t]));return e};var ve=function(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))},ye=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},be=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ye(arguments[t]));return e},ge=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.values={},this.extend.apply(this,f(this.constructor.DEFAULTS,e))}return e.extend=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t}(this),e.DEFAULTS=t,e},e.prototype.extend=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.values=e.reduce((function(e,t){return p(p(p({},e),t),{iframeOpenData:p(p({},e.iframeOpenData),t.iframeOpenData),flags:p(p({},e.flags),t.flags)})}),p({},this.values))},e.prototype.getFlags=function(){var e=p(p({},this.values.flags),this.values.fullscreen?h.fullscreen.flags:void 0);return Object.keys(e).reduce((function(t,n){return null!==n&&void 0!==n&&void 0!==e[n]&&t.push(n+"="+e[n]),t}),[]).join(";")},e.prototype.getMessengerUrl=function(e,t,n){var r=this.values,o=r.origin,i=r.config,a=r.build,s=r.tld,u=r.lang,c=void 0===u?"ru":u,l=r.serviceId,d=r.workspaceId,f=r.orgId,h=r.catchUrlClick,v=r.unreadCounterChatId,y=r.unreadCounterOtherGuid,b=r.unreadCounterNsFilter,g=r.unreadWithCountChats,m=r.debug,O=r.authType,E=p({config:i,build:a,lang:c,debug:m,parentOrigin:C(),parentUrl:window.location.href,serviceId:l,workspaceId:d,orgId:f,utm_source:"widget",utm_medium:"iframe",widgetId:e,flags:this.getFlags(),protocolVersion:t,authType:O,unreadCounterChatId:v,unreadCounterOtherGuid:y,unreadCounterNsFilter:b,unreadWithCountChats:g,catchUrlClick:h?"true":void 0},n);return _(w(w(o,s)),E)},e.DEFAULTS=[],e}(),me=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.DEFAULTS=[h.backend.prod,h.origin.external.prod,h.type.external.multiChats()],t}(ge),we=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}l(t,e),t.DEFAULTS=[h.backend.prod,h.origin.external.prod,h.type.external.multiChats()]}(ge),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}l(t,e),t.DEFAULTS=[h.backend.prod,h.origin.external.prod,h.type.external.singleChat({inline:!0})]}(ge),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}l(t,e),t.DEFAULTS=[h.backend.prod,h.origin.team.prod,h.type.team.multiChats()]}(ge),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}l(t,e),t.DEFAULTS=[h.backend.prod,h.origin.team.prod,h.type.team.singleChat()]}(ge),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}l(t,e),t.DEFAULTS=[h.backend.prod,h.origin.team.prod,h.type.team.singleChat({inline:!0})]}(ge),new(function(){function e(){}return e.prototype.configurate=function(e){this.loggerFactory=e},e.prototype.create=function(e){return this.loggerFactory?this.loggerFactory(e):{log:function(){},error:function(){}}},e}()));function Oe(e){return we.create(e)}var _e={},Ce={};Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.attachRef=void 0,Ce.attachRef=function(e){return function(t,n){Object.defineProperty(t,n,{configurable:!0,get:function(){var t=this,r=function(n){r.current=n;var o=t.props[e];o&&("function"===typeof o?o(n):"object"===typeof o&&(o.current=n))};return r.current=null,Object.defineProperty(this,n,{configurable:!0,value:r}),r}})}};var Ee={};Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.bind=void 0,Ee.bind=function(e,t,n){if("function"===typeof e)throw new TypeError("Cannot bind static method "+t);var r=n.value,o=!1;return{configurable:!0,get:function(){if(o)return r;var e=r.bind(this);return o=!0,Object.defineProperty(this,t,{configurable:!0,get:function(){return e}}),o=!1,e}}},function(e){var t=q&&q.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=q&&q.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(Ce,e),n(Ee,e)}(_e);var je={},Pe={},xe={};Object.defineProperty(xe,"__esModule",{value:!0}),xe.createHandler=xe.ErrorVisitor=void 0;var ke=function(e,t){this.error=e,this.callback=t};xe.ErrorVisitor=ke,xe.createHandler=function(e,t){return Object.keys(e).reduce((function(e,n){return e[n]=function(e){return t(e,n)},e}),{})};var Ie=q&&q.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.BaseError=void 0;var Te=xe,Le=function(e){function t(n,r){var o=e.call(this,n)||this;return r&&(o.stack=r),Object.setPrototypeOf(o,t.prototype),o}return Ie(t,e),t.handle=function(e){return new Te.ErrorVisitor(this,e)},t.is=function(e){return e instanceof this},t.prototype.accept=function(e){this instanceof e.error&&e.callback(this)},t}(Error);Pe.BaseError=Le;var Se={},Me=q&&q.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(Se,"__esModule",{value:!0}),Se.LoggableError=void 0;var Re=function(e){function t(n,r,o){var i=e.call(this,n)||this;return i.loggerFields=r,i.additional=r&&r.additional,o&&(i.stack=o),Object.setPrototypeOf(i,t.prototype),i}return Me(t,e),t}(Pe.BaseError);Se.LoggableError=Re;var qe={},Ne=q&&q.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(qe,"__esModule",{value:!0}),qe.serializeId=qe.SerializableError=void 0;var Ae=function(e){function t(n,r){var o=e.call(this,n,r)||this;return Object.setPrototypeOf(o,t.prototype),o}return Ne(t,e),t.makeSerializable=function(e){this.cache.set(e.SERIALIZE_ID,e)},t.serialize=function(e){return e.serialize()},t.deserialize=function(e){if(e.serializeId===t.SERIALIZE_ID)return new t(e.message);var n=this.cache.get(e.serializeId);return n?new n(e.message):new Error(e.message)},t.prototype.serialize=function(){return{serializeId:this.constructor.SERIALIZE_ID,message:this.message}},t.SERIALIZE_ID="@SerializableError",t.cache=new Map,t}(Pe.BaseError);qe.SerializableError=Ae,qe.serializeId=function(e){return function(t){t.SERIALIZE_ID=e,Ae.makeSerializable(t)}};var Be={},ze=q&&q.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(Be,"__esModule",{value:!0}),Be.TransportError=void 0;var Fe=function(e){function t(n,r){var o=e.call(this,"TransportError, "+n,r)||this;return Object.setPrototypeOf(o,t.prototype),o}return ze(t,e),t}(Pe.BaseError);Be.TransportError=Fe;var Ve={},Ue=q&&q.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.RequestTimeoutError=void 0;var De=function(e){function t(n){var r=e.call(this,"Request timeout",n)||this;return Object.setPrototypeOf(r,t.prototype),r}return Ue(t,e),t}(Be.TransportError);Ve.RequestTimeoutError=De,function(e){var t=q&&q.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=q&&q.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.LoggableError=e.ErrorVisitor=e.createHandler=e.BaseError=void 0;var r=Pe;Object.defineProperty(e,"BaseError",{enumerable:!0,get:function(){return r.BaseError}});var o=xe;Object.defineProperty(e,"createHandler",{enumerable:!0,get:function(){return o.createHandler}}),Object.defineProperty(e,"ErrorVisitor",{enumerable:!0,get:function(){return o.ErrorVisitor}});var i=Se;Object.defineProperty(e,"LoggableError",{enumerable:!0,get:function(){return i.LoggableError}}),n(qe,e),n(Be,e),n(Ve,e)}(je);var He;!function(e){e[e.NORMAL=0]="NORMAL",e[e.CONNECTION_CLOSED=1]="CONNECTION_CLOSED",e[e.ERROR=2]="ERROR",e[e.CONNECTION_TERMINATED=3]="CONNECTION_TERMINATED"}(He||(He={}));var We="@@@@ping",Ze="@@@@pong",Ge=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ye=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Xe=function(e){function t(t){var r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}var n;return Ge(t,e),n=t,t=n=Ye([je.serializeId("@ChannelError")],t)}(je.SerializableError),Je=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ke=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Qe=function(e){function t(t){var r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}var n;return Je(t,e),n=t,t=n=Ke([je.serializeId("@ConnectionClosedError")],t)}(Xe),$e=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),et=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},tt=function(e){function t(t){var r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}var n;return $e(t,e),n=t,t=n=et([je.serializeId("@UnhandledResponseError")],t)}(Xe),nt=de.create({channelId:de.is.string,id:de.is.string,error:de.is.optional.any,type:de.is.values("request","response","registration","kill","observe","unobserve","notify","event","ready"),refId:de.is.optional.string,data:de.is.any});function rt(e){return je.SerializableError.deserialize(e)||new Xe("unknown")}function ot(e){if(e)return"string"===typeof e?new Xe(e).serialize():e instanceof je.SerializableError?je.SerializableError.serialize(e):e instanceof Error?new Xe(e.message).serialize():new Xe("unknown").serialize()}var it=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},at=Oe("ChannelBase").log,st=function(){function e(e){this.channelId=e,this.connectionStatus="closed",this.onRequest=new k,this.onEvent=new k,this.onClose=new k,this.onObserve=new k,this.observers=new Map,this.observables=new Set,this.requests=new ce,this.queue=new V(!0),this.eventHandlers=new Map,this.eventFactory=function(e){return function(t,n,r,o){return void 0===r&&(r=void 0),void 0===o&&(o=""),{channelId:e,id:j("xxxx-xxxx-xxxx-xxxx"),refId:o,type:t,data:n,error:ot(r)}}}(this.channelId),this.eventHandlers.set("observe",this.handleObserveMessage).set("unobserve",this.handleUnobserveMessage).set("event",this.handleEventMessage).set("response",this.handleResponseMessage).set("request",this.handleRequestMessage).set("notify",this.handleNotifyMessage).set("kill",this.handleKillMessage)}return e.prototype.request=function(e,t,n){return(null===n||void 0===n?void 0:n.cancelPreviousRequestsWithSameType)&&this.queue.cancel({tag:e}),this.sendRequest(this.eventFactory("request",{type:e,data:t}),n)},e.prototype.event=function(e,t){this.sendEvent(this.eventFactory("event",{type:e,data:t}))},e.prototype.observe=function(e,t){return at("adding observer: %s",e),this.addObserver(e,t),this.sendRequest(this.eventFactory("observe",{objectName:e}))},e.prototype.unobserve=function(e,t){return this.removeObserver(e,t),this.getObserver(e).callbacks.size?Promise.resolve():this.sendRequest(this.eventFactory("unobserve",{objectName:e}))},e.prototype.notifyObservers=function(e,t){this.observables.has(e)&&this.sendEvent(this.eventFactory("notify",{object:t,objectName:e}))},e.prototype.setPort=function(e){this.port&&(this.port.close(),this.port.removeEventListener("message",this.handleMessage)),this.port=e,this.port.addEventListener("message",this.handleMessage),this.port.start()},e.prototype.unlock=function(){this.connectionStatus="opened",this.queue.unlock()},e.prototype.close=function(e){var t=e.closeCode,n=void 0===t?He.NORMAL:t,r=e.reason,o=void 0===r?"Transport was closed":r,i=e.error,a=void 0===i?new Qe(o):i,s=e.persistQueue,u=void 0!==s&&s;if(at("destroying",this.channelId,o),"closed"!==this.connectionStatus){this.closeCode=n,this.closeReason=o,this.closeError=a,this.connectionStatus="closed",this.cleanup(a,u),this.queue.lock();var c=this.port;if(c){c.removeEventListener("message",this.handleMessage);try{this.sendBypass(this.eventFactory("kill",void 0,a))}catch(l){}try{c.close()}catch(p){}}this.port=void 0,this.onClose.dispatch(this)}},e.prototype.cleanup=function(t,n){void 0===t&&(t=new e.CancelError("Cleanup")),void 0===n&&(n=!1),this.observers.clear(),n||this.queue.cancel(void 0,t),this.requests.drop(t)},e.prototype.sendRequest=function(t,n){var r=this;at("enqueue request: %o",t);var o=(t.data||{}).type;return new Promise((function(i,a){r.queue.push(new U((function(){r.requests.request((function(){return r.sendBypass(t)}),null===n||void 0===n?void 0:n.timeout).then(i).catch(a)}),{onCancel:function(t){void 0===t&&(t=new e.CancelError("Request cancelled")),a(t)},tag:o}))}))},e.prototype.sendEvent=function(e){var t=this;at("enqueue event: %o",e);var n=(e.data||{}).type;this.queue.push(new U((function(){t.sendBypass(e)}),{tag:n}))},e.prototype.sendBypass=function(e){if(!this.port)throw new Xe("Port not found");return at("sending message: %o",e),this.port.postMessage(e),e.id},e.prototype.handleMessage=function(e){var t,n,r=e.data;(at("message handled: %o",r),n=r,nt.validate(n))&&(r.channelId===this.channelId&&(e.stopImmediatePropagation(),null===(t=this.eventHandlers.get(r.type))||void 0===t||t(e)))},e.prototype.handleResponseMessage=function(e){var t=e.data,n=t.refId,r=t.data,o=t.error;o?(at("handle response error: %o",o),this.requests.result(n,rt(o))):(at("handle response: %o",e.data),this.requests.result(n,void 0,r))},e.prototype.handleRequestMessage=function(e){var t=this,n=e.data,r=n.data,o=n.id;this.onRequest.dispatch({type:r.type,payload:r.data,reject:function(e){t.sendBypass(t.eventFactory("response",void 0,e,o))},response:function(e){Promise.resolve(e).then((function(e){t.sendBypass(t.eventFactory("response",e,void 0,o))})).catch((function(e){t.sendBypass(t.eventFactory("response",void 0,e,o))}))}})},e.prototype.handleKillMessage=function(e){at("handle kill message: %o",e.data);var t=e.data.error?rt(e.data.error):void 0;this.close({closeCode:Qe.is(t)?He.CONNECTION_CLOSED:He.ERROR,reason:"kill signal",error:t})},e.prototype.handleUnobserveMessage=function(e){var t;at("handle unobserve message: %o",e.data);var n=null===(t=e.data.data)||void 0===t?void 0:t.objectName;this.observables.delete(n),this.sendEvent(this.eventFactory("response",void 0,void 0,e.data.id))},e.prototype.handleObserveMessage=function(e){var t=this;at("handle observe message: %o",e);var n=e.data,r=n.data,o=n.id,i=r.objectName;this.observables.add(i),this.onObserve.dispatch({data:{objectName:i},notify:function(e){t.notifyObservers(i,e)}}),this.sendEvent(this.eventFactory("response",void 0,void 0,o))},e.prototype.handleNotifyMessage=function(e){at("handle notify message: %o",e.data);var t=e.data.data,n=t.objectName,r=t.object;this.getObserver(n).callbacks.forEach((function(e){return e(r)}))},e.prototype.handleEventMessage=function(e){at("handle event message: $o",e.data),this.onEvent.dispatch({type:e.data.data.type,data:e.data.data.data})},e.prototype.getObserver=function(e){var t=this.observers.get(e);return t||(t={callbacks:new Set},this.observers.set(e,t)),t},e.prototype.addObserver=function(e,t){this.getObserver(e).callbacks.add(t)},e.prototype.removeObserver=function(e,t){this.getObserver(e).callbacks.delete(t)},e.CancelError=Xe,it([_e.bind],e.prototype,"handleMessage",null),it([_e.bind],e.prototype,"handleResponseMessage",null),it([_e.bind],e.prototype,"handleRequestMessage",null),it([_e.bind],e.prototype,"handleKillMessage",null),it([_e.bind],e.prototype,"handleUnobserveMessage",null),it([_e.bind],e.prototype,"handleObserveMessage",null),it([_e.bind],e.prototype,"handleNotifyMessage",null),it([_e.bind],e.prototype,"handleEventMessage",null),e}(),ut=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ct=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},lt=Oe("ChannelOutgoing").log,pt=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.channelTransportProvider=n,o.params=r,o.onConnectionEstablished=new k,o.eventHandlers.set("ready",o.handleReady),o}return ut(t,e),t.prototype.connect=function(){this.sendRegistrationEvent()},t.prototype.disposeTransport=function(){var e,t;null===(e=this.transport)||void 0===e||e.onClose.removeListener(this.handleClose),null===(t=this.transport)||void 0===t||t.onOpen.removeListener(this.handleOpen),this.transport=void 0,this.requestTransportCallback=void 0,this.connectionStatus="closed"},t.prototype.sendRegistrationEvent=function(e){var t,n=this;void 0===e&&(e=!1),this.ensureTransport()&&(lt("connecting"),this.connectionStatus="connecting",this.closeReason=void 0,this.closeCode=void 0,this.closeError=void 0,this.requests.request((function(){var e,t=n.eventFactory("registration",null===(e=n.params)||void 0===e?void 0:e.scope);lt("sending register event to receiver: %o, %s",t);var r=new MessageChannel;return n.setPort(r.port1),n.transport.send(t,[r.port2]),t.id}),null===(t=this.params)||void 0===t?void 0:t.connectTimeout).then((function(t){lt("connected, status: %o",status),t.manualUnlock||n.ready(e)})).catch((function(e){lt("failed to connect: %o",e),n.close({closeCode:He.ERROR,reason:null===e||void 0===e?void 0:e.message,error:e,persistQueue:!0})})))},t.prototype.sendRequest=function(t){return"closed"===this.connectionStatus&&this.connect(),e.prototype.sendRequest.call(this,t)},t.prototype.sendEvent=function(t){return"closed"===this.connectionStatus&&this.connect(),e.prototype.sendEvent.call(this,t)},t.prototype.ensureTransport=function(){return this.transport&&this.transport.closed()&&this.disposeTransport(),this.transport||this.requestTransportCallback||this.requestTransport(),Boolean(this.transport)},t.prototype.requestTransport=function(){var e=this,t=function(e){var t=!1;return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];t||(t=!0,e.apply(void 0,he(n)))}}((function(n,r){t===e.requestTransportCallback&&(e.requestTransportCallback=void 0,r?e.close({closeCode:He.ERROR,reason:"Request transport callback error",error:r,persistQueue:!0}):(e.transport=n,e.transport.onClose.addListener(e.handleClose),e.transport.onOpen.addListener(e.handleOpen),"opened"===e.transport.connectionStatus?e.connect():(e.connectionStatus="closed",e.transport.connect())))}));this.requestTransportCallback=t,this.connectionStatus="connecting";try{this.channelTransportProvider(this.requestTransportCallback)}catch(n){this.close({closeCode:He.ERROR,reason:"Transport provider error",error:n,persistQueue:!0})}},t.prototype.handleClose=function(e){this.close({closeCode:He.ERROR,reason:null===e||void 0===e?void 0:e.message,error:e})},t.prototype.handleOpen=function(e){var t=e.reconnect;lt("handle open singal",t,this.connectionStatus),(t||"closed"===this.connectionStatus)&&(this.close({closeCode:He.CONNECTION_CLOSED,reason:"reconnecting"}),this.sendRegistrationEvent(t))},t.prototype.handleReady=function(){this.ready()},t.prototype.ready=function(e){void 0===e&&(e=!1),this.unlock(),this.onConnectionEstablished.dispatch({reconnect:e})},t.prototype.dispose=function(e,t){var n=this.connectionStatus;this.disposeTransport(),this.connectionStatus=n,this.close({closeCode:e,reason:t})},ct([_e.bind],t.prototype,"handleClose",null),ct([_e.bind],t.prototype,"handleOpen",null),ct([_e.bind],t.prototype,"handleReady",null),t}(st),dt=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ft=function(){function e(e){void 0===e&&(e=!1),this.manualOpen=e,this.onMessage=new k,this.onClose=new k,this.onOpen=new k,this.connectionStatus="closed",this.connectionCount=0,this.queue=new V(!0)}return e.prototype.send=function(e,t){var n=this;this.queue.push(new U((function(){n.sendBypass(e,t)})))},e.prototype.ping=function(){this.sendBypass(We)},e.prototype.pong=function(){this.sendBypass(Ze)},e.prototype.close=function(e){"closed"!==this.connectionStatus&&(this.connectionStatus="closed",this.queue.cancel(void 0,null===e||void 0===e?void 0:e.message),this.queue.lock(),this.onClose.dispatch(e))},e.prototype.handleOpen=function(){var e="opened"===this.connectionStatus;e||(this.connectionStatus="opened"),this.connectionCount++,this.onOpen.dispatch({reconnect:this.connectionCount>1}),e||this.queue.unlock()},e.prototype.handleMessage=function(e){if(this.validateMessage(e)){if(L(e.data))switch(e.data){case We:return this.pong(),void(this.manualOpen||this.handleOpen());case Ze:return void(this.manualOpen||"connecting"!==this.connectionStatus||this.handleOpen())}"opened"===this.connectionStatus&&this.onMessage.dispatch(e)}},dt([_e.bind],e.prototype,"handleMessage",null),e}(),ht=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vt=function(e){function t(t,n){var r=e.call(this)||this;return r.childWindow=t,r.targetOrigin=n,t.parent.addEventListener("message",r.handleMessage),r}return ht(t,e),t.prototype.connect=function(){this.connectionStatus="connecting",this.ping()},t.prototype.sendBypass=function(e,t){var n;null===(n=this.childWindow)||void 0===n||n.postMessage(e,this.targetOrigin,t)},t.prototype.validateMessage=function(e){return e.source===this.childWindow&&E(e.origin,[this.targetOrigin])},t.prototype.dispose=function(){var e;null===(e=this.childWindow)||void 0===e||e.parent.removeEventListener("message",this.handleMessage),this.childWindow=void 0,this.close()},t.prototype.closed=function(){var e;return Boolean(null===(e=this.childWindow)||void 0===e?void 0:e.closed)},t}(ft),yt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),bt=function(e){function t(t,n,r,o){var i=e.call(this,!1)||this;return i.childWindow=t,i.currentWindow=n,i.targetOrigin=r,i.allowedOrigins=o,i.currentWindow.addEventListener("message",i.handleMessage),i}return yt(t,e),t.prototype.connect=function(){this.connectionStatus="connecting",this.ping()},t.prototype.sendBypass=function(e,t){var n;null===(n=this.childWindow)||void 0===n||n.postMessage(e,this.targetOrigin,t)},t.prototype.validateMessage=function(e){return E(e.origin,this.allowedOrigins)},t.prototype.dispose=function(){this.currentWindow.removeEventListener("message",this.handleMessage),this.childWindow=void 0,this.currentWindow=void 0,this.close()},t.prototype.closed=function(){return Boolean(this.childWindow.closed)},t}(ft),gt={},mt={},wt=q&&q.__assign||function(){return wt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},wt.apply(this,arguments)};Object.defineProperty(mt,"__esModule",{value:!0}),mt.getSettings=mt.updateSettings=void 0;var Ot={clck:"https://yandex.ru/clck/click",project:"unknown",additional:{},level:"error"};mt.updateSettings=function(e){Ot=wt(wt({},Ot),e)};mt.getSettings=function(){return Ot};var _t={},Ct={};Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.send=void 0;var Et=mt;Ct.send=function(e,t){var n=function(e,t){return["/path="+e,t?"/vars="+t:"","/cts="+(new Date).getTime(),"/*"]}(e,t).join(""),r=Et.getSettings().clck;if(r&&!(navigator&&navigator.sendBeacon&&navigator.sendBeacon(r,n)))if("undefined"!==typeof window&&window.fetch)fetch(r,{method:"POST",body:n});else{var o=new XMLHttpRequest;o.open("POST",r),o.send(n)}},function(e){var t=q&&q.__assign||function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},t.apply(this,arguments)},n=q&&q.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.handleError=e.sendError=e.baseNormalizeError=void 0;var r=Ct,o=mt;e.baseNormalizeError=function(e){void 0===e&&(e={});var t=e.filename||e.fileName||"",n=e.error&&e.error.stack||e.stack||"",r=e.message||"";return{file:t,line:e.lineno||e.lineNumber,col:e.colno||e.colNumber,stack:n,message:r,additional:e.additional,referrer:"undefined"!==typeof location&&location.href}};function i(e){for(var t,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];"undefined"!==typeof console&&(t=console.error).call.apply(t,n([console,e],r))}e.sendError=function(e,t){void 0===t&&(t={});var n=o.getSettings(),a={"-url":e.file,"-line":e.line,"-col":e.col,"-stack":e.stack,"-env":n.env,"-msg":e.message,"-project":n.project,"-page":e.page||n.page,"-level":e.level,"-version":n.version,"-referrer":e.referrer,"-additional":t.additional,"-ua":"undefined"!==typeof navigator&&navigator.userAgent,"-ts":+new Date};n.debug&&i("[error-counter]",a),r.send(e.path,function(e){var t=[];return Object.keys(e).map((function(n){if(e.hasOwnProperty(n)&&(e[n]||0===e[n])){var r=encodeURIComponent(e[n]).replace(/\*/g,"%2A");t.push(n+"="+r)}})),t.join(",")}(a))};e.handleError=function(n){var r=o.getSettings();n.path="690.2354";var a="";try{a=JSON.stringify(t(t({},r.additional),n.additional))}catch(s){i("[error-counter] json.stringify:",s)}e.sendError(n,{additional:a})}}(_t);var jt={};Object.defineProperty(jt,"__esModule",{value:!0}),jt.logError=void 0;var Pt=_t,xt=["type","additional","level","referrer"];jt.logError=function(e,t){void 0===t&&(t={});var n=Pt.baseNormalizeError(e);n.message=[t.message,n.message].filter(Boolean).join("; ")||"Empty error";for(var r=0;r<xt.length;r++){var o=xt[r];t[o]?n[o]=t[o]:e&&e[o]&&(n[o]=e[o])}Pt.handleError(n)},function(e){var t=q&&q.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=q&&q.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(mt,e),n(_t,e),n(jt,e)}(gt);var kt={},It={};Object.defineProperty(It,"__esModule",{value:!0}),It.attachRef=void 0,It.attachRef=function(e){return function(t,n){Object.defineProperty(t,n,{configurable:!0,get:function(){var t=this,r=function(n){r.current=n;var o=t.props[e];o&&("function"===typeof o?o(n):"object"===typeof o&&(o.current=n))};return r.current=null,Object.defineProperty(this,n,{configurable:!0,value:r}),r}})}};var Tt={};Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.bind=void 0,Tt.bind=function(e,t,n){if("function"===typeof e)throw new TypeError("Cannot bind static method "+t);var r=n.value,o=!1;return{configurable:!0,get:function(){if(o)return r;var e=r.bind(this);return o=!0,Object.defineProperty(this,t,{configurable:!0,get:function(){return e}}),o=!1,e}}},function(e){var t=q&&q.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=q&&q.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(It,e),n(Tt,e)}(kt);var Lt={},St={},Mt={};Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.createHandler=Mt.ErrorVisitor=void 0;var Rt=function(e,t){this.error=e,this.callback=t};Mt.ErrorVisitor=Rt,Mt.createHandler=function(e,t){return Object.keys(e).reduce((function(e,n){return e[n]=function(e){return t(e,n)},e}),{})};var qt=q&&q.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(St,"__esModule",{value:!0}),St.BaseError=void 0;var Nt=Mt,At=function(e){function t(n,r){var o=e.call(this,n)||this;return r&&(o.stack=r),Object.setPrototypeOf(o,t.prototype),o}return qt(t,e),t.handle=function(e){return new Nt.ErrorVisitor(this,e)},t.is=function(e){return e instanceof this},t.prototype.accept=function(e){this instanceof e.error&&e.callback(this)},t}(Error);St.BaseError=At;var Bt={},zt=q&&q.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.LoggableError=void 0;var Ft=function(e){function t(n,r,o){var i=e.call(this,n)||this;return i.loggerFields=r,i.additional=r&&r.additional,o&&(i.stack=o),Object.setPrototypeOf(i,t.prototype),i}return zt(t,e),t}(St.BaseError);Bt.LoggableError=Ft;var Vt={},Ut=q&&q.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.serializeId=Vt.SerializableError=void 0;var Dt=function(e){function t(n,r){var o=e.call(this,n,r)||this;return Object.setPrototypeOf(o,t.prototype),o}return Ut(t,e),t.makeSerializable=function(e){this.cache.set(e.SERIALIZE_ID,e)},t.serialize=function(e){return e.serialize()},t.deserialize=function(e){if(e.serializeId===t.SERIALIZE_ID)return new t(e.message);var n=this.cache.get(e.serializeId);return n?new n(e.message):new Error(e.message)},t.prototype.serialize=function(){return{serializeId:this.constructor.SERIALIZE_ID,message:this.message}},t.SERIALIZE_ID="@SerializableError",t.cache=new Map,t}(St.BaseError);Vt.SerializableError=Dt,Vt.serializeId=function(e){return function(t){t.SERIALIZE_ID=e,Dt.makeSerializable(t)}};var Ht={},Wt=q&&q.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(Ht,"__esModule",{value:!0}),Ht.TransportError=void 0;var Zt=function(e){function t(n,r){var o=e.call(this,"TransportError, "+n,r)||this;return Object.setPrototypeOf(o,t.prototype),o}return Wt(t,e),t}(St.BaseError);Ht.TransportError=Zt;var Gt={},Yt=q&&q.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.RequestTimeoutError=void 0;var Xt=function(e){function t(n){var r=e.call(this,"Request timeout",n)||this;return Object.setPrototypeOf(r,t.prototype),r}return Yt(t,e),t}(Ht.TransportError);Gt.RequestTimeoutError=Xt,function(e){var t=q&&q.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=q&&q.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.LoggableError=e.ErrorVisitor=e.createHandler=e.BaseError=void 0;var r=St;Object.defineProperty(e,"BaseError",{enumerable:!0,get:function(){return r.BaseError}});var o=Mt;Object.defineProperty(e,"createHandler",{enumerable:!0,get:function(){return o.createHandler}}),Object.defineProperty(e,"ErrorVisitor",{enumerable:!0,get:function(){return o.ErrorVisitor}});var i=Bt;Object.defineProperty(e,"LoggableError",{enumerable:!0,get:function(){return i.LoggableError}}),n(Vt,e),n(Ht,e),n(Gt,e)}(Lt);var Jt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Kt=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Qt=function(e){function t(t){var r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}var n;return Jt(t,e),n=t,t=n=Kt([Lt.serializeId("RequestCanceledError")],t)}(Lt.SerializableError),$t=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),en=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},tn=function(e){function t(t){var r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}var n;return $t(t,e),n=t,t=n=en([Lt.serializeId("CookieNeededError")],t)}(Lt.SerializableError);gt.updateSettings({project:"messenger-widget-npm",version:"1.22.0",env:"production"});var nn="__logged__";var rn=function(e,t){if(e instanceof Error){if((n=e)&&!0===n.__logged__)return;Object.defineProperty(e,nn,{value:!0,enumerable:!1,configurable:!1})}var n;gt.logError(e,t)},on=function(e){for(var t=function(e){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this;try{r=e.apply(this,t)||this}catch(o){throw rn(o),o}return r}return l(t,e),t}(e),n=function(n){if(!e.prototype.hasOwnProperty(n))return"continue";Object.defineProperty(t.prototype,n,{get:function(){var t=this,r=Object.getOwnPropertyDescriptor(e.prototype,n),o=r.get?r.get.call(t):r.value;if("function"!==typeof o)return o;function i(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{var r=o.apply(t,e);return I(r)&&"function"===typeof r.catch&&r.catch(rn),r}catch(i){throw rn(i),i}}return Object.defineProperty(this,n,{value:i}),i},configurable:!0})},r=0,o=Object.keys(e.prototype);r<o.length;r++){n(o[r])}return t};function an(){return Math.random().toString(36).substring(7)}var sn="undefined"!==typeof document,un="undefined"!==typeof window,cn="undefined"!=typeof navigator,ln="undefined"!=typeof screen;function pn(){return un&&window.location?window.location.href:""}function dn(){return sn?document.referrer:""}function fn(e,t){return(e||"").slice(0,t)}function hn(){return Math.floor(1e6*Math.random())}function vn(e,t,n){(n||0===n)&&e.push(t+":"+(!0===n?"1":n))}function yn(e,t){var n=[];return e&&Object.keys(e).forEach((function(t){return vn(n,t,e[t])})),vn(n,"rn",hn()),vn(n,"c",!!cn&&navigator.cookieEnabled),vn(n,"s",ln?[screen.width,screen.height,screen.colorDepth].join("x"):""),vn(n,"en",sn&&"string"===typeof document.charset?document.charset.toLowerCase():""),vn(n,"t",fn(t,512)),n.join(":")}function bn(e){return fn(e,1024)}function gn(e,t){var n,r="https://mc.yandex.ru/watch/"+e+"?"+(n=t,Object.keys(n).filter((function(e){var t=n[e];return""!==t&&void 0!==t&&null!==t})).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])})).join("&"));"undefined"!==typeof navigator&&navigator.sendBeacon?navigator.sendBeacon(r," "):"undefined"!==typeof fetch?fetch(r,{credentials:"include"}):"undefined"!==typeof Image&&((new Image).src=r)}function mn(e){var t=e.browserInfo,n=e.counterId,r=e.pageParams,o=e.userVars,i={"browser-info":yn(t,r.title),rn:hn(),ut:r.ut};r.url&&(i["page-url"]=bn(r.url)),r.referrer&&(i["page-ref"]=bn(r.referrer)),o&&(i["site-info"]=JSON.stringify(o)),gn(n,i)}function wn(e,t,n){mn({counterId:e,pageParams:{referrer:t&&void 0!==t.referrer?t.referrer:dn(),title:t&&void 0!==t.title?t.title:sn?document.title:"",url:t&&void 0!==t.url?t.url:pn()},userVars:n})}function On(e,t,n){var r,o;t?(r=pn(),o="goal://"+(un&&window.location?window.location.hostname:"")+"/"+t):(r=dn(),o=pn()),mn({counterId:e,pageParams:{referrer:r,url:o},userVars:n})}var _n="52122583";function Cn(e,t){On(_n,e,t)}var En=function(){function e(){this.queue=new V(!0)}return e.prototype.init=function(){window.navigator.onLine&&this.queue.unlock(),window.addEventListener("online",this.handleOnline),window.addEventListener("offline",this.handleOffline)},e.prototype.handleOnline=function(){this.queue.unlock()},e.prototype.handleOffline=function(){this.queue.lock()},e.prototype.run=function(e,t){this.queue.push(e,t)},e.prototype.destroy=function(){window.removeEventListener("online",this.handleOnline),window.removeEventListener("offline",this.handleOffline),this.queue.cancel()},d([kt.bind],e.prototype,"handleOnline",null),d([kt.bind],e.prototype,"handleOffline",null),e}(),jn=function(){function e(e,t){this.data=e,this.defaultPrevented=!1,this.preventable=!1,this.preventable=Boolean(null===t||void 0===t?void 0:t.preventable)}return e.prototype.preventDefault=function(e){this.preventable&&(this.resolvedWith=e,this.defaultPrevented=!0)},e}();var Pn=function(){function e(e,t,n,r,o){this.widgetId=e,this.channelTransportFactory=t,this.initParams=n,this.events=r,this.handlers=o,this.onReloaded=new k,this.onClose=new k}return Object.defineProperty(e.prototype,"channel",{get:function(){return this.channelInstance||(this.channelInstance=function(e,t,n){var r;return new pt(e,t,{scope:(r={},r.widgetTransport=n,r),connectTimeout:15e3})}(this.widgetId,this.channelTransportFactory,this.initParams),this.channelInstance.onClose.addListener(this.handleClose),this.channelInstance.onConnectionEstablished.addListener(this.handleConnectionEstablished),this.channelInstance.onEvent.addListener(this.handleEvent),this.channelInstance.onRequest.addListener(this.handleRequest)),this.channelInstance},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){var e,t,n,r;null===(e=this.channelInstance)||void 0===e||e.onClose.removeListener(this.handleClose),null===(t=this.channelInstance)||void 0===t||t.onEvent.removeListener(this.handleEvent),null===(n=this.channelInstance)||void 0===n||n.onRequest.removeListener(this.handleRequest),null===(r=this.channelInstance)||void 0===r||r.dispose(),this.channelInstance=void 0},e.prototype.isConnectionClosed=function(){return!this.channelInstance||"closed"===this.channelInstance.connectionStatus},e.prototype.handleConnectionEstablished=function(e){e.reconnect&&this.onReloaded.dispatch()},e.prototype.handleClose=function(e){var t,n=e.closeCode===He.ERROR;n&&(null===(t=this.channelInstance)||void 0===t||t.disposeTransport()),this.onClose.dispatch({isCriticalError:n,error:e.closeError})},e.prototype.handleEvent=function(e){var t;null===(t=this.events[e.type])||void 0===t||t.dispatch(new jn(e.data))},e.prototype.handleRequest=function(e){var t=this.handlers[e.type];t&&t.hasListeners()?t.dispatch(e):e.reject(new tt("not_supported"))},d([kt.bind],e.prototype,"handleConnectionEstablished",null),d([kt.bind],e.prototype,"handleClose",null),d([kt.bind],e.prototype,"handleEvent",null),d([kt.bind],e.prototype,"handleRequest",null),e}();function xn(e){var t=document.createElement("iframe");return t.setAttribute("scrolling","no"),t.src=e.url,e.className&&(t.className=e.className),e.allow&&t.setAttribute("allow",e.allow.join("; ")),t}function kn(){return an()}var In=["ready","close","chatChange","chatLeave","error","locationChange","members","unload","messageSent","catchUrlClick","userNeedReAssign","userLoaded","chatHistoryLoaded","chatListLoaded","chatLoadError","fullscreenOn","fullscreenOff","counter","unreadCountersByChats","channelSubscribed","channelUnsubscribed","authRequest","sendMessage"];function Tn(e){return function(t,n,r){var o=r.value;return{value:function(t){var n=new jn({type:e,params:t},{preventable:!0});return this.dispatchLC("LCBeforeRequest",n),n.defaultPrevented?Promise.resolve().then((function(){return n.resolvedWith})):o.call(this,t)}}}}var Ln=function(){function e(e,t){this.getTransport=e,this.dispatchLC=t}return e.prototype.iframeOpen=function(e){return this.getTransport().channel.request("iframeOpen",e,{cancelPreviousRequestsWithSameType:!0})},e.prototype.serviceMeta=function(e){return this.getTransport().channel.request("serviceMeta",e)},e.prototype.pasteMessage=function(e){return this.getTransport().channel.request("pasteMessage",e)},e.prototype.setVisibility=function(e){return this.getTransport().channel.request("setVisibility",e,{cancelPreviousRequestsWithSameType:!0})},e.prototype.setThemeVariables=function(e){return this.getTransport().channel.request("setThemeVariables",e,{cancelPreviousRequestsWithSameType:!0})},e.prototype.chatMetadata=function(e){return this.getTransport().channel.request("chatMetadata",e)},e.prototype.actions=function(e){return this.getTransport().channel.request("actions",e)},e.prototype.requestCallback=function(e){return this.getTransport().channel.request("requestCallback",e)},e.prototype.sendTextMessage=function(e){return this.getTransport().channel.request("sendTextMessage",e)},e.prototype.sendImage=function(e){return this.getTransport().channel.request("sendImage",e)},e.prototype.sendBotRequest=function(e){return this.getTransport().channel.request("sendBotRequest",e)},e.prototype.isChatCreated=function(e){return this.getTransport().channel.request("isChatCreated",e)},d([Tn("iframeOpen")],e.prototype,"iframeOpen",null),d([Tn("serviceMeta")],e.prototype,"serviceMeta",null),d([Tn("pasteMessage")],e.prototype,"pasteMessage",null),d([Tn("setVisibility")],e.prototype,"setVisibility",null),d([Tn("setThemeVariables")],e.prototype,"setThemeVariables",null),d([Tn("chatMetadata")],e.prototype,"chatMetadata",null),d([Tn("actions")],e.prototype,"actions",null),d([Tn("requestCallback")],e.prototype,"requestCallback",null),d([Tn("sendTextMessage")],e.prototype,"sendTextMessage",null),d([Tn("sendImage")],e.prototype,"sendImage",null),d([Tn("sendBotRequest")],e.prototype,"sendBotRequest",null),d([Tn("isChatCreated")],e.prototype,"isChatCreated",null),e}(),Sn=function(){function e(e){this.api=e}return e.prototype.serviceMeta=function(e){return this.api.serviceMeta(e)},e.prototype.pasteMessage=function(e){return this.api.pasteMessage(e)},e.prototype.setVisibility=function(e){return this.api.setVisibility(e)},e.prototype.setThemeVariables=function(e){return this.api.setThemeVariables(e)},e.prototype.chatMetadata=function(e){return this.api.chatMetadata(e)},e}(),Mn=function(){this.getLog=new k,this.getEnv=new k,this.uiInterceptor=new k};st.CancelError=Qt;var Rn=Symbol("API");var qn=function(){function e(e){var n,r,o=this;this.config=e,this.version="1.22.0",this.widgetId="msngr_widget_"+an(),this.plugins=[],this.forceSendOpenIframe=!0,this.onlineEnsurer=new En,this[t]=new Ln((function(){return o.transport}),(function(e,t){return o.dispatchLC(e,t)})),this.api=new Sn(this[Rn]),this.handlers=new Mn,this.events=Object.defineProperties({},In.reduce((function(e,t){return e[t]={get:function(){var e=new k;return Object.defineProperty(this,t,{value:e}),e},configurable:!0},e}),{})),gt.updateSettings({service:""+this.options.serviceId,additional:p(p({},gt.getSettings().additional),{workspaceId:""+this.options.workspaceId,orgId:""+this.options.orgId})}),n=void 0,r={serviceId:""+this.options.serviceId,workspaceId:""+this.options.workspaceId,orgId:""+this.options.orgId,version:this.version,stat:"object"===typeof this.options.stat?this.options.stat:void 0,visitId:this.widgetId},wn(_n,n,r),this.lastShowData=this.options.iframeOpenData,this.events.ready.addListener((function(){o.dispatchLC("LCReady",new jn)})),this.events.close.addListener((function(){o.dispatchLC("LCHidden",new jn)}))}var t;return e.prototype.init=function(){var e=this,t=this.options;return function(e){if(!R(e.serviceId))throw new Error("serviceId is required")}(t),this.plugins.forEach((function(n){n.init(t,e)})),this.onlineEnsurer.init(),this},e.prototype.show=function(e,t){void 0===t&&(t=P);var n=new jn(e,{preventable:!0});if(this.dispatchLC("LCBeforeShow",n),n.defaultPrevented)t();else{var r=kn();if(e||this.forceSendOpenIframe){this.forceSendOpenIframe=!1;var o=e||this.lastShowData;this.lastShowData=o,this[Rn].iframeOpen(p(p({},o),{visitId:this.widgetId,eventTimestamp:Date.now(),clickId:r,visible:!0})).then(t,t)}else this.api.setVisibility({visible:!0}).catch(P),t();Cn("widget-opened",{clickId:r}),this.dispatchLC("LCShown",new jn)}},e.prototype.hide=function(){var e=new jn(void 0,{preventable:!0});(this.dispatchLC("LCBeforeHide",e),e.defaultPrevented)||(this.transport.isConnectionClosed()||this.api.setVisibility({visible:!1}).catch(P),Cn("widget-closed",{clickId:kn()}),this.dispatchLC("LCHidden",new jn))},e.prototype.preload=function(){this.transport.channel.connect()},e.prototype.setUI=function(e){return this.uiPlugin=e,this.addPlugin(e)},e.prototype.addPlugin=function(e){return this.plugins.push(e),this},e.prototype.destroy=function(){var e,t;null===(e=this.transportInstance)||void 0===e||e.onClose.removeListener(this.handleErrorConnect),null===(t=this.transportInstance)||void 0===t||t.destroy(),this.transportInstance=void 0,this.onlineEnsurer.destroy(),this.dispatchLC("LCClose",new jn)},Object.defineProperty(e.prototype,"options",{get:function(){return this.config.values},enumerable:!1,configurable:!0}),e.prototype.dispatchLC=function(e,t){for(var n=0,r=this.plugins;n<r.length;n++){var o=r[n];"function"===typeof o[e]&&o[e](t)}return t},e.prototype.getIframeUrl=function(e){return this.config.getMessengerUrl(this.widgetId,2,p({utm_source:"widget",utm_medium:"iframe"},e))},e.prototype.handleErrorConnect=function(e){this.forceSendOpenIframe=!0,e.isCriticalError&&this.dispatchLC("LCErrorCritical",new jn({error:e.error||new Error("Connection Terminated")}))},Object.defineProperty(e.prototype,"transport",{get:function(){var e=this;return this.transportInstance||(this.transportInstance=new Pn(this.widgetId,(function(t){e.onlineEnsurer.run(new U((function(){if(!e.uiPlugin)throw new Error("UI plugin was not initialized");e.uiPlugin.getChildWindowTransport({urlProvider:function(){return e.getIframeUrl()},allow:e.options.allow},t)}),{tag:"childWindowProvider"}),{tag:"childWindowProvider"})}),{authToken:this.options.authToken,themeVariables:this.options.themeVariables},this.events,this.handlers),this.transportInstance.onClose.addListener(this.handleErrorConnect)),this.transportInstance},enumerable:!1,configurable:!0}),t=Rn,d([kt.bind],e.prototype,"handleErrorConnect",null),e=d([on],e)}();function Nn(e){return function(t,n){var r=Nn.prefix+e;"string"===typeof t&&(r+="__"+t);var o=[r],i={};return"object"===typeof t?i=t:"object"===typeof n&&(i=n),function(e){return Object.keys(e).filter((function(t){var n=e[t];return n||0===n})).map((function(t){var n=t.trim(),r=e[t];return!0===r?"_"+n:"_"+n+"_"+r}))}(i).forEach((function(e){o.push(r+e)})),o.join(" ")}}function An(e,t,n){return Nn(e)(t,n).split(" ").pop()||""}Nn.prefix="ya-chat-";var Bn={ru:{close:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c","error-title":"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0447\u0430\u0442","error-try-again":"\u041f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0435\u0449\u0451 \u0440\u0430\u0437","button-text-default":"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u043d\u0430\u043c!","cookie-blocked-text":"\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e \u0434\u043e\u0441\u0442\u0443\u043f\u043e\u0432 \u043a cookie \u043d\u0435\u0442.","new-window-button":"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u043f\u0435\u0440\u0435\u0445\u043e\u0434 \u043d\u0430 \u043d\u043e\u0432\u0443\u044e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443","support-unread-text":"\u0412\u0441\u0435 \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f","support-unread-text-count":["\u0415\u0449\u0435 {value} \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0435","\u0415\u0449\u0435 {value} \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f","\u0415\u0449\u0435 {value} \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0439"]},en:{close:"Close","error-title":"Failed to load chat","error-try-again":"Try again","button-text-default":"Write to us!","cookie-blocked-text":"Unfortunately, there is no access to cookies.","new-window-button":"Confirm the transition to a new page","support-unread-text":"All requests","support-unread-text-count":["{value} more request","{value} more requests","{value} more requests"]},fr:{close:"Fermer","error-title":"Impossible de charger le chat","error-try-again":"R\xe9essayer","button-text-default":"Write to us!","cookie-blocked-text":"Unfortunately, there is no access to cookies.","new-window-button":"Confirm the transition to a new page","support-unread-text":"All requests","support-unread-count":["{value} more request","{value} more requests","{value} more requests"]},hy:{close:"\u0553\u0561\u056f\u0565\u056c","error-title":"\u0549\u0570\u0561\u057b\u0578\u0572\u057e\u0565\u0581 \u0562\u0565\u057c\u0576\u0565\u056c \u0579\u0561\u0569\u0568","error-try-again":"\u053f\u0580\u056f\u056b\u0576 \u0583\u0578\u0580\u0571\u0565\u056c","button-text-default":"Write to us!","cookie-blocked-text":"Unfortunately, there is no access to cookies.","new-window-button":"Confirm the transition to a new page","support-unread-text":"All requests","support-unread-text-count":["{value} more request","{value} more requests","{value} more requests"]},kk:{close:"\u0416\u0430\u0431\u0443","error-title":"\u0427\u0430\u0442\u0442\u044b \u0436\u04af\u043a\u0442\u0435\u0443 \u043c\u04af\u043c\u043a\u0456\u043d \u0435\u043c\u0435\u0441","error-try-again":"\u0422\u0430\u0493\u044b \u0431\u0456\u0440 \u0440\u0435\u0442 \u043a\u04e9\u0440\u0456\u04a3\u0456\u0437","button-text-default":"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u043d\u0430\u043c!","cookie-blocked-text":"\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e \u0434\u043e\u0441\u0442\u0443\u043f\u043e\u0432 \u043a cookie \u043d\u0435\u0442.","new-window-button":"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u043f\u0435\u0440\u0435\u0445\u043e\u0434 \u043d\u0430 \u043d\u043e\u0432\u0443\u044e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443","support-unread-text":"\u0412\u0441\u0435 \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f","support-unread-text-count":["\u0415\u0449\u0435 {value} \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0435","\u0415\u0449\u0435 {value} \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f","\u0415\u0449\u0435 {value} \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0439"]},sr:{close:"Zatvori","error-title":"U\u010ditavanje \u0107askanja nije uspelo","error-try-again":"Poku\u0161ajte jo\u0161 jednom","button-text-default":"Write to us!","cookie-blocked-text":"Unfortunately, there is no access to cookies.","new-window-button":"Confirm the transition to a new page","support-unread-text":"All requests","support-unread-text-count":["{value} more request","{value} more requests","{value} more requests"]},tr:{close:"Kapat","error-title":"Sohbet y\xfcklenemedi","error-try-again":"Tekrar dene","button-text-default":"Write to us!","cookie-blocked-text":"Unfortunately, there is no access to cookies.","new-window-button":"Confirm the transition to a new page","support-unread-text":"All requests","support-unread-text-count":["{value} more request","{value} more requests","{value} more requests"]},uz:{close:"Yopish","error-title":"Chatni yuklash imkoni bo\u02bblmadi","error-try-again":"Qayta urinish","button-text-default":"Write to us!","cookie-blocked-text":"Unfortunately, there is no access to cookies.","new-window-button":"Confirm the transition to a new page","support-unread-text":"All requests","support-unread-text-count":["{value} more request","{value} more requests","{value} more requests"]},he:{close:"\u05e1\u05d2\u05d5\u05e8","error-title":"\u05d8\u05e2\u05d9\u05e0\u05ea \u05e6'\u05d0\u05d8 \u05e0\u05db\u05e9\u05dc\u05d4","error-try-again":"\u05e0\u05e1\u05d4 \u05e9\u05e0\u05d9\u05ea","button-text-default":"Write to us!","cookie-blocked-text":"Unfortunately, there is no access to cookies.","new-window-button":"Confirm the transition to a new page","support-unread-text":"All requests","support-unread-text-count":["{value} more request","{value} more requests","{value} more requests"]}},zn={ru:function(e,t){var n=Math.abs(t)%100;return n>=5&&n<=20?e[2]:1===(n%=10)?e[0]:n>=2&&n<=4?e[1]:e[2]},en:function(e,t){return 1===t?e[0]:e[1]}};function Fn(e,t,n){var r=(Bn[t]||{})[e]||"";return Array.isArray(r)?function(e,t,n){var r=zn[t];if(r){var o=n;return"string"===typeof n&&(o=Number.parseInt(n),Number.isNaN(o))?e[0]:r(e,o).replace("{value}",n)}return e[0]}(r,t,n):r}var Vn=Nn("error");var Un=Nn("loader");var Dn=/^data-/,Hn=/-(.)/g;var Wn=function(){function e(e){this.context=e,this.refId="widget_ref"+an(),this.detached=!1,this.listeners={},this.childrens=new Map,this.effects=[],this.subscriptions=[]}return Object.defineProperty(e.prototype,"id",{get:function(){return'id="'+this.refId+'"'},enumerable:!1,configurable:!0}),e.prototype.useClassName=function(e,t,n){var r=this;return this.subscribe((function(t,n){r.node?r.node.className=e(t,n):r.className=e(t,n)}),t,n),e(this.context.props,null===n||void 0===n?void 0:n.value)},e.prototype.useStyle=function(e,t,n){var r=this;this.subscribe((function(t,n){if(r.node){var o=e(t,n);Object.keys(o).forEach((function(e){I(o[e])?r.node.style.setProperty(e,o[e],"important"):r.node.style[e]=""}))}else r.style=e(t,n)}),t,n);var o=e(this.context.props,null===n||void 0===n?void 0:n.value);return Object.keys(o).map((function(e){if(I(o[e]))return e.replace(/([a-z])([A-Z])/g,(function(e,t,n){return t+"-"+n.toLowerCase()}))+": "+o[e]})).filter(I).join(";")},e.prototype.useText=function(e,t,n){var r=this;return this.subscribe((function(t,n){r.node?r.node.innerText=e(t,n):r.innerText=e(t,n)}),t,n),e(this.context.props,null===n||void 0===n?void 0:n.value)},e.prototype.useChildren=function(e,t,n){var r=this,o=an();return this.childrens.set(o,{provider:e,node:void 0}),this.subscribe((function(t,n){var i=r.childrens.get(o);i.node&&y(i.node);var a=e(t,n);a&&(i.node=a,r.node.appendChild(a))}),t,n),""},e.prototype.useEffect=function(e,t,n){var r={id:an(),provider:e,result:void 0};this.effects.push(r),this.subscribe((function(t,n){r.result&&r.result(),r.result=e(t,n)}),t,n)},e.prototype.on=function(e,t){this.node&&this.listeners[e]&&this.node.removeEventListener(e,this.listeners[e]),this.listeners[e]=t,this.node&&this.node.addEventListener(e,t)},e.prototype.mount=function(){var e=document.getElementById(this.refId);if(!e)throw new Error("Attribute data-ref should be non empty string");var t=function(e){if(e.dataset)return e.dataset;for(var t=e.attributes,n={},r=0;r<t.length;r++){var o=t[r];o&&o.name.match(Dn)&&(n[o.name.slice(5).replace(Hn,(function(e,t){return t.toUpperCase()}))]=o.value)}return n}(e).attachTo;"body"===t&&(this.detached=!0,document.body.appendChild(e)),this.setNode(e)},e.prototype.setNode=function(e){var t=this;this.node=e,this.className&&(this.node.className=this.className),this.innerText&&(this.node.innerText=this.innerText),this.style&&Object.keys(this.style).forEach((function(e){t.node.style.setProperty(e,t.style[e],"important")})),this.childrens.forEach((function(e){var n=e.provider(t.context.props);n&&t.node.appendChild(n)})),Object.keys(this.listeners).forEach((function(n){e.addEventListener(n,t.listeners[n])})),this.effects.forEach((function(e){e.result=e.provider(t.context.props,void 0)}))},e.prototype.subscribe=function(e,t,n){var r=this,o=function(r){var o=r.prevValue,i=r.value;t.some((function(e){return o[e]!==i[e]}))&&e(i,null===n||void 0===n?void 0:n.value)};if(this.context.onPropsChanged.addListener(o),this.subscriptions.push((function(){r.context.onPropsChanged.removeListener(o)})),n){var i=function(t){e(r.context.props,t.value)};null===n||void 0===n||n.onChange.addListener(i),this.subscriptions.push((function(){n.onChange.removeListener(i)}))}},e.prototype.getNode=function(){return this.node},e.prototype.remove=function(){var e=this;this.subscriptions.forEach((function(e){return e()})),this.subscriptions=void 0,this.effects.forEach((function(e){var t;null===(t=e.result)||void 0===t||t.call(e)})),this.node&&(Object.keys(this.listeners).forEach((function(t){e.node.removeEventListener(t,e.listeners[t])})),this.detached&&y(this.node)),this.listeners=void 0,this.node=void 0,this.effects=void 0},e}(),Zn=function(){function e(e,t){this.getter=e,this.onChange=t}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getter()},enumerable:!1,configurable:!0}),e}(),Gn=function(){function e(e,t){this.id=e,this.value=t,this.onChange=new k}return e.prototype.setState=function(e){var t=this.value;(function(e,t){if(e===t)return!0;if("object"===typeof e&&"object"===typeof t){for(var n in e)if(e[n]!==t[n])return!1;return!0}return!1})(e,this.value)||(this.value=p(p({},t),e),this.onChange.dispatch({value:this.value,prevValue:t}))},e.prototype.getValueProvider=function(){var e=this;return[new Zn((function(){return e.value}),this.onChange),function(t){e.setState(t(e.value))}]},e.prototype.destroy=function(){this.value=void 0,this.onChange.removeAllListener()},e}(),Yn=function(){function e(e){this.refs=new Map,this.states=new Set,this.children=[],this._props=new Gn(an(),e)}return Object.defineProperty(e.prototype,"props",{get:function(){return this._props.value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onPropsChanged",{get:function(){return this._props.onChange},enumerable:!1,configurable:!0}),e.prototype.getRef=function(e){return this.refs[e]},e.prototype.pipe=function(t){var n=new e(t(this.props));return this.onPropsChanged.addListener((function(e){var r=e.value;n.setProps(t(r))})),this.children.push(n),n},e.prototype.useState=function(e){var t=new Gn(an(),e);return this.states.add(t),t.getValueProvider()},e.prototype.setProps=function(e){this._props.setState(e)},e.prototype.useRef=function(){var e=new Wn(this);return this.refs.set(e.refId,e),e},e.prototype.mount=function(e){this.fragments=e,this.refs.forEach((function(e){e.mount()})),this.children.forEach((function(e){e.mount()}))},e.prototype.destroy=function(){if(this.refs.forEach((function(e){e.remove()})),this.refs.clear(),this.onPropsChanged.removeAllListener(),this.children.forEach((function(e){e.destroy()})),this.children=[],this.states.forEach((function(e){e.destroy()})),this.states.clear(),this._props=void 0,this.fragments)for(var e=0;e<this.fragments.length;e++)y(this.fragments[e])},e}(),Xn=Nn("base");function Jn(e,t){var n=e.useRef(),r=function(e){var t=e.useRef();return"\n        <div\n            "+t.id+'\n            class="'+t.useClassName((function(e){var t=e.visible;return Un({visible:t})}),["visible"])+'">\n            <div class="'+Un("spinner")+'"></div>\n        </div>\n    '}(e.pipe((function(e){return{visible:"loader"===e.page}}))),o=function(e){var t=e.useRef(),n=e.useRef();n.on("click",e.props.onRetryErrorClick);var r=e.props.lang;return"\n        <div\n            "+t.id+'\n            class="'+t.useClassName((function(e){var t=e.visible;return Vn({visible:t})}),["visible"])+'"\n        >\n            <div class="'+Vn("title")+'">'+Fn("error-title",r)+"</div>\n            <div "+n.id+' class="'+Vn("button")+'">'+Fn("error-try-again",r)+"</div>\n        </div>\n    "}(e.pipe((function(e){return{visible:"error"===e.page,lang:e.lang,onRetryErrorClick:e.onRetry}})));return'\n        <div class="'+Xn()+'">\n            '+(I(t)?t:"")+"\n            <div\n                "+n.id+'\n                class="'+n.useClassName((function(e){return Xn("mount",{visible:"messenger"===e.page,fullscreen:e.fullscreen})}),["page","fullscreen"])+'"\n            >\n                '+n.useChildren((function(e){if(e.iframe)return e.iframe.className=Xn("iframe"),e.iframe}),["iframe"])+"\n            </div>\n            "+r+"\n            "+o+"\n        </div>\n    "}var Kn=function(){function e(e){this.template=e,this.ready=!1,this.destroyed=!1,this.initialized=!1}return e.prototype.render=function(e){if(!this.initialized)throw new Error("Widget should be initialized before mounting");!function(e,t,n){var r=document.createDocumentFragment(),o=document.createElement("div");o.innerHTML=e(t);var i=o.firstElementChild;if(!i)throw new Error("Bad template");var a=document.createComment("noindex"),s=document.createComment("noindex");r.appendChild(a),r.appendChild(i),r.appendChild(s),n.appendChild(r),t.mount([a,i,s])}(this.template,this.context,e)},e.prototype.init=function(e,t){var n;this.widget=t,t.events.fullscreenOn.addListener(this.handleFullscreenOn),t.events.fullscreenOff.addListener(this.handleFullscreenOff),this._context=new Yn(p({lang:this.options.lang||"ru",onRetry:this.handleErrorRetryClick},null===(n=this.contextProvider)||void 0===n?void 0:n.call(this,t))),this.initialized=!0},Object.defineProperty(e.prototype,"context",{get:function(){var e=this._context;return T(e,"Widget should be initalized before using context"),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){var e=this.widget;return T(e,"Widget should be initialzed before using options"),e.options},enumerable:!1,configurable:!0}),e.prototype.LCClose=function(){this.destroy()},e.prototype.iframeOpen=function(e){this.ready?this.showMount(e):this.showLoader(e)},e.prototype.toggleFullscreen=function(e){this.context.setProps({fullscreen:e})},e.prototype.showMount=function(e){this.ready=!0,this.context.setProps(p({page:"messenger"},e))},e.prototype.showError=function(e){this.context.setProps(p({page:"error"},e))},e.prototype.showLoader=function(e){this.context.setProps(p({page:"loader"},e))},e.prototype.destroy=function(){this.widget.events.fullscreenOn.removeListener(this.handleFullscreenOn),this.widget.events.fullscreenOff.removeListener(this.handleFullscreenOff),this.context.destroy(),this.ready=!1,this.destroyed=!0},e.prototype.handleFullscreenOn=function(){this.toggleFullscreen(!0)},e.prototype.handleFullscreenOff=function(){this.toggleFullscreen(!1)},e.prototype.handleErrorRetryClick=function(){this.iframeOpen(),this.widget.preload()},d([kt.bind],e.prototype,"handleFullscreenOn",null),d([kt.bind],e.prototype,"handleFullscreenOff",null),d([kt.bind],e.prototype,"handleErrorRetryClick",null),e}(),Qn=Nn("block");function $n(e){return'\n        <div class="'+Qn()+'">\n            '+Jn(e)+"\n        </div>\n    "}function er(e,t,n){var r=e.urlProvider,o=e.allow,i=r({utm_medium:"iframe"}),a=t(i,o),s=new URL(i).origin;n(new vt(a,s))}function tr(e,t){return String(t<e?t+"+":e)||""}var nr=function(e){var t=void 0,n=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t&&ve(t.args,n))return t.result;var o=e.apply(void 0,be(n));return t={result:o,args:n},o};return n.clear=function(){t=void 0},n}((function(e){var t=function(){var e;return(null===(e=window.top)||void 0===e?void 0:e.YandexApplicationsFeatureAvailability)?window.top:window}(),n=function(e){if("string"!==typeof e)return e;try{return JSON.parse(e)}catch(t){rn(t,{message:"Can not get yandex application availability feature",additional:{featureInfo:e}})}}(t.YandexApplicationsFeatureAvailability&&t.YandexApplicationsFeatureAvailability.getFeatureInfo(e));return{isAvailable:Boolean(n&&n.isAvailable),params:n&&n.params}})),rr=function(){return nr("messenger")},or=function(){return rr().isAvailable};nr.clear;!function(e){function t(){return e.call(this,$n)||this}l(t,e),t.prototype.mount=function(e){this.render(e)},t.prototype.getChildWindowTransport=function(e,t){var n=this;er(e,(function(e,t){var r=xn({url:e,allow:t});return n.context.setProps({iframe:r}),r.contentWindow}),t)},t.prototype.LCShown=function(){this.iframeOpen()},t.prototype.LCReady=function(){this.showMount()},t.prototype.LCErrorCritical=function(){this.showError()}}(Kn);var ir=!1;try{document.createEvent("TouchEvent"),ir=!0}catch(ho){}var ar=function(){return ir&&(Math.max(window.screen.width,window.screen.height)<900||(e=window.navigator.userAgent,/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)));var e},sr=function(){return e=window.navigator.userAgent,/iPad|iPhone|iPod/.test(e);var e},ur={},cr={},lr={};Object.defineProperty(lr,"__esModule",{value:!0}),lr.createHandler=lr.ErrorVisitor=void 0;var pr=function(e,t){this.error=e,this.callback=t};lr.ErrorVisitor=pr,lr.createHandler=function(e,t){return Object.keys(e).reduce((function(e,n){return e[n]=function(e){return t(e,n)},e}),{})};var dr=q&&q.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(cr,"__esModule",{value:!0}),cr.BaseError=void 0;var fr=lr,hr=function(e){function t(n,r){var o=e.call(this,n)||this;return r&&(o.stack=r),Object.setPrototypeOf(o,t.prototype),o}return dr(t,e),t.handle=function(e){return new fr.ErrorVisitor(this,e)},t.is=function(e){return e instanceof this},t.prototype.accept=function(e){this instanceof e.error&&e.callback(this)},t}(Error);cr.BaseError=hr;var vr={},yr=q&&q.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(vr,"__esModule",{value:!0}),vr.LoggableError=void 0;var br=function(e){function t(n,r,o){var i=e.call(this,n)||this;return i.loggerFields=r,i.additional=r&&r.additional,o&&(i.stack=o),Object.setPrototypeOf(i,t.prototype),i}return yr(t,e),t}(cr.BaseError);vr.LoggableError=br;var gr={},mr=q&&q.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(gr,"__esModule",{value:!0}),gr.serializeId=gr.SerializableError=void 0;var wr=function(e){function t(n,r){var o=e.call(this,n,r)||this;return Object.setPrototypeOf(o,t.prototype),o}return mr(t,e),t.makeSerializable=function(e){this.cache.set(e.SERIALIZE_ID,e)},t.serialize=function(e){return e.serialize()},t.deserialize=function(e){if(e.serializeId===t.SERIALIZE_ID)return new t(e.message);var n=this.cache.get(e.serializeId);return n?new n(e.message):new Error(e.message)},t.prototype.serialize=function(){return{serializeId:this.constructor.SERIALIZE_ID,message:this.message}},t.SERIALIZE_ID="@SerializableError",t.cache=new Map,t}(cr.BaseError);gr.SerializableError=wr,gr.serializeId=function(e){return function(t){t.SERIALIZE_ID=e,wr.makeSerializable(t)}};var Or={},_r=q&&q.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(Or,"__esModule",{value:!0}),Or.TransportError=void 0;var Cr=function(e){function t(n,r){var o=e.call(this,"TransportError, "+n,r)||this;return Object.setPrototypeOf(o,t.prototype),o}return _r(t,e),t}(cr.BaseError);Or.TransportError=Cr;var Er={},jr=q&&q.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(Er,"__esModule",{value:!0}),Er.RequestTimeoutError=void 0;var Pr=function(e){function t(n){var r=e.call(this,"Request timeout",n)||this;return Object.setPrototypeOf(r,t.prototype),r}return jr(t,e),t}(Or.TransportError);Er.RequestTimeoutError=Pr,function(e){var t=q&&q.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=q&&q.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.LoggableError=e.ErrorVisitor=e.createHandler=e.BaseError=void 0;var r=cr;Object.defineProperty(e,"BaseError",{enumerable:!0,get:function(){return r.BaseError}});var o=lr;Object.defineProperty(e,"createHandler",{enumerable:!0,get:function(){return o.createHandler}}),Object.defineProperty(e,"ErrorVisitor",{enumerable:!0,get:function(){return o.ErrorVisitor}});var i=vr;Object.defineProperty(e,"LoggableError",{enumerable:!0,get:function(){return i.LoggableError}}),n(gr,e),n(Or,e),n(Er,e)}(ur);var xr=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return l(t,e),t}(ur.BaseError),kr=[{name:"iframe",behavior:function(){function e(e){this.adapter=e}return e.prototype.show=function(){this.adapter.show()},e.prototype.hide=function(){this.adapter.hide()},e.prototype.remove=function(){this.adapter.remove()},e.prototype.ready=function(){},e.prototype.getChildWindowTransport=function(e,t){var n=this;er(e,(function(e,t){return n.remove(),n.adapter.create(e,t).contentWindow}),t)},e}()},{name:"detached",behavior:function(){function e(e){this.adapter=e}return e.prototype.show=function(){var e;null===(e=this.childWindow)||void 0===e||e.focus()},e.prototype.ready=function(){var e;null===(e=this.adapter)||void 0===e||e.ready()},e.prototype.hide=function(){},e.prototype.remove=function(){var e;window.removeEventListener("unload",this.handleUnload),null===(e=this.childWindow)||void 0===e||e.close()},e.prototype.getChildWindowTransport=function(e,t){var n=this;!function(e,t,n){var r=(0,e.urlProvider)({utm_medium:"new_tab"});try{var o=t(r),i=new URL(r).origin;n(new bt(o,window,i,[i]))}catch(a){n(void 0,a)}}(e,(function(e){if(n.remove(),n.childWindow=window.open(e),!n.childWindow)throw new xr("ChildWindow creation was failed");return window.addEventListener("unload",n.handleUnload),n.childWindow}),t)},e.prototype.handleUnload=function(){"visible"===window.document.visibilityState&&this.remove()},d([kt.bind],e.prototype,"handleUnload",null),e}()}],Ir=function(){function e(){this.blockName="disable-page-scroll",this.POPUP_ANIMATION_TIMEOUT=300,this.marginLeft="",this.marginTop="",this.scrollX=0,this.scrollY=0,this.disabled=!1}return e.prototype.clearPageScrollTimeout=function(){window.clearTimeout(this.scrollTimeout)},e.prototype.handleChangeProps=function(e){e.visible&&e.isMobile?this.disable():this.enable()},e.prototype.disable=function(){var e=this;this.disabled||(this.clearPageScrollTimeout(),this.scrollTimeout=window.setTimeout((function(){try{var t=document.body;sr&&(e.scrollX=window.scrollX,e.scrollY=window.scrollY,e.marginLeft=t.style.marginLeft,e.marginTop=t.style.marginTop,t.style.marginLeft="-"+e.scrollX+"px",t.style.marginTop="-"+e.scrollY+"px",t.classList.add(An(e.blockName,{ios:!0}))),t.classList.add(An(e.blockName)),e.disabled=!0}catch(n){rn(n)}}),this.POPUP_ANIMATION_TIMEOUT))},e.prototype.enable=function(){try{if(this.clearPageScrollTimeout(),!this.disabled)return;var e=document.body;e.classList.remove(An(this.blockName)),sr&&(e.classList.remove(An(this.blockName,{ios:!0})),e.style.marginLeft=this.marginLeft,e.style.marginTop=this.marginTop,window.scrollTo(this.scrollX,this.scrollY)),this.disabled=!1}catch(t){rn(t)}},e}(),Tr=10;function Lr(e,t,n,r){var o=t.getBoundingClientRect(),i=o.left,a=o.right,s=o.top,u=o.bottom,c=function(e){return I(e)?e.split("-"):["bottom","left"]}(n),l="top"===c[0]?s:u,p="right"===c[1]?a:i,d=function(){var e=window.innerWidth,t=window.innerHeight;return{left:10,top:10,right:0+e-Tr,bottom:0+t-Tr,width:e,height:t}}(),f=e.offsetWidth,h=(null===r||void 0===r?void 0:r.naturalHeight)||e.offsetHeight,v=function(e,t,n,r,o){var i=r.offsetParent&&r.offsetParent.offsetTop||0,a="top"===o?n.top-Tr:e-(window.pageYOffset-i+n.bottom+20);return Math.max(250,Math.min(a,t))}(d.height,h,o,t,c[0]),y=d.left+(d.right-d.left)/2,b=d.top+(d.bottom-d.top)/2;return i+f>d.right&&(p=a>y?Math.max(a-f,Tr):Math.min(i,d.right-f)),u+v>d.bottom&&s>b&&(l=s-v),{left:Math.floor(p),top:Math.floor(l),height:v,naturalHeight:h}}var Sr=Nn("popup"),Mr={left:void 0,top:void 0};function Rr(e){return e.inner?"inner":e.target?"target":"fixed"}var qr=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.props=r,o.hidden=!0,o.onToggled=new k,o.contextProvider=function(e){return p({popupTarget:r.popupTargetNode,popupPosition:r.popupTargetPosition,popupAutocloseable:r.autocloseable,isMobile:I(r.isMobile)?r.isMobile:ar(),paranjaVisible:r.paranjaVisible,calculatePosition:r.calculatePosition,onClose:function(){return e.hide()},onNewTab:o.handleNewWindowClick,pageScrollController:o.props.pageScrollController||new Ir},n(e,r))},o.strategies=o.props.strategies||kr,o.currentStrategyName=o.strategies[0].name,o.setBehavior(o.getStrategyByName(o.currentStrategyName)),o}return l(t,e),t.prototype.getChildWindowTransport=function(e,t){this.behavior.getChildWindowTransport(e,t)},t.prototype.LCReady=function(){this.showMount(),this.behavior.ready()},t.prototype.LCErrorCritical=function(e){var t=e.data.error;if(xr.is(t))this.showNewWindowRequest();else{if(tn.is(t)&&"iframe"===this.currentStrategyName&&this.getStrategyByName("detached"))try{return this.setBehavior(this.getStrategyByName("detached")),void this.widget.preload()}catch(n){}this.showError()}},t.prototype.LCHidden=function(){this.behavior.hide()},t.prototype.LCShown=function(){this.behavior.show()},t.prototype.hidePopup=function(){this.hidden||(this.hidden=!0,this.context.setProps({popupVisible:!1}),this.onToggled.dispatch({hidden:!0}))},t.prototype.showPopup=function(){this.hidden&&(this.hidden=!1,this.iframeOpen({popupVisible:!0}),this.onToggled.dispatch({hidden:!1}))},t.prototype.showNewWindowRequest=function(){this.context.setProps({page:"new-window-blocked"})},t.prototype.getStrategyByName=function(e){return this.strategies.filter((function(t){return t.name===e}))[0]},t.prototype.setBehavior=function(e){var t,n=this;this.behavior&&this.currentStrategyName===e.name||(null===(t=this.behavior)||void 0===t||t.remove(),this.currentStrategyName=e.name,"iframe"===e.name?this.behavior=new e.behavior({show:function(){n.showPopup()},hide:function(){n.hidePopup()},remove:function(){n.context.setProps({iframe:void 0})},create:function(e,t){var r=xn({url:e,allow:t});return n.context.setProps({iframe:r}),r}}):"detached"===e.name&&(this.behavior=new e.behavior({ready:function(){n.hidePopup()}})))},t.prototype.handleNewWindowClick=function(){this.setBehavior(this.getStrategyByName("detached"));try{this.widget.preload(),this.hidePopup()}catch(e){}},d([kt.bind],t.prototype,"handleNewWindowClick",null),t}(Kn),Nr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.mount=function(){this.render(document.body)},t.prototype.setPopupTarget=function(e,t){this.context.setProps({popupTarget:e,popupPosition:t||this.context.props.popupPosition})},t}(qr),Ar=Nn("close");var Br=Nn("new-window");var zr=Nn("popup-ui");function Fr(e,t){if(!e.props.lang)throw new Error("");var n=function(e){var t=e.useRef(),n=e.useRef();return n.on("click",e.props.onCloseClick),"\n        <div\n            "+t.id+'\n            class="'+t.useClassName((function(e){var t=e.visible;return Ar({visible:t})}),["visible"])+'"\n        >\n            <div '+n.id+' class="'+Ar("button-box")+'">\n                <div class="'+Ar("button")+'"></div>\n            </div>\n        </div>\n    '}(e.pipe((function(e){return{visible:"messenger"!==e.page,onCloseClick:e.onClose}}))),r=function(e){var t=e.props.lang,n=e.useRef(),r=e.useRef();return r.on("click",e.props.onOpenNewTabClick),"\n        <div\n            "+n.id+'\n            class="'+n.useClassName((function(e){var t=e.visible;return Br({visible:t})}),["visible"])+'"\n        >\n            <div class="'+Br("title")+'">\n                '+Fn("cookie-blocked-text",t)+"\n            </div>\n            <div "+r.id+' class="'+Br("button")+'">\n                '+Fn("new-window-button",t)+"\n            </div>\n        </div>\n    "}(e.pipe((function(e){return{visible:"new-window-blocked"===e.page,onOpenNewTabClick:e.onNewTab,lang:e.lang}}))),o=Jn(e.pipe((function(e){return{lang:e.lang,onRetry:e.onRetry,fullscreen:e.fullscreen,iframe:e.iframe,page:e.page}})),n);return function(e,t,n){var r=e.useState(Mr),o=r[0],i=r[1],a=e.useRef(),s=e.useRef(),u=e.useRef();return a.on("click",e.props.onParanjaClick),s.useEffect((function(e){function t(t){var n=t.target;n&&!s.getNode().contains(n)&&e.onParanjaClick()}return e.autocloseable&&e.visible&&document.addEventListener("click",t,!0),function(){document.removeEventListener("click",t,!0)}}),["visible","autocloseable","onParanjaClick"]),s.useEffect((function(e){function t(){i((function(t){return!e.visible||!e.target||e.isMobile||e.inner?Mr:e.calculatePosition(u.getNode(),e.target,e.position,t)}))}return window.addEventListener("resize",t),window.addEventListener("scroll",t),window.addEventListener("orientationchange",t),t(),function(){window.removeEventListener("resize",t),window.removeEventListener("scroll",t),window.removeEventListener("orientationchange",t)}}),["target","position","visible","isMobile","inner","calculatePosition"]),s.useEffect((function(e){return function(){return e.pageScrollController.enable()}}),["pageScrollController"]),s.useEffect((function(e){e.pageScrollController.handleChangeProps(e)}),["visible","isMobile"]),'\n        <div\n            class="'+Sr("container")+'"\n        >\n            <div\n                '+a.id+'\n                class="'+a.useClassName((function(e){return Sr("paranja",{visible:e.visible&&(e.isMobile||e.paranjaVisible)})}),["visible","isMobile","paranjaVisible"])+'"\n            >\n            </div>\n            <div\n                '+s.id+'\n                style="'+s.useStyle((function(e,t){var n=t.left,r=t.top;return{left:I(n)?n+"px":void 0,top:I(r)?r+"px":void 0}}),[],o)+'"\n                class="'+s.useClassName((function(e){return Sr({button:e.buttonMode,position:Rr(e),desktop:!e.isMobile,mobile:e.isMobile,visible:e.visible,fullscreen:e.fullscreen})}),["buttonMode","target","isMobile","visible","fullscreen","inner"])+'"\n            >\n                <div\n                    '+u.id+'\n                    class="'+Sr("content-wrapper")+'"\n                    style="'+u.useStyle((function(e,t){var n=t.height;return{height:I(n)?n+"px":void 0}}),[],o)+'"\n                >\n                    '+(I(n)?n:"")+"\n                    "+t+"\n                </div>\n            </div>\n        </div>\n    "}(e.pipe((function(e){return{isMobile:e.isMobile,onParanjaClick:e.onClose,buttonMode:e.buttonMode,position:e.popupPosition,autocloseable:e.popupAutocloseable,target:e.popupTarget,visible:e.popupVisible,fullscreen:e.fullscreen,inner:e.inner,paranjaVisible:e.paranjaVisible,calculatePosition:e.calculatePosition||Lr,pageScrollController:e.pageScrollController}})),"\n            "+o+"\n            "+r+"\n        ",t)}function Vr(e,t){return'\n        <div data-ref="popup-ui" class="'+zr()+'">\n            '+Fr(e,t)+"\n        </div>\n    "}var Ur=Nn("icon");var Dr=Nn("button");function Hr(e,t){var n=e.useRef();n.on("click",e.props.onClick);var r=e.props.buttonText?'\n        <div class="'+Dr("text")+'">\n            <div class="'+Dr("text-container")+'">'+e.props.buttonText+"</div>\n        </div>":"";return"\n        <a "+n.id+' class="'+n.useClassName((function(e){return Dr({mobile:e.isMobile,collapsed:e.collapsed,size:e.buttonSize,desktop:!e.isMobile,visible:e.visible})}),["isMobile","visible","buttonSize","collapsed"])+'">\n            <div class="'+Dr("container")+'">\n                <div class="'+Dr("icon")+'">\n                    <svg class="'+Ur()+'" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <g clip-path="url(#clip-mssngr-widget-icon)">\n        <g filter="url(#filter0-mssngr-widget)">\n            <path fill-rule="evenodd" clip-rule="evenodd" d="M14 0C2.8 0 0 2.8 0 14C0 25.2 2.8 28 14 28C25.2 28 28 25.2 28 14C28 2.8 25.2 0 14 0Z" fill="#00D7D7"/>\n            <path fill-rule="evenodd" clip-rule="evenodd" d="M14 0C2.8 0 0 2.8 0 14C0 25.2 2.8 28 14 28C25.2 28 28 25.2 28 14C28 2.8 25.2 0 14 0Z" fill="url(#paint0_linear-mssngr-widget)"/>\n            <path fill-rule="evenodd" clip-rule="evenodd" d="M14 0C2.8 0 0 2.8 0 14C0 25.2 2.8 28 14 28C25.2 28 28 25.2 28 14C28 2.8 25.2 0 14 0Z" fill="url(#paint1_linear-mssngr-widget)"/>\n        </g>\n            <path d="M25.0249 13.7106C24.9593 13.5028 24.8061 13.3169 24.5983 13.1965L8.49834 4.16217C7.86396 3.81217 7.0874 4.2606 7.0874 4.99342V7.11529V8.38404L25.0249 13.7106Z" fill="#FAFFFE"/>\n            <path d="M7.0874 20.9013V23.0231C7.0874 23.745 7.86396 24.2044 8.49834 23.8544L24.5983 14.831C24.8171 14.7106 24.9593 14.5247 25.0249 14.3169L7.0874 19.6216V20.9013Z" fill="#C8F4F9"/>\n            <path d="M7.08759 8.37787L5.87353 8.01693C5.07509 7.77631 4.38603 8.60756 4.7579 9.35131L5.41415 10.6529L6.87978 13.5732L7.09853 13.9997V8.37787H7.08759Z" fill="#DEF8FB"/>\n            <path d="M7.0874 13.9998H25.0796C25.0796 13.8904 25.0577 13.792 25.0249 13.6936L7.0874 8.37793V13.9998Z" fill="#DEF8FB"/>\n            <path d="M7.09853 14.0005L4.7579 18.6489C4.38603 19.3927 5.07509 20.2239 5.87353 19.9833L7.08759 19.6224V14.0005H7.09853Z" fill="#FAFFFE"/>\n            <path d="M7.0874 19.6219L25.0358 14.3063C25.0686 14.2078 25.0905 14.0984 25.0905 14H7.0874V19.6219Z" fill="#FAFFFE"/>\n        </g>\n        <defs>\n        <filter id="filter0-mssngr-widget" x="-25.7204" y="-14.7308" width="79.4408" height="79.4408" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n            <feFlood flood-opacity="0" result="BackgroundImageFix"/>\n            <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/>\n            <feOffset dy="10.9896"/>\n            <feGaussianBlur stdDeviation="12.8602"/>\n            <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.06 0"/>\n            <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow"/>\n            <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape"/>\n        </filter>\n        <linearGradient id="paint0_linear-mssngr-widget" x1="44.8437" y1="-28.5469" x2="14" y2="16.5156" gradientUnits="userSpaceOnUse">\n            <stop stop-color="white"/>\n            <stop offset="1" stop-color="white" stop-opacity="0"/>\n        </linearGradient>\n        <linearGradient id="paint1_linear-mssngr-widget" x1="14" y1="33.3594" x2="34.3437" y2="-11.4844" gradientUnits="userSpaceOnUse">\n            <stop stop-color="#00BCBC"/>\n            <stop offset="1" stop-color="white" stop-opacity="0"/>\n        </linearGradient>\n        <clipPath id="clip-mssngr-widget-icon">\n            <path d="M0 0H28V28H0V0Z" fill="white"/>\n        </clipPath>\n        </defs>\n    </svg>\n                </div>\n                '+r+"\n            </div>\n            "+(t||"")+"\n        </a>"}var Wr=Nn("badge");function Zr(e,t){return t?(null===e||void 0===e?void 0:e.valueForChat)||0:(null===e||void 0===e?void 0:e.value)||0}var Gr=Nn("button-ui");function Yr(e,t){var n=function(e){var t,n,r=e.useState({count:Zr(null===(t=e.props.unreadCounterPlugin)||void 0===t?void 0:t.lastValue,null===(n=e.props.unreadCounterPlugin)||void 0===n?void 0:n.shouldUseValueForChat)}),o=r[0],i=r[1],a=e.useRef(),s=e.useRef();return a.useEffect((function(e){var t=e.unreadCounterPlugin,n=function(e){i((function(){return{count:Zr(e,null===t||void 0===t?void 0:t.shouldUseValueForChat)}}))};return t&&(i((function(){return{count:Zr(t.lastValue,t.shouldUseValueForChat)}})),t.onChanged.addListener(n)),function(){null===t||void 0===t||t.onChanged.removeListener(n)}}),["unreadCounterPlugin"]),"\n        <div\n            "+a.id+'\n            class="'+a.useClassName((function(e,t){var n=t.count;return Wr({"has-count":Boolean(n),type:e.badgeType,visible:Boolean(n)})}),["badgeType"],o)+'"\n        >\n            <div '+s.id+' class="'+Wr("count")+'">\n                '+s.useText((function(e,t){return tr(t.count,e.badgeMaxCount)}),["badgeMaxCount"],o)+"\n            </div>\n        </div>\n    "}(e.pipe((function(e){return{badgeMaxCount:e.badgeMaxCount,unreadCounterPlugin:e.unreadCounterPlugin,badgeType:e.badgeType}}))),r=Fr(e.pipe((function(e){return{lang:e.lang,isMobile:e.isMobile,page:e.page,iframe:e.iframe,fullscreen:e.fullscreen,popupAutocloseable:e.popupAutocloseable,buttonMode:!0,popupVisible:e.popupVisible,popupPosition:void 0,popupTarget:void 0,paranjaVisible:e.paranjaVisible,onClose:e.onClose,onRetry:e.onRetry,onNewTab:e.onRetry,inner:!0,pageScrollController:e.pageScrollController}})),t);return'\n        <div class="'+Gr()+'">\n            '+Hr(e.pipe((function(e){return{isMobile:e.isMobile,lang:e.lang,collapsed:e.collapsed,buttonSize:e.buttonSize,buttonText:e.buttonText,visible:e.popupVisible,onClick:e.onButtonClick}})),n)+'\n            <div data-ref="popup-wrapper" class="'+Gr("popup-wrapper")+'">\n                '+r+"\n            </div>\n        </div>\n    "}function Xr(e){return function(t){var n=function(e,t){return p(p({},e),{isMobile:I(e.isMobile)?e.isMobile:ar(),buttonText:I(e.buttonText)?e.buttonText:Fn("button-text-default",t),badgeType:e.badgeType||"num",badgeMaxCount:e.badgeMaxCount||99})}(e,t.options.lang),r=function(e){var t=e.isMobile,n=e.buttonText,r=e.collapsedDesktop,o=e.collapsedTouch,i=t?o:r;return n?t||-1!==["always","never","hover"].indexOf(i)?t&&-1===["always","never"].indexOf(i)?"always":i:"hover":"always"}(n);return{buttonMode:!0,badgeMaxCount:n.badgeMaxCount||99,badgeType:n.badgeType||"num",collapsed:r,buttonSize:"always"===r?"large":"normal",buttonText:n.buttonText,unreadCounterPlugin:n.unreadCounterPlugin,paranjaVisible:n.paranjaVisible,pageScrollController:e.pageScrollController||new Ir,onButtonClick:function(){t.show()}}}}!function(e){function t(t){return e.call(this,Yr,Xr(t),t)||this}l(t,e),t.prototype.mount=function(e){void 0===e&&(e=document.body),this.render(e)}}(qr);var Jr=Nn("support-header");function Kr(e){return e&&I(e.chatCount)&&I(e.valueForChat)?e.chatCount-(e.valueForChat>0?1:0):0}function Qr(e){var t,n=e.useState({count:Kr(null===(t=e.props.unreadCounterPlugin)||void 0===t?void 0:t.lastValue)}),r=n[0],o=n[1],i=e.useRef(),a=e.useRef();return a.useEffect((function(e){var t=function(e){o((function(){return{count:Kr(e)}}))},n=e.unreadCounterPlugin;return n&&(t(null===n||void 0===n?void 0:n.lastValue),n.onChanged.addListener(t)),function(){null===n||void 0===n||n.onChanged.removeListener(t)}}),["unreadCounterPlugin"]),'\n        <div class="'+Jr()+'">\n            <a href="'+e.props.passportUrl+'" target="_blank" class="'+Jr("logo")+'">\n                <svg width="58" height="24" viewBox="0 0 58 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                    <path fill-rule="evenodd" clip-rule="evenodd" d="M12 0H46C52.6274 0 58 5.37259 58 12C58 18.6274 52.6274 24 46 24H12C5.37257 24 0 18.6274 0 12C0 5.37258 5.37258 0 12 0ZM12 1.06077C5.95843 1.06077 1.06077 5.95843 1.06077 12C1.06077 18.0416 5.95842 22.9392 12 22.9392H46C52.0416 22.9392 56.9392 18.0416 56.9392 12C56.9392 5.95843 52.0416 1.06077 46 1.06077H12Z" fill="black"/>\n                    <rect x="5.30371" y="4.64087" width="14.5856" height="14.5856" rx="7.29282" fill="#FC3F1D"/>\n                    <path d="M13.6244 16.3167H15.148V7.56531H12.9319C10.7031 7.56531 9.53204 8.71117 9.53204 10.3985C9.53204 11.7458 10.1742 12.5391 11.3201 13.3576L9.33057 16.3167H10.9801L13.1963 13.005L12.4282 12.4887C11.4964 11.8592 11.0431 11.3681 11.0431 10.3103C11.0431 9.37854 11.6978 8.74895 12.9444 8.74895H13.6244V16.3167Z" fill="white"/>\n                    <path fill-rule="evenodd" clip-rule="evenodd" d="M45.2273 17.2309V17.2376H43.0988V6.37415H46.3853C47.2488 6.37415 48.0453 6.46785 48.7682 6.65527C49.491 6.84268 50.1202 7.14389 50.6624 7.55888C51.1979 7.97387 51.6196 8.52943 51.9208 9.21216C52.222 9.90158 52.3759 10.7449 52.3759 11.7423C52.3759 12.927 52.1082 13.931 51.5794 14.7409C51.0506 15.5508 50.321 16.1733 49.3973 16.595C48.4736 17.0167 47.4295 17.2309 46.2648 17.2309H45.2273ZM45.2273 15.6378V7.96718H46.1979C46.9743 7.96718 47.6704 8.08097 48.2728 8.30854C48.8753 8.53612 49.3505 8.93103 49.6919 9.47989C50.0332 10.0354 50.2072 10.7784 50.2072 11.7155C50.2072 12.5856 50.0332 13.3085 49.6852 13.8909C49.3371 14.4732 48.8485 14.9083 48.226 15.2028C47.6035 15.4973 46.8806 15.6378 46.0573 15.6378H45.2273Z" fill="black"/>\n                    <path d="M41.2246 17.2376V6.37419H39.1162V17.2376H41.2246Z" fill="black"/>\n                    <path fill-rule="evenodd" clip-rule="evenodd" d="M35.4694 11.9337C35.4694 15.9614 32.2043 19.2265 28.1766 19.2265C24.1489 19.2265 20.8838 15.9614 20.8838 11.9337C20.8838 7.90597 24.1489 4.64087 28.1766 4.64087C27.6415 4.64087 27.108 4.69977 26.5857 4.8165L26.9197 6.31064C24.3427 6.88414 22.416 9.18392 22.416 11.9337C22.416 15.1152 24.9951 17.6943 28.1766 17.6943C31.3581 17.6943 33.9372 15.1152 33.9372 11.9337V11.9337H35.4694ZM28.1766 4.64087C32.2043 4.64087 35.4694 7.90597 35.4694 11.9337C35.4694 11.3986 35.4105 10.8651 35.2938 10.3428L33.7997 10.6768C33.2262 8.09976 30.9264 6.17311 28.1766 6.17311H28.1766V4.64087ZM28.1766 16.2453C29.9511 16.2453 31.4752 15.1733 32.1366 13.6416L30.7323 13.0294C30.3071 14.0199 29.3228 14.7137 28.1766 14.7137C27.0424 14.7137 26.0668 14.0344 25.6344 13.0605L24.2301 13.6728C24.8987 15.1878 26.4142 16.2453 28.1766 16.2453Z" fill="black"/>\n                </svg>\n            </a>\n            <a href="'+e.props.supportUrl+'" target="_blank" class="'+Jr("unread")+'">\n                <div class="'+Jr("unread-icon")+'">\n                    <svg width="16" height="16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6 10.347c-.39 0-.623 0-1.12-.08-.623-.1-1.377.218-2.263.952.328-1.023.288-1.855-.12-2.497a3.855 3.855 0 0 1-.597-2.1c0-2.077 1.775-3.725 4.1-3.725 2.325 0 4.1 1.648 4.1 3.725 0 2.078-1.775 3.725-4.1 3.725zM.79 12.635c1.274.013 2.286-.24 3.036-.758.674.24 1.407.37 2.174.37 3.314 0 6-2.437 6-5.625C12 3.435 9.314.997 6 .997S0 3.435 0 6.622c0 1.46.564 2.763 1.493 3.746-.05.628-.336 1.276-.86 1.944a.2.2 0 0 0 .156.323zm14.452 1.72c-1.152.007-2.069-.225-2.75-.695-.617.22-1.29.34-1.992.34-.874 0-1.7-.185-2.434-.518 1.027-.075 1.739-.426 2.347-.725.517-.254.958-.471 1.454-.45a2.77 2.77 0 0 1 1.408.423c-.233-1.15.019-1.65.326-2.259.096-.191.198-.393.292-.63.932-2.344.082-4.855-.76-5.54C14.84 5.157 16 6.838 16 8.843a4.955 4.955 0 0 1-1.368 3.433c.045.567.3 1.153.767 1.756a.2.2 0 0 1-.157.323z" fill="currentColor"/></svg>\n                    <div\n                        '+a.id+'\n                        class="'+a.useClassName((function(e,t){return Jr("unread-badge",{visible:Boolean(t.count)})}),[],r)+'"\n                    >\n                        '+a.useText((function(e,t){return tr(t.count,99)}),[],r)+"\n                    </div>\n                </div>\n                <div "+i.id+' class="'+Jr("unread-text")+'">\n                    '+i.useText((function(e,t){var n,r,o=t.count;return n=o,r=e.lang,n?Fn("support-unread-text-count",r,n):Fn("support-unread-text",r)}),["lang"],r)+"\n                </div>\n            </a>\n        </div>\n    "}function $r(e){var t=Qr(e.pipe((function(e){return{lang:e.lang,passportUrl:e.passportUrl,supportUrl:e.supportUrl,unreadCounterPlugin:e.unreadCounterPlugin}})));return Yr(e,t)}var eo=function(e){function t(t){return e.call(this,$r,(function(e){return p(p({},Xr(t)(e)),{passportUrl:w(r,e.options.tld),supportUrl:w(o,e.options.tld)})}),t)||this}return l(t,e),t.prototype.mount=function(e){void 0===e&&(e=document.body),this.render(e)},t}(qr);function to(e){return new eo(e)}function no(e){var t=Qr(e.pipe((function(e){return{lang:e.lang,passportUrl:e.passportUrl,supportUrl:e.supportUrl,unreadCounterPlugin:e.unreadCounterPlugin}})));return Vr(e,t)}function ro(e){var t=Xr(e);return new Nr(no,(function(n){return p(p({},t(n)),{passportUrl:w(r,n.options.tld),supportUrl:w(o,n.options.tld),unreadCounterPlugin:e.unreadCounterPlugin})}),e)}var oo=3e5,io="yachat-unread";function ao(e){return 19===e?5:void 0}(function(){function e(e){this.isStarted=!1,this.needFetch=!1,this.reqNum=0,this.rn=Math.floor(1e6*Math.random()),this.timeout=1e4,this.timeoutId=-1,this.params=e,this.fetch=this.fetch.bind(this),this.handleOnline=this.handleOnline.bind(this),this.handleVisibilityChange=this.handleVisibilityChange.bind(this)}Object.defineProperty(e.prototype,"shouldUseSavedData",{get:function(){return(!this.params.ns||0===this.params.ns.length)&&void 0===this.params.workspaceId},enumerable:!1,configurable:!0}),e.prototype.start=function(){!this.isStarted&&this.params.url&&window.navigator.cookieEnabled&&(this.isStarted=!0,this.bindEvents(),this.fetch())},e.prototype.stop=function(){this.isStarted=!1,this.clearTimeout(),this.unbindEvents()},e.prototype.removeData=function(){!function(e){try{window.localStorage&&window.localStorage.removeItem(e)}catch(t){}}(io)},e.prototype.fetch=function(){if(this.clearTimeout(),document.hidden||!window.navigator.onLine)return this.needFetch=!0,void this.retryFetch();if(this.needFetch=!1,this.shouldUseSavedData){var e=function(e){try{var t=window.localStorage&&window.localStorage.getItem(e);if("string"===typeof t){var n=JSON.parse(t);if(n&&"object"===typeof n)return n}}catch(r){}return null}(io);if(function(e){var t=Date.now();return Boolean(e&&e.currentTimestamp<t&&t<e.expiredTimestamp&&e.expiredTimestamp-t<=oo&&e.hasAuth===v())}(e))return this.runCallback(e.response),void(this.timeoutId=window.setTimeout(this.fetch,function(e){return e.expiredTimestamp-Date.now()}(e)))}this.makeRequest()},e.prototype.retryFetch=function(){this.clearTimeout(),this.timeoutId=window.setTimeout(this.fetch,this.timeout)},e.prototype.bindEvents=function(){document.addEventListener("visibilitychange",this.handleVisibilityChange,!1),window.addEventListener("online",this.handleOnline,!1)},e.prototype.unbindEvents=function(){document.removeEventListener("visibilitychange",this.handleVisibilityChange,!1),window.removeEventListener("online",this.handleOnline,!1)},e.prototype.handleVisibilityChange=function(){this.needFetch&&!document.hidden&&this.fetch()},e.prototype.handleOnline=function(){this.needFetch&&this.fetch()},e.prototype.makeRequest=function(){var e=this,t=new XMLHttpRequest;t.open("GET",this.getUrl(),!0),t.withCredentials=!0,t.onload=function(){if(e.isStarted)if(200===t.status){var n;try{n=JSON.parse(t.responseText)}catch(ho){n=null}if(n&&"object"===typeof n){if("Status"in n)return void e.handleError(n);if("Ttl"in n)return void e.handleResponse(n)}e.stop()}else e.handleError({Status:t.status})},t.onerror=t.onabort=t.ontimeout=function(){return e.handleError({Status:t.status})},t.send(null)},e.prototype.runCallback=function(e){"Ttl"in e&&!("Status"in e)&&this.params.callback({lastTimestamp:e.LastUnreadTsMcs,value:e.UnreadCount||0,valueForChat:e.ChatUnreadCount||0,chatCount:e.ChatCount||0})},e.prototype.getUrl=function(){this.reqNum++;var e=this.params,t=e.serviceId,n=e.workspaceId,r=e.url,o=e.chatId,i=e.guid,a=e.ns,s=e.withCountChats,u=e.orgId;return _(r,{all_ns:ao(t),parentOrigin:C(),rn:this.rn,reqNum:this.reqNum,chat_id:o,other_guid:i,serviceId:t,client:n,ns:a,count_chats:s?"1":void 0,organization_id:u})},e.prototype.clearTimeout=function(){window.clearTimeout(this.timeoutId)},e.prototype.handleResponse=function(e){var t;this.runCallback(e),this.timeout=1e3*((t=e.Ttl)<10?10:t>300?300:t),this.saveData(e,this.timeout),this.retryFetch()},e.prototype.handleError=function(e){this.timeout=function(e,t){var n=Math.max(1e4,t);return 401===e||403===e?oo:Math.min(2*n,oo)}(e.Status,this.timeout),this.saveData(e,this.timeout),this.retryFetch()},e.prototype.saveData=function(e,t){if(this.shouldUseSavedData){var n=Date.now();!function(e,t){try{window.localStorage&&window.localStorage.setItem(e,JSON.stringify(t))}catch(n){}}(io,{currentTimestamp:n,expiredTimestamp:n+t,hasAuth:v(),response:e})}}})(),function(){function e(e,t){this.unreadUrl=e,this.unreadCounterFactory=t,this.onChanged=new k}e.prototype.init=function(e,t){var n,r=e.serviceId,o=e.workspaceId,i=e.unreadCounterChatId,a=e.unreadCounterOtherGuid,s=e.unreadCounterNsFilter,u=e.unreadWithCountChats,c=e.orgId;this.widget=t,this.widget.events.counter.addListener(this.handleUnreadCounter),this.unreadCounterClient=null===this||void 0===this?void 0:this.unreadCounterFactory({callback:this.update,url:w(this.unreadUrl),serviceId:r,workspaceId:o,chatId:i,guid:a,ns:s,withCountChats:u,orgId:c}),null===(n=this.unreadCounterClient)||void 0===n||n.start()},e.prototype.handleUnreadCounter=function(e){var t=e.data;this.update(t)},e.prototype.update=function(e){var t=this.lastValue,n=e.valueForChat,r=void 0===n?0:n,o=e.value,i=void 0===o?0:o,a=e.lastTimestamp,s=void 0===a?0:a,u=e.seqnoForChat,c=void 0===u?0:u,l=e.chatCount,p=void 0===l?0:l;t&&i===t.value&&r===t.valueForChat&&s===t.lastTimestamp&&c===t.seqnoForChat&&p===t.chatCount||(this.lastValue={value:i,lastTimestamp:s,valueForChat:r,seqnoForChat:c,chatCount:p},this.onChanged.dispatch(this.lastValue))},Object.defineProperty(e.prototype,"shouldUseValueForChat",{get:function(){var e;return Boolean(null===(e=this.widget)||void 0===e?void 0:e.options.unreadCounterChatId)},enumerable:!1,configurable:!0}),e.prototype.LCClose=function(){var e;this.widget.events.counter.removeListener(this.handleUnreadCounter),null===(e=this.unreadCounterClient)||void 0===e||e.stop(),this.onChanged.removeAllListener()},e.prototype.LCReady=function(){var e;null===(e=this.unreadCounterClient)||void 0===e||e.stop()},d([kt.bind],e.prototype,"handleUnreadCounter",null),d([kt.bind],e.prototype,"update",null)}();var so="messenger://chat/open",uo="messenger://chat/invite_byhash",co="messenger://user/",lo=function(e,t){var n=e.guid,r=e.chatId,o=e.inviteHash,i=e.context,a=function(){var e=rr();return e.params?e.params["available-paths"]:[]}();return o&&-1!==a.indexOf(uo)?_(uo,p({invite_hash:o,context:i},t)):r&&-1!==a.indexOf(so)?_(so,p({chat_id:r,context:i},t)):n&&-1!==a.indexOf(co)?_(co,p({user_id:n,context:i},t)):_("messenger://chat/list",p({context:i},t))},po=function(e){var t=e.serviceId,n=e.clickId,r=e.params,o=function(e,t){if(or())return lo(e,t)}(void 0===r?{}:r,{serviceId:t,clickId:n});return!!o&&(window.location.replace(o),Cn("widget-opened-native",{clickId:n}),!0)},fo=(function(){function e(){}e.prototype.init=function(e){this.serviceId=e.serviceId},e.prototype.LCBeforeRequest=function(e){or()&&e.preventDefault(Promise.reject(new Error("Native messenger does not support api")))},e.prototype.LCBeforeShow=function(e){or()&&(po({params:e.data,serviceId:this.serviceId}),e.preventDefault())}}(),/^https?:\/\/yandex\.[^/]+\/chat/);!function(){function e(){}e.prototype.init=function(e,t){or()||(this.widget=t,window.addEventListener("click",this.handleClick,!0))},e.prototype.LCClose=function(){or()||window.removeEventListener("click",this.handleClick,!0),this.widget=void 0},e.prototype.handleClick=function(e){for(var t,n=e.target;n;){if("A"===n.tagName&&fo.test(n.href))return null===(t=this.widget)||void 0===t||t.show({deeplink:n.href}),void e.preventDefault();n=n.parentElement}},d([kt.bind],e.prototype,"handleClick",null)}()}}]);
//# sourceMappingURL=https://kinopoisk-frontend-internal.s3.mds.yandex.net/hd-www/release/_next/static/chunks/d2c506a5-6d995aef8e30f503.js.map