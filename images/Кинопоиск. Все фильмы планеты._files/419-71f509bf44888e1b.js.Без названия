(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[419],{622:function(e,i,n){"use strict";n.d(i,{_:function(){return r}});var a=n(37667),t=n(53628),l=n(89145),o=n(36007),d=n(28222);const r=({entityType:e=l.v.Film,colorScheme:i})=>{const n=(0,t.useDispatch)();return{handleOpenPopover:(0,a.useCallback)((({clientX:a,clientY:t},l)=>{n((0,d.Yc)({startPosition:{x:a,y:t},contentEntityId:l,colorScheme:i||o.ElementColorSchemes.Light,entityType:e}))}),[n,e,i]),handleClosePopover:(0,a.useCallback)((()=>{n((0,d.e4)())}),[n])}}},53310:function(e,i,n){"use strict";n.d(i,{qD:function(){return a.qD}});var a=n(76453)},76453:function(e,i,n){"use strict";n.d(i,{qD:function(){return k}});var a=n(78273),t=n.n(a),l=n(43803),o=n.n(l),d=n(83605);const r=({className:e,shouldShow:i,previousScrollPosition:n,handleClick:a})=>(0,d.jsx)("button",{className:t()(o().root,e,{[o().shown]:i,[o().down]:null!==n}),onClick:a,type:"button","data-tid":"ed9136fe",children:(0,d.jsx)("span",{className:o().iconWrapper,children:(0,d.jsx)("span",{className:o().icon})})});var s=n(37667),u=n.n(s),v=n(20345),m=n.n(v),c=n(70112);const k=u().memo((({className:e})=>{const{0:i,1:n}=(0,s.useState)(null),{0:a,1:t}=(0,s.useState)(!1),l=(0,s.useCallback)(m()((()=>{null!==i&&i<=window.scrollY&&n(null);const e=window.scrollY>=865;e!==a&&t(e)}),35),[i,a]),o=(0,s.useCallback)((()=>{if(null!==i)return window.scrollTo({top:i}),n(null),void l();n(window.scrollY),window.scrollTo({top:0})}),[i,l]);return(0,c.LI)((()=>{t(window.scrollY>=865)}),[]),(0,c.LI)((()=>(window.addEventListener("scroll",l,{passive:!0}),()=>window.removeEventListener("scroll",l))),[l]),(0,d.jsx)(r,{className:e,shouldShow:a,previousScrollPosition:i,handleClick:o})}))},56695:function(e,i,n){"use strict";n.d(i,{a:function(){return v}});n(37667);var a=n(23236),t=n(65697),l=n(92430),o=n(80829);const d={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Notification"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filter"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"NotificationFilterInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"notification"},arguments:[{kind:"Argument",name:{kind:"Name",value:"filter"},value:{kind:"Variable",name:{kind:"Name",value:"filter"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"notificationPayloadId"}},{kind:"Field",name:{kind:"Name",value:"payload"}},{kind:"Field",name:{kind:"Name",value:"templateId"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}}]};var r=n(83605);const{publicRuntimeConfig:{isNotificationsEnabled:s}}=(0,t.default)(),u=(0,a.default)((()=>n.e(3861).then(n.bind(n,3861)).then((e=>e.NotificationsContainer)).catch((()=>()=>null))),{loading:()=>null,loadableGenerated:{webpack:()=>[3861]}}),v=()=>{const{notification:e}=(({skip:e})=>{const{data:i}=(0,l.useQuery)(d,{variables:{filter:{consumer:o.u6,domain:o.Gi,platform:o.gO,supportedTemplateIds:o.Ct}},skip:e});return{notification:null===i||void 0===i?void 0:i.notification}})({skip:!s});return e?(0,r.jsx)(u,{templateId:e.templateId,payloadId:e.notificationPayloadId,payload:e.payload}):null}},6295:function(e,i,n){"use strict";n.d(i,{T:function(){return M}});var a=n(37667),t=n(48681),l=n(72310),o=n(53628),d=n(9103),r=n(4091),s=n(96474),u=n(72095),v=n(89145),m=n(92430);const c=(e,i)=>{const[n,a]=(0,m.useLazyQuery)(e,i),t=(0,m.useQuery)(e,{variables:null===i||void 0===i?void 0:i.variables,fetchPolicy:"cache-only",skip:a.called});return[n,a.called?a:t]};var k=n(98876),p=n(65697),f=n(28245),y=n(50596),N=n(87832),b=n(66827),S=n(14250),_=n(4591);const{hdHost:g}=(0,p.default)().publicRuntimeConfig;function h({id:e,contentId:i,viewOption:n,isTicketsAvailable:a}){return{accessType:(null===n||void 0===n?void 0:n.type)||void 0,onlineCaption:(null===n||void 0===n?void 0:n.buttonText)||void 0,isPurchased:(null===n||void 0===n?void 0:n.purchasabilityStatus)===S.gY.Purchased,onlineLink:null!==n&&void 0!==n&&n.isAvailableOnline?(0,_.getHdWatchUrl)(g,i,{shouldWatchImmediately:!0}):void 0,onlineOriginalCaption:(null===n||void 0===n?void 0:n.originalButtonText)||void 0,afishaLink:a?y._.getUrl(N.s.BuyTicket,{filmId:e}):void 0}}function F(e){var i;return(0,f.E)(null===e||void 0===e||null===(i=e.items)||void 0===i?void 0:i.map((e=>null===e||void 0===e?void 0:e.person))).filter((e=>!!e))}function w(e){var i;return(0,f.E)(null===e||void 0===e||null===(i=e.items)||void 0===i?void 0:i.map((e=>null===e||void 0===e?void 0:e.person))).filter((e=>!!e))}var O=n(28089),P=n(37654),I=n(43879);var j=n(83605);function C(e,i){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);i&&(a=a.filter((function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable}))),n.push.apply(n,a)}return n}function L(e){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?C(Object(n),!0).forEach((function(i){(0,l.Z)(e,i,n[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))}))}return e}const D=({movieId:e})=>{var i;const n=(0,o.useSelector)(s.IZ),[l,{data:m,error:p}]=c(k.g,{variables:{movieId:e,actorsLimit:5,withUserData:n}}),f=(0,o.useSelector)(r.On),y=(0,o.useSelector)(O.u),N=(0,o.useDispatch)();(0,a.useEffect)((()=>{n&&N((0,P.F)())}),[n]);const S=null!==m&&void 0!==m&&m.movie?function({movie:e}){var i,n;const{poster:a,title:t,actors:l,directors:o}=e,d=(0,b.Xl)({typename:e.__typename,id:e.id});let r,s,v;var m,c;return"Film"!==e.__typename&&"Video"!==e.__typename||(r=e.productionYear||void 0),("TvSeries"===e.__typename||"MiniSeries"===e.__typename||"TvShow"===e.__typename)&&(s=(null===(m=e.releaseYears[0])||void 0===m?void 0:m.start)||void 0,v=(null===(c=e.releaseYears[0])||void 0===c?void 0:c.end)||void 0),{posterWithRating:{avatarBaseUrl:(null===a||void 0===a?void 0:a.avatarsUrl)||void 0,fallbackImageUrl:(null===a||void 0===a?void 0:a.fallbackUrl)||void 0,title:(null===t||void 0===t?void 0:t.russian)||(null===t||void 0===t?void 0:t.original)||void 0,url:d,rating:e.rating},mainInfo:{title:(null===t||void 0===t?void 0:t.russian)||(null===t||void 0===t?void 0:t.original)||void 0,originTitle:(null===t||void 0===t?void 0:t.russian)&&(null===t||void 0===t?void 0:t.original)||void 0,year:{productionYear:r,movieStartYear:s,movieEndYear:v},url:d},additionalInfo:{actors:F(l),directors:w(o)},buyButtons:h(e),movieInFavoriteFolder:null===(i=e.userData)||void 0===i||null===(n=i.folders)||void 0===n?void 0:n.some((e=>(null===e||void 0===e?void 0:e.id)===u.G.WatchList))}}({movie:m.movie,userData:y}):null,_=null===m||void 0===m||null===(i=m.movie)||void 0===i?void 0:i.__typename,g=(0,a.useCallback)((()=>{N((0,I.bK)({movieId:e,folderId:u.G.WatchList,operation:u.Y.Add,typeName:_||v.v.Film}))}),[N,e,_]),C=(0,a.useCallback)((()=>{N((0,I.bK)({movieId:e,folderId:u.G.WatchList,operation:u.Y.Remove,typeName:_||v.v.Film}))}),[N,e,_]);return(0,j.jsx)(d._j,{onLoad:l,isLoaded:Boolean(m||p),placeholder:(0,j.jsx)(t.LZ,{colorScheme:f}),children:S&&(0,j.jsx)(t.$b,L({userControls:{onFolderButtonToggleOn:g,onFolderButtonToggleOff:C},colorScheme:f},S))})},T={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PersonPreviewCard"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"personId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Long"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"rolesLimit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"10"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"bestMoviesLimit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"10"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"person"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"personId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"poster"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarsUrl"}},{kind:"Field",name:{kind:"Name",value:"fallbackUrl"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"originalName"}},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"rolesLimit"}}},{kind:"Argument",name:{kind:"Name",value:"isCareer"},value:{kind:"BooleanValue",value:!0}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"role"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"russian"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",alias:{kind:"Name",value:"bestFilms"},name:{kind:"Name",value:"bestMovies"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"bestMoviesLimit"}}},{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"FILM"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PersonPreviewCardBestMovies"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",alias:{kind:"Name",value:"bestSeries"},name:{kind:"Name",value:"bestMovies"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"bestMoviesLimit"}}},{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"SERIES"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PersonPreviewCardBestMovies"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"PersonPreviewCardBestMovies"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PagingList_PersonBestMovie"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"movie"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"russian"}},{kind:"Field",name:{kind:"Name",value:"original"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]};var V=n(134);function E(e){var i;return null===e||void 0===e||null===(i=e.items)||void 0===i?void 0:i.map((e=>{var i,n;return null===e||void 0===e||null===(i=e.role)||void 0===i||null===(n=i.title)||void 0===n?void 0:n.russian})).filter((e=>Boolean(e)))}function x(e){var i;return(0,f.E)(null===e||void 0===e||null===(i=e.items)||void 0===i?void 0:i.map((e=>{const i=null===e||void 0===e?void 0:e.movie;return{id:Number(null===i||void 0===i?void 0:i.id)||void 0,title:(null===i||void 0===i?void 0:i.title.russian)||(null===i||void 0===i?void 0:i.title.russian)||void 0,movieType:"Film"===(null===i||void 0===i?void 0:i.__typename)?v.v.Film:v.v.TvSeries}}))).filter((e=>!!e))||[]}function B(e,i){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);i&&(a=a.filter((function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable}))),n.push.apply(n,a)}return n}function Y(e){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?B(Object(n),!0).forEach((function(i){(0,l.Z)(e,i,n[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))}))}return e}const U=({personId:e})=>{const[i,{data:n,error:a}]=c(T,{variables:{personId:e,rolesLimit:3,bestMoviesLimit:8}}),l=(0,o.useSelector)(r.On),s=null!==n&&void 0!==n&&n.person?function({person:e}){const{id:i,poster:n,name:a,originalName:t,roles:l,bestFilms:o,bestSeries:d}=e,r=y._.getUrl(V.N.PersonPage,{id:i});return{id:i,mainInfo:{name:a||t||void 0,roles:E(l),url:r},poster:{avatarBaseUrl:(null===n||void 0===n?void 0:n.avatarsUrl)||void 0,fallbackImageUrl:(null===n||void 0===n?void 0:n.fallbackUrl)||void 0,title:a||t||void 0,url:r},additionalInfo:{bestMovies:[...x(o),...x(d)]}}}({person:n.person}):null;return(0,j.jsx)(d._j,{onLoad:i,isLoaded:Boolean(n||a),placeholder:(0,j.jsx)(t.LZ,{colorScheme:l}),children:s&&(0,j.jsx)(t.C4,Y(Y({},s),{},{colorScheme:l}))})},M=()=>(0,j.jsx)(t.xP,{moviePreviewCardRenderer:e=>(0,j.jsx)(D,{movieId:e}),personPreviewCardRenderer:e=>(0,j.jsx)(U,{personId:e})})},80829:function(e,i,n){"use strict";n.d(i,{u6:function(){return a},Gi:function(){return t},gO:function(){return l},$H:function(){return o},Ct:function(){return d}});const a="ott-fullscreen",t=[],l="kp",o="nps",d=[o]},43803:function(e){e.exports={root:"styles_root__p7NQg",icon:"styles_icon__6tiLC",down:"styles_down__V2jt8",shown:"styles_shown__a2gQE",iconWrapper:"styles_iconWrapper__VsEKC"}}}]);
//# sourceMappingURL=https://kinopoisk-frontend-internal.s3.mds.yandex.net/frontend-www/release/_next/static/chunks/419-71f509bf44888e1b.js.map