(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7153],{35343:function(e,t,i){"use strict";i.d(t,{jn:function(){return n.j},CO:function(){return r},hb:function(){return o}});function o({start:e,end:t,delimiter:i=" \u2013 "}){return e?e===t?String(e):[e,t||"..."].join(i):null}var n=i(53963);function r(e){return(null===e||void 0===e?void 0:e.russian)||(null===e||void 0===e?void 0:e.original)||void 0}},60138:function(e,t,i){"use strict";i.d(t,{RI:function(){return X},J2:function(){return R},Au:function(){return C},H1:function(){return H}});var o=i(37667),n=i(78273),r=i.n(n),c=i(38241),a=i(36007),d=i(70112);const s=10,f="popover-root",u=450,l={width:0,height:0},p=[a.Direction.Top,a.Direction.Right,a.Direction.Bottom,a.Direction.Left],v=[a.Alignment.Middle,a.Alignment.Start,a.Alignment.End];var h=i(7251),m=i.n(h),g=i(83605);const S=({children:e})=>{const{0:t,1:i}=(0,o.useState)(null);return(0,o.useEffect)((()=>{let e=document.getElementById(f);e||(e=document.createElement("div"),e.setAttribute("id",f),e.setAttribute("class",m().root),document.body.appendChild(e)),i(e)}),[]),t?(0,g.jsx)(g.Fragment,{children:e(t)}):null},z=({children:e})=>(0,g.jsx)(S,{children:t=>(0,g.jsx)(d.h_,{container:t,children:e})}),y={height:10,width:10},w={vertical:a.Direction.Bottom,horizontal:a.Direction.Right};function x({eventXCoordinate:e,preferredPosition:t,popoverWidth:i,initiatorWidth:o,offset:n}){return function({eventXCoordinate:e,preferredPosition:t,popoverWidth:i,offset:o}){return t===a.Direction.Left?e-(i+o+s)>0:e+i+o+s>document.documentElement.clientWidth}({eventXCoordinate:e,preferredPosition:t,popoverWidth:i,offset:n})?e-i-n:e+n+o}function P({eventYCoordinate:e,preferredPosition:t,popoverHeight:i,initiatorHeight:o,offset:n}){return function({eventYCoordinate:e,preferredPosition:t,popoverHeight:i,offset:o}){return t===a.Direction.Top?e-(i+o+s)<0:e+i+o+s<document.documentElement.clientHeight}({eventYCoordinate:e,preferredPosition:t,popoverHeight:i,offset:n})?e+n+window.pageYOffset+o:e-i-n+window.pageYOffset}const C=({initiatorCoordinates:{x:e,y:t},preferredPosition:i,initiatorSize:{height:o,width:n}=l,popoverSize:{height:r,width:c},offset:a})=>({coordinates:{x:x({eventXCoordinate:e,popoverWidth:c,initiatorWidth:n,preferredPosition:(null===i||void 0===i?void 0:i.horizontal)||w.horizontal,offset:(null===a||void 0===a?void 0:a.width)||0}),y:P({eventYCoordinate:t,popoverHeight:r,initiatorHeight:o,preferredPosition:(null===i||void 0===i?void 0:i.vertical)||w.vertical,offset:(null===a||void 0===a?void 0:a.height)||0})}});function E({initiatorCoordinates:e,preferredPosition:t,popoverSize:i}){return C({initiatorCoordinates:e,preferredPosition:t,popoverSize:i,offset:y})}function A(e){return e===a.Direction.Left||e===a.Direction.Right}function D(e){return e===a.Direction.Top||e===a.Direction.Bottom}function b({coordinate:e,popoverSize:t,initiatorSize:i,clientSize:o}){return e-(t/2-i/2)>0&&e+i+(t/2-i/2)<o}function O({coordinate:e,popoverSize:t,offsetFromInitiator:i}){return e-(t+i)>0}function j({coordinate:e,popoverSize:t,initiatorSize:i,clientSize:o,offsetFromInitiator:n}){return e+i+t+n<o}function F({alignment:e,coordinate:t,initiatorSize:i,popoverSize:o,offsetAlongAlignmentAxis:n,pageOffset:r=0}){return e===a.Alignment.Middle?t+i/2-o/2+r:e===a.Alignment.Start?t-(o+n)+r:e===a.Alignment.End?t+o+n+r:0}function I({coordinate:e,offsetFromInitiator:t,popoverSize:i}){return e-(i+t+s)>0}function _({coordinate:e,offsetFromInitiator:t,popoverSize:i,initiatorSize:o,clientSize:n}){return e+i+t+o+s<n}function T(e,t){let i=e;var o;return t&&(o=t,i=i.sort(((e,t)=>e===o?-1:t===o?1:0))),i}const H=({initiatorCoordinates:e,popoverSize:t,initiatorSize:i={width:0,height:0},preferredPosition:{direction:o,alignment:n}={},offset:r={},positionPriority:{direction:c=p,alignment:d=v}={},isFixed:s=!1})=>{const f=T(c,o),u=T(d,n),l=function({initiatorCoordinates:{x:e,y:t},directions:i,popoverSize:{width:o,height:n},offset:{offsetFromInitiator:r=0},initiatorSize:{width:c,height:d}}){return i.find((i=>i===a.Direction.Top?I({coordinate:t,popoverSize:n,offsetFromInitiator:r}):i===a.Direction.Bottom?_({coordinate:t,popoverSize:n,initiatorSize:d,clientSize:document.documentElement.clientHeight,offsetFromInitiator:r}):i===a.Direction.Left?I({coordinate:e,popoverSize:o,offsetFromInitiator:r}):i===a.Direction.Right&&_({coordinate:e,popoverSize:o,initiatorSize:c,clientSize:document.documentElement.clientWidth,offsetFromInitiator:r})))||i[0]}({initiatorCoordinates:e,popoverSize:t,initiatorSize:i,directions:f,offset:r}),h=function({initiatorCoordinates:{x:e,y:t},alignments:i,direction:o,popoverSize:{width:n,height:r},offset:{offsetFromInitiator:c=0},initiatorSize:{width:d,height:s}}){return i.find((i=>{if(D(o)){if(i===a.Alignment.Middle)return b({popoverSize:n,initiatorSize:d,coordinate:e,clientSize:document.documentElement.clientWidth});if(i===a.Alignment.Start)return O({coordinate:e,popoverSize:n,offsetFromInitiator:c});if(i===a.Alignment.End)return j({popoverSize:n,initiatorSize:d,coordinate:e,clientSize:document.documentElement.clientWidth,offsetFromInitiator:c})}if(A(o)){if(i===a.Alignment.Middle)return b({popoverSize:r,initiatorSize:s,coordinate:t,clientSize:document.documentElement.clientHeight});if(i===a.Alignment.Start)return O({coordinate:t,popoverSize:r,offsetFromInitiator:c});if(i===a.Alignment.End)return j({popoverSize:r,initiatorSize:s,coordinate:t,clientSize:document.documentElement.clientHeight,offsetFromInitiator:c})}return!1}))||i[0]}({initiatorCoordinates:e,popoverSize:t,initiatorSize:i,alignments:u,offset:r,direction:l}),m=function({initiatorCoordinates:{x:e,y:t},alignment:i,direction:o,popoverSize:{width:n,height:r},offset:{offsetFromInitiator:c=0,offsetAlongAlignmentAxis:d=0},initiatorSize:{width:s,height:f},isFixed:u}){const l={x:0,y:0},p=u?0:window.pageYOffset;return D(o)&&(l.x=F({coordinate:e,popoverSize:n,initiatorSize:s,offsetAlongAlignmentAxis:d,alignment:i}),o===a.Direction.Top&&(l.y=t-(r+c)+p),o===a.Direction.Bottom&&(l.y=t+f+c+p)),A(o)&&(l.y=F({coordinate:t,popoverSize:r,initiatorSize:f,offsetAlongAlignmentAxis:d,alignment:i,pageOffset:p}),o===a.Direction.Left&&(l.x=e-(n+c)),o===a.Direction.Right&&(l.x=e+s+c)),l}({initiatorCoordinates:e,popoverSize:t,initiatorSize:i,alignment:h,offset:r,direction:l,isFixed:s});return{coordinates:m,direction:l,alignment:h}};var W=i(98374),k=i.n(W);const L={x:0,y:0},R=({children:e,isOpened:t=!0,initiatorCoordinates:i=L,calculatePositionStrategy:n=E,onEnterToPopover:d,onLeavePopover:s,isFixed:f,renderPopoverContent:u})=>{const{0:l,1:p}=(0,o.useState)(L),{0:v,1:h}=(0,o.useState)(a.Direction.Top),{0:m,1:S}=(0,o.useState)(a.Alignment.Middle),{0:y,1:w}=(0,o.useState)(!1),x=(0,o.useRef)(null);return(0,o.useEffect)((()=>{if(t&&x.current){const{offsetHeight:e,offsetWidth:t}=x.current,{coordinates:o,direction:r,alignment:c}=n({initiatorCoordinates:i,popoverSize:{height:e,width:t}});p(o),r&&h(r),c&&S(c),w(!0)}}),[t,i,x]),(0,o.useEffect)((()=>{t||w(!1)}),[t]),(0,c.bD)({shouldWatchChanges:y,delay:500,leading:!0,callback:()=>y&&s&&s()}),(0,g.jsx)(z,{children:t?(0,g.jsx)("div",{ref:x,onMouseEnter:d,onMouseLeave:s,className:r()(k().popover,{[k().popoverVisible]:y,[k().fixedPopover]:f}),style:{left:l.x,top:l.y},"data-tid":"1deec48e",children:u?u({direction:v,alignment:m}):e}):null})};var M=i(72310),Y=i(1681);const B=["startPosition","stateChangeDelay"];function V(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}const X=e=>{let{startPosition:t,stateChangeDelay:i=u}=e,n=(0,Y.Z)(e,B);const{0:r,1:c}=(0,o.useState)(!1),a=(0,o.useRef)(!1),{0:d,1:s}=(0,o.useState)(void 0),{0:f,1:l}=(0,o.useState)(void 0),{0:p,1:v}=(0,o.useState)({x:0,y:0});(0,o.useEffect)((()=>{t&&(d&&(clearTimeout(d),s(void 0),c(!1)),l(window.setTimeout((()=>{c(!0),v({x:t.x,y:t.y})}),200)))}),[t]),(0,o.useEffect)((()=>{t||(f&&(clearTimeout(f),l(void 0)),!r||a.current||d||s(window.setTimeout((()=>!a.current&&c(!1)),i)))}),[t,a.current,r]),(0,o.useEffect)((()=>()=>{f&&clearTimeout(f),d&&clearTimeout(d)}),[f,d]);const h=(0,o.useCallback)((()=>{a.current=!0,d&&(clearTimeout(d),s(void 0))}),[d]),m=(0,o.useCallback)((()=>{a.current=!1,s(window.setTimeout((()=>c(!1)),i))}),[]);return(0,g.jsx)(R,function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?V(Object(i),!0).forEach((function(t){(0,M.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):V(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({onEnterToPopover:h,onLeavePopover:m,initiatorCoordinates:p,isOpened:r},n))}},24613:function(e,t,i){"use strict";i.d(t,{z:function(){return o.z}});var o=i(33014)},7251:function(e){e.exports={root:"styles_root__yoqWE"}},98374:function(e){e.exports={popover:"styles_popover__9ZEGA",fixedPopover:"styles_fixedPopover__QgV3E",popoverVisible:"styles_popoverVisible__U5HJk"}}}]);
//# sourceMappingURL=https://kinopoisk-frontend-internal.s3.mds.yandex.net/frontend-www/release/_next/static/chunks/7153-260853996f541639.js.map