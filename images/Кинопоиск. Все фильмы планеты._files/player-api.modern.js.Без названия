/*! For license information please see player-api.modern.js.LICENSE.txt */
(()=>{function e(t){var i=r[t];if(void 0!==i)return i.exports;var a=r[t]={id:t,exports:{}};return n[t].call(a.exports,a,a.exports,e),a.exports}var t,n={856:(e,t,n)=>{(t=e.exports=n(870)(!1)).push([e.id,"@keyframes _1f86Je8{0%{transform:rotate(0deg)}to{transform:rotate(360deg)}}._3dwjosp{position:absolute;top:50%;left:50%;pointer-events:none}._2iJDT4A{position:absolute;top:-19px;left:-19px;width:38px;height:38px;animation-name:_1f86Je8;animation-duration:1s;animation-iteration-count:infinite;animation-timing-function:linear}",""]),t.locals={spinner:"_3dwjosp",spinner__svg:"_2iJDT4A",spinner_animation:"_1f86Je8"}},5654:(e,t,n)=>{(e.exports=n(870)(!1)).push([e.id,"yaplayertag,yaplayertag:before,yaplayertag:after,yaplayertag *,yaplayertag :before,yaplayertag :after{hyphens:manual;font-size:inherit;color:inherit;background:0 0;border:0;border-radius:0;border-spacing:0;border-collapse:collapse;box-sizing:content-box;clear:none;float:none;font-variant:normal;font-weight:inherit;letter-spacing:normal;line-height:normal;margin:0;max-height:none;max-width:none;min-height:0;min-width:0;outline:0;padding:0;position:static;text-align:left;text-decoration:none;text-indent:0;text-transform:none;vertical-align:baseline;visibility:inherit;word-spacing:normal}",""])},7792:e=>{e.exports='<svg viewBox="0 0 29 29" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.5 1.5a13 13 0 1 0 12.898 14.63" stroke="#fff" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"></path></svg>'},310:e=>{e.exports='<svg viewBox="0 0 18 18"><path d="M14.684 3.292Q17.053 5.661 17.053 9q0 3.34-2.369 5.708Q12.34 17.053 9 17.053V18q3.742 0 6.371-2.629Q18 12.742 18 9q0-3.718-2.629-6.371Q12.742 0 9 0v.947q3.34 0 5.684 2.345z"></path></svg>'},1247:(e,t,n)=>{"use strict";function r(e){void 0===e&&(e=window);try{return(e.navigator||{}).userAgent||""}catch(t){return""}}n.d(t,{i:()=>r})},2988:(e,t,n)=>{"use strict";n.d(t,{N:()=>i});const r=n(6386),i=function(e){void 0===e&&(e=window);const t=r(e);return"boolean"===typeof t?-1:t}},6487:(e,t,n)=>{"use strict";function r(e){void 0===e&&(e=window);const t=e.navigator.userAgent.toLowerCase();return/ipad|iphone|ipod/.test(t)&&!e.MSStream&&!function(e){void 0===e&&(e=window);return e.navigator.userAgent.indexOf("UCBrowser")>-1}(e)}n.d(t,{P:()=>r})},1585:(e,t,n)=>{"use strict";n.d(t,{B:()=>i});var r=n(1247);const i=function(e){void 0===e&&(e=window);const t=(0,r.i)(e).toLowerCase();if(t.indexOf("android")>-1)return!1;const n=t.replace(/\(.+?\)/gi,"").split(" ").map(e=>e.trim().split("/")[0]).filter(e=>e&&"mobile"!==e);return 4===n.length&&"mozilla"===n[0]&&"applewebkit"===n[1]&&"version"===n[2]&&"safari"===n[3]}},3211:(e,t,n)=>{"use strict";n.d(t,{$:()=>o});var r=n(5940),i=n(6487),a=n(1585);const o=(void 0===s&&(s=window),(0,a.B)(s)||(0,i.P)(s)||function(e){return void 0===e&&(e=window),/Apple/.test(e.navigator.vendor)&&(0,r.b)(e)}(s));var s},5940:(e,t,n)=>{"use strict";function r(e){return function(e){return Boolean(e.PointerEvent)}(e)&&function(e){const t=e.navigator||{},{msMaxTouchPoints:n,maxTouchPoints:r}=t;return n||r||0}(e)>0&&!function(e){void 0===e&&(e=window);return(0,o.N)(e)>11}(e)}function i(e,t){if(!(0,l.m)(e.matchMedia))return!1;const n=e.matchMedia(t);return(0,c.K)(n)&&Boolean(n.matches)}function a(e){return void 0===e&&(e=window),r(e)||function(e){return i(e,d)}(e)||function(e){return i(e,u)}(e)||function(e){const{DocumentTouch:t}=e;return Boolean(t)&&e.document instanceof t}(e)||function(e){return"ontouchstart"in e}(e)}n.d(t,{b:()=>a});var o=n(2988);const s=["","-webkit-","-ms-","-moz-","-o-"];var l=n(6351),c=n(3770);const d=s.map(e=>"("+e+"any-pointer:coarse)").join(","),u=s.map(e=>"("+e+"touch-enabled)").join(",")},4780:(e,t,n)=>{"use strict";n.d(t,{i:()=>r});const r="playerskin-native-ui-mode"},3126:(e,t,n)=>{"use strict";function r(e,t,n){void 0===n&&(n=window);const r=(0,i.b)(n),s=t((0,o.c)(e,r));if(void 0!==s)return console&&(0,a.m)(console.warn)&&console.warn("using "+e+"="+s+" from query"),s;const l=t(function(e,t){try{const n=e.localStorage.getItem(t);if(!n)return;return n}catch(n){return}}(n,e));return void 0!==l?(console&&(0,a.m)(console.warn)&&console.warn("using "+e+"="+l+" from localStorage"),l):void 0}n.d(t,{O:()=>r});var i=n(2239),a=n(6351),o=n(7339)},55:(e,t,n)=>{"use strict";function r(){}n.d(t,{Z:()=>r})},3545:(e,t,n)=>{"use strict";function r(){return o}n.d(t,{p:()=>r});var i=n(2439),a=n(9738);let o=(0,i.s)(document);(0,a.Y)(document,e=>{e||(o=e)})},4519:(e,t,n)=>{"use strict";function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(){return c||(!function(){try{l=encodeURIComponent(JSON.stringify(r({},o,s)))}catch(e){}}(),c=!0),l}function a(e){return void 0===e||void 0===e.additional?i():encodeURIComponent(JSON.stringify(r({},o,s,e.additional)))}n.d(t,{B6:()=>a});let o={},s={},l="",c=!1},5865:(e,t,n)=>{"use strict";function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function a(e){(0,s.Y)(()=>{window.Ya.Rum.time(e)})}function o(e,t){void 0===t&&(t={}),(0,c.p)()&&(0,s.Y)(()=>{const n=i(t,d);window.Ya.Rum.timeEnd(e,r({},n,{"-additional":(0,l.B6)(t)}))})}n.d(t,{iW:()=>a,vG:()=>o});var s=n(2818),l=n(4519),c=n(3545);const d=["additional"]},2142:e=>{"use strict";function t(e){function t(e){return"constructor"!==e&&"prototype"!==e&&"__proto__"!==e}function r(e){return"object"===typeof e&&null!==e&&!(e instanceof RegExp)&&!(e instanceof Date)}function i(e){return r(e)?Array.isArray(e)?function(e){let t=0;const n=e.length,r=new Array(n);for(t=0;t<n;++t)r[t]=i(e[t]);return r}(e):function(e){const r={};if(l&&Object.getPrototypeOf(e)!==n)return l(e);const a=s(e);let o,c,d;for(o=0,c=a.length;o<c;++o)t(d=a[o])&&(r[d]=i(e[d]));return r}(e):e}function a(e,n){const r=Array.isArray(n),o=Array.isArray(e);return"object"!==typeof(l=n)||null===l?n:c(e)?i(n):r&&o?d(e,n):r!==o?i(n):function(e,n){const r={},o=s(e),l=s(n);let c,d,u;for(c=0,d=o.length;c<d;++c)t(u=o[c])&&-1===l.indexOf(u)&&(r[u]=i(e[u]));for(c=0,d=l.length;c<d;++c)t(u=l[c])&&(u in e&&(-1!==o.indexOf(u)&&(r[u]=a(e[u],n[u])),1)||(r[u]=i(n[u])));return r}(e,n);var l}const o=Object.prototype.propertyIsEnumerable,s=e&&e.symbols?function(e){const t=Object.keys(e),n=Object.getOwnPropertySymbols(e);for(let r=0,i=n.length;r<i;++r)o.call(e,n[r])&&t.push(n[r]);return t}:Object.keys,l="function"===typeof(null==e?void 0:e.cloneProtoObject)?e.cloneProtoObject:void 0,c="undefined"!==typeof Buffer?e=>"object"!==typeof e||null===e||e instanceof RegExp||e instanceof Date||e instanceof Buffer:e=>"object"!==typeof e||null===e||e instanceof RegExp||e instanceof Date,d=e&&"function"===typeof e.mergeArray?e.mergeArray({clone:i,deepmerge:a,getKeys:s,isMergeableObject:r}):function(e,t){const n=e.length,r=t.length;let a=0;const o=new Array(n+r);for(a=0;a<n;++a)o[a]=i(e[a]);for(a=0;a<r;++a)o[a+n]=i(t[a]);return o};return e&&e.all?function(){switch(arguments.length){case 0:return{};case 1:return i(arguments[0]);case 2:return a(arguments[0],arguments[1])}let e;for(let t=0,n=arguments.length;t<n;++t)e=a(e,arguments[t]);return e}:a}const n=Object.getPrototypeOf({});e.exports=t,e.exports.default=t,e.exports.deepmerge=t},5983:e=>{e.exports=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){return e.__proto__=t,e}:function(e,t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n]);return e})},2447:(e,t,n)=>{"use strict";n.d(t,{M:()=>o});const r=!(0,n(5638).E)(Math.random)||Math.random()===Math.random();var i=n(7293);let a=Date.now()*(0,i.no)()%2147483647;const o=r?function(){return a=16807*a%2147483647,(a-1)/2147483646}:function(){return Math.random()}},5638:(e,t,n)=>{"use strict";function r(e){if(!e||!e.toString)return!1;const t=e.toString();return/\[native code\]/.test(t)||/\/\* source code not available \*\//.test(t)}n.d(t,{E:()=>r})},984:(e,t,n)=>{"use strict";function r(e,t){let n=e[t];if(!(0,i.E)(n)){const i=n;try{delete e[t];const r=e[t];"function"===typeof r&&(n=r),e[t]=i}catch(r){}}return n}n.d(t,{C:()=>r});var i=n(5638)},141:(e,t,n)=>{"use strict";function r(e,t,n){for(const r in e)(0,i.n)(e,r)&&t.call(n,e[r],r,e)}n.d(t,{M:()=>r});var i=n(8258)},8258:(e,t,n)=>{"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}n.d(t,{n:()=>r})},3770:(e,t,n)=>{"use strict";function r(e){const t=typeof e;return Boolean(e)&&("object"===t||"function"===t)}n.d(t,{K:()=>r})},9183:(e,t,n)=>{"use strict";n.d(t,{m:()=>i});var r=n(6351);const i=Date&&(0,r.m)(Date.now)?()=>Date.now():()=>(new Date).getTime()},3351:(e,t,n)=>{"use strict";n.d(t,{k:()=>r});const r=e=>"hidden"in e?"hidden":"webkitHidden"in e?"webkitHidden":void 0},2439:(e,t,n)=>{"use strict";function r(e,t){void 0===t&&(t=!0);const n=(0,i.k)(e);if(!n)return t;return!e[n]}n.d(t,{s:()=>r});var i=n(3351)},9738:(e,t,n)=>{"use strict";function r(e,t){const n=function(e){const t=(0,s.k)(e);if(t)return t.replace(/hidden/i,"visibilitychange")}(e);return n?(0,a.O)(e,n,()=>{t((0,o.s)(e))}):i.Z}n.d(t,{Y:()=>r});var i=n(6652),a=n(3945),o=n(2439),s=n(3351)},3945:(e,t,n)=>{"use strict";function r(e,t,n,r){const o=function(e){let t=!1,n=!1,r=!1;return!0===e?t=!0:"object"===typeof e&&(t=Boolean(e.capture),n=Boolean(e.passive),r=Boolean(e.once)),{capture:t,passive:n,once:r}}(r),s=a.FF?o:o.capture,l=o.once&&!a.vE?function(e){c(),n.call(this,e)}:n,c=()=>{(0,i.f)(e,t,l,s)};return(0,i.h)(e,t,l,s),c}n.d(t,{O:()=>r});var i=n(144),a=n(4679)},3424:(e,t,n)=>{"use strict";n.d(t,{T:()=>i});var r=n(2239);const i=e=>{const t=[];for(;e;)try{if((0,r.b)(e),t.push(e),e.parent===e)break;e=e.parent}catch(n){break}return t}},144:(e,t,n)=>{"use strict";n.d(t,{f:()=>a,h:()=>i});var r=n(984);let i=function(e,t,n){e.attachEvent("on"+t,n)},a=function(e,t,n){e.detachEvent("on"+t,n)};(0,r.C)(document,"addEventListener")&&(0,r.C)(document,"removeEventListener")&&(i=function(e,t,n,i){const a=e&&(0,r.C)(e,"addEventListener");a&&a.call(e,t,n,i)},a=function(e,t,n,i){const a=e&&(0,r.C)(e,"removeEventListener");a&&a.call(e,t,n,i)})},4679:(e,t,n)=>{"use strict";n.d(t,{FF:()=>s,vE:()=>a,wI:()=>o});var r=n(6652),i=n(144);let a=!1,o=!1,s=!1;try{if(function(e){void 0===e&&(e=window);const t=e.Object;try{const e={};return t.defineProperty(e,"sentinel",{}),"sentinel"in e}catch(n){return!1}}()){const e=document.createElement("div"),t={};Object.defineProperty(t,"once",{get:()=>a=!0}),Object.defineProperty(t,"passive",{get:()=>o=!0}),Object.defineProperty(t,"capture",{get:()=>s=!0}),(0,i.h)(e,"click",r.Z,t)}}catch(l){}},5386:(e,t,n)=>{"use strict";function r(e){let t=function(){t=()=>n;const n=e.apply(this,arguments);return n};return function(){return t.apply(this,arguments)}}n.d(t,{I:()=>r})},8194:(e,t,n)=>{"use strict";function r(e){const t=e.document;let n=t.getElementsByTagName("head")[0];return n||(n=t.createElement("head"),t.documentElement.appendChild(n)),n}n.d(t,{c:()=>r})},8062:(e,t,n)=>{"use strict";n.d(t,{M:()=>a});const r={}.toString,i=/\[object (\w+)\]/,a=e=>{const t=r.call(e);if(!t)return null;const n=t.match(i);if(!n)return null;const a=n[1];return a||null}},2646:(e,t,n)=>{"use strict";function r(e){const t=(0,a.A)(e.documentElement).map(e=>e.ownerDocument);return t.unshift(e),t.map(e=>({location:(0,i.b)(e.defaultView),referrer:e.referrer}))}n.d(t,{F:()=>r});var i=n(2239),a=n(6566)},9878:(e,t,n)=>{"use strict";function r(e){let t="",n="";if(e){(0,i.F)(e).reverse().forEach(e=>{let{location:r,referrer:i}=e;t=t||r,n=n||i})}return{location:t,referrer:n}}n.d(t,{w:()=>r});var i=n(2646)},2239:(e,t,n)=>{"use strict";function r(e){if(e&&e.location){const{location:t}=e;return"function"===typeof t.toString?t.toString():t.href||""}return""}n.d(t,{b:()=>r})},6838:(e,t,n)=>{"use strict";function r(e){let t="";for(let n=0;n<e;n++)t+=(16*(0,i.M)()|0).toString(16);return t}n.d(t,{a:()=>r});var i=n(2447)},6377:(e,t,n)=>{"use strict";n.d(t,{V:()=>i});var r=n(8062);const i=e=>e instanceof Error||"Error"===(0,r.M)(e)},6351:(e,t,n)=>{"use strict";function r(e){return"function"===typeof e||"Function"===(0,i.M)(e)}n.d(t,{m:()=>r});var i=n(8062)},874:(e,t,n)=>{"use strict";function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e){const{method:t,url:n,async:c=!0,data:d,responseType:u="text",onBeforeSend:h=o.Z,onRetry:f=o.Z,checkStatus:p=(e=>l===e),headers:m={},xhrConstructor:g=XMLHttpRequest,retries:y=0,timeout:_=0,withCredentials:v,onAbort:E,onSetup:S}=e,R=e.onSuccess?(0,a.I)(e.onSuccess):o.Z,A=e.onError?(0,a.I)(e.onError):o.Z;let T,b=!1,O=0,C=e=>{b=!0,C=o.Z,T=e,P(new Error("Abort request")),"function"===typeof E&&E(e)};const P=t=>{I.onerror=null,I.onreadystatechange=null,O&&clearTimeout(O);if(O&&4!==I.readyState||b)try{I.abort()}catch(t){}if(!b)if(y>0){const n=f(t,I);if("boolean"!==typeof n||Boolean(n)||C(),b)return;i(r({},e,{onSetup:e=>{let{abort:t}=e;C=e=>t(e),b&&t(T)},retries:y-1}))}else C=o.Z,A(t,I)},I=new g;try{I.open(t,n,c)}catch(w){return void P(w)}if(I.responseType=u,I.withCredentials=Boolean(v),(0,s.M)(m,(e,t)=>{try{I.setRequestHeader(t,e)}catch(w){}}),_>0&&isFinite(_)&&(O=window.setTimeout(()=>{P(new Error("Request timeout, "+n))},_)),I.onerror=P,I.onreadystatechange=()=>{if(4===I.readyState){const{status:e}=I;p(e)?(C=o.Z,clearTimeout(O),R(I)):P(new Error("Invalid request status "+e+", "+n))}},("function"!==typeof S||(S({abort:e=>C(e)}),!b))&&(h(I,e),!b))try{I.send(d)}catch(w){P(w)}}n.d(t,{W:()=>i});var a=n(5386),o=n(6652),s=n(141);const l=200},6652:(e,t,n)=>{"use strict";function r(){}n.d(t,{Z:()=>r})},6566:(e,t,n)=>{"use strict";function r(e,t){if(void 0===t&&(t=!0),i.$&&t)return[];{const t=[];let r=e;for(;;)try{if(r=r.ownerDocument.defaultView.frameElement,!r)return t;t.push(r)}catch(n){return t}}}n.d(t,{A:()=>r});var i=n(3211)},7293:(e,t,n)=>{"use strict";n.d(t,{no:()=>c});var r=n(9183),i=n(6351);const a="undefined"===typeof window?void 0:window.performance,o=a&&(0,i.m)(a.now),s=a&&a.timing&&a.timing.navigationStart?a.timing.navigationStart:(0,r.m)();let l=0;const c=o?()=>a.now():()=>(()=>{const e=(0,r.m)()-s;return l=Math.max(e,l),l})()},6794:(e,t,n)=>{"use strict";n.d(t,{j:()=>r});const r="utf-8"},1390:(e,t,n)=>{"use strict";n.d(t,{d:()=>i});var r=n(5638);const i=e=>(0,r.E)(e.navigator.sendBeacon)},8833:(e,t,n)=>{"use strict";function r(e){return"string"===typeof e}n.d(t,{H:()=>r})},8976:(e,t,n)=>{"use strict";n.d(t,{Y:()=>a});var r=n(1390),i=n(3357);const a=e=>(0,i.v)(e)&&(0,r.d)(e)},3357:(e,t,n)=>{"use strict";n.d(t,{v:()=>r});const r=e=>{try{if("noModule"in e.HTMLScriptElement.prototype)return!0}catch(t){}return!1}},2818:(e,t,n)=>{"use strict";function r(e,t){try{return e()}catch(n){"function"===typeof t&&t(n)}}n.d(t,{Y:()=>r})},7339:(e,t,n)=>{"use strict";function r(e,t){const n=new RegExp("[?&]"+e+"=*([^&#]*)","g");let r=null,i=null;for(;i=n.exec(t);)r=i;return r&&"string"===typeof r[1]?decodeURIComponent(r[1]):void 0}n.d(t,{c:()=>r})},7572:(e,t,n)=>{"use strict";n.d(t,{M:()=>r});const r="__ADB_CONFIG__"},2709:(e,t,n)=>{"use strict";n.d(t,{M:()=>s});var r=n(3475),i=n(4215),a=n(7572);const o=(0,i.K)(a.M)&&a.M.fn&&(0,r.m)(a.M.fn.encodeUrl)?a.M.fn.encodeUrl:void 0,s=void 0===o?void 0:e=>o(e)},8427:(e,t,n)=>{"use strict";n.d(t,{x:()=>s});var r=n(3424),i=n(3475),a=n(8199),o=n(2709);const s=e=>{if(o.M)return o.M;const t=(0,r.T)(e);for(;t.length;){const e=t.pop();if(!e)continue;const n=(0,a.U)(e,"ya.videoAd.encodeUrl");if((0,i.m)(n))return n}}},3475:(e,t,n)=>{"use strict";function r(e){return"function"===typeof e}n.d(t,{m:()=>r})},4215:(e,t,n)=>{"use strict";function r(e){const t=typeof e;return Boolean(e)&&("object"===t||"function"===t)}n.d(t,{K:()=>r})},8199:(e,t,n)=>{"use strict";n.d(t,{U:()=>i});var r=n(4215);const i=(e,t)=>{for(const n of t.split(".")){if(!(0,r.K)(e)){e=void 0;break}e=e[n]}return e}},2868:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HAS_URL=void 0,t.HAS_URL=(()=>{try{return new URL("https://yandex.ru"),!0}catch(e){return!1}})()},7343:function(e,t,n){"use strict";function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.CSPLogger=void 0;const a=n(2868),o=n(1025);t.CSPLogger=class{constructor(e,t){void 0===t&&(t={});var{url:n="https://csp.yandex.net/csp"}=e,a=i(e,["url"]);this.additional=t,this.cspEventListener=e=>{try{const t=new URL(e.blockedURI);if(this.url===t.origin+t.pathname&&"1"===t.searchParams.get("js_client"))return this.unsubscribe(),void(console.warn&&console.warn("URL for logging CSP was blocked"))}catch(a){}const t={"csp-report":{"blocked-uri":e.blockedURI,"column-number":e.columnNumber,disposition:e.disposition,"document-uri":e.documentURI,"effective-directive":e.effectiveDirective,"line-number":e.lineNumber,"original-policy":e.originalPolicy,referrer:e.referrer,"script-sample":e.sample,"status-code":e.statusCode,"violated-directive":e.violatedDirective}},n=JSON.stringify(t),i=this.addParamsToUrl(this.url,r(r(r({},this.config),this.additional),{js_client:"1"}));o.sendLog(i,n)},this.url=n,this.config=a}setAdditional(e){this.additional=r(r({},this.additional),e)}addParamsToUrl(e,t){const n=new URL(e);for(const r in t){const e=t[r];e&&"string"===typeof e&&t.hasOwnProperty(r)&&n.searchParams.append(r,e)}return n.toString()}subscribe(e){void 0===e&&(e=document),"onsecuritypolicyviolation"in document&&a.HAS_URL&&e.addEventListener("securitypolicyviolation",this.cspEventListener)}unsubscribe(e){void 0===e&&(e=document),e.removeEventListener("securitypolicyviolation",this.cspEventListener)}}},1025:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendLog=void 0,t.sendLog=function(e,t){if(navigator.sendBeacon&&navigator.sendBeacon(e,t))return;const n=new XMLHttpRequest;n.open("POST",e),n.send(t)}},3106:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.identity=void 0,t.identity=function(e){return e}},7881:(e,t,n)=>{"use strict";var r=n(3850);n.o(r,"toBps")&&n.d(t,{toBps:function(){return r.toBps}}),n.o(r,"toSeconds")&&n.d(t,{toSeconds:function(){return r.toSeconds}});var i=n(4423);n.o(i,"toBps")&&n.d(t,{toBps:function(){return i.toBps}}),n.o(i,"toSeconds")&&n.d(t,{toSeconds:function(){return i.toSeconds}});n(2968)},2968:(e,t)=>{"use strict"},6285:(e,t,n)=>{"use strict";function r(e){return Math.max(e,0)}function i(e){return Math.floor(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.toUnsignedInt=t.toUnsignedFloat=t.toInt=t.toUnsigned=t.toFloat=void 0;const a=n(3106);t.toFloat=a.identity,t.toUnsigned=r,t.toInt=i,t.toUnsignedFloat=function(e){return r((0,t.toFloat)(e))},t.toUnsignedInt=function(e){return r(i(e))}},3849:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toTimestamp=t.toMilliseconds=t.toMbps=t.toMegaBitsPerSeconds=t.toKbps=t.toKiloBitsPerSeconds=t.toBps=t.toBitsPerSeconds=t.toMegabits=t.toKilobits=void 0;const r=n(3106),i=n(2008);t.toKilobits=r.identity,t.toMegabits=r.identity,t.toBitsPerSeconds=r.identity,t.toBps=t.toBitsPerSeconds,t.toKiloBitsPerSeconds=r.identity,t.toKbps=t.toKiloBitsPerSeconds,t.toMegaBitsPerSeconds=r.identity,t.toMbps=t.toMegaBitsPerSeconds,t.toMilliseconds=r.identity,t.toTimestamp=i.toMoment},2008:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toPixels=t.toPerSeconds=t.toPercent=t.toPortion=t.toDays=t.toHours=t.toMinutes=t.toSeconds=t.toDuration=t.toMoment=t.toBytes=t.toBits=void 0;const r=n(3106);t.toBits=r.identity,t.toBytes=r.identity,t.toMoment=r.identity,t.toDuration=r.identity,t.toSeconds=r.identity,t.toMinutes=r.identity,t.toHours=r.identity,t.toDays=r.identity,t.toPortion=r.identity,t.toPercent=r.identity,t.toPerSeconds=r.identity,t.toPixels=r.identity},4423:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(6285),t),i(n(2008),t),i(n(3849),t)},963:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2846:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4957:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3850:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(963),t),i(n(4957),t),i(n(2846),t)},1299:(e,t)=>{"use strict";function n(e,t){try{return t(e)}catch(n){return e}}t.parse=function(e,t){if("string"!==typeof e)throw new TypeError("argument str must be a string");for(var i={},o=t||{},s=e.split(a),l=o.decode||r,c=0;c<s.length;c++){var d=s[c],u=d.indexOf("=");if(!(u<0)){var h=d.substr(0,u).trim(),f=d.substr(++u,d.length).trim();'"'==f[0]&&(f=f.slice(1,-1)),void 0==i[h]&&(i[h]=n(f,l))}}return i},t.serialize=function(e,t,n){var r=n||{},a=r.encode||i;if("function"!==typeof a)throw new TypeError("option encode is invalid");if(!o.test(e))throw new TypeError("argument name is invalid");var s=a(t);if(s&&!o.test(s))throw new TypeError("argument val is invalid");var l=e+"="+s;if(null!=r.maxAge){var c=r.maxAge-0;if(isNaN(c))throw new Error("maxAge should be a Number");l+="; Max-Age="+Math.floor(c)}if(r.domain){if(!o.test(r.domain))throw new TypeError("option domain is invalid");l+="; Domain="+r.domain}if(r.path){if(!o.test(r.path))throw new TypeError("option path is invalid");l+="; Path="+r.path}if(r.expires){if("function"!==typeof r.expires.toUTCString)throw new TypeError("option expires is invalid");l+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(l+="; HttpOnly"),r.secure&&(l+="; Secure"),r.sameSite)switch("string"===typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"strict":l+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}return l};var r=decodeURIComponent,i=encodeURIComponent,a=/; */,o=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/},870:e=>{function t(e,t){var n,r=e[1]||"",i=e[3];if(!i)return r;if(t&&"function"===typeof btoa){var a=(n=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),o=i.sources.map((function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"}));return[r].concat(o).concat([a]).join("\n")}return[r].join("\n")}e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var r=t(n,e);return n[2]?"@media "+n[2]+"{"+r+"}":r})).join("")},n.i=function(e,t){"string"===typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var a=this[i][0];"number"===typeof a&&(r[a]=!0)}for(i=0;i<e.length;i++){var o=e[i];"number"===typeof o[0]&&r[o[0]]||(t&&!o[2]?o[2]=t:t&&(o[2]="("+o[2]+") and ("+t+")"),n.push(o))}},n}},6386:e=>{e.exports=function(e){e||(e=window);var t=e.navigator.userAgent,n=t.indexOf("MSIE ");if(n>0)return parseInt(t.substring(n+5,t.indexOf(".",n)),10);if(t.indexOf("Trident/")>0){var r=t.indexOf("rv:");return parseInt(t.substring(r+3,t.indexOf(".",r)),10)}var i=t.indexOf("Edge/");return i>0&&parseInt(t.substring(i+5,t.indexOf(".",i)),10)}},6048:e=>{"use strict";var t=Array.isArray,n=Object.keys,r=Object.prototype.hasOwnProperty;e.exports=function e(i,a){if(i===a)return!0;if(i&&a&&"object"==typeof i&&"object"==typeof a){var o,s,l,c=t(i),d=t(a);if(c&&d){if((s=i.length)!=a.length)return!1;for(o=s;0!==o--;)if(!e(i[o],a[o]))return!1;return!0}if(c!=d)return!1;var u=i instanceof Date,h=a instanceof Date;if(u!=h)return!1;if(u&&h)return i.getTime()==a.getTime();var f=i instanceof RegExp,p=a instanceof RegExp;if(f!=p)return!1;if(f&&p)return i.toString()==a.toString();var m=n(i);if((s=m.length)!==n(a).length)return!1;for(o=s;0!==o--;)if(!r.call(a,m[o]))return!1;for(o=s;0!==o--;)if(!e(i[l=m[o]],a[l]))return!1;return!0}return i!==i&&a!==a}},502:(e,t,n)=>{"use strict";function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.hasCookies=function(){var e=new d;try{e.setItem("__test","1");var t=e.getItem("__test");return e.removeItem("__test"),"1"===t}catch(n){return!1}};var o,s=n(1299),l=(o=s)&&o.__esModule?o:{default:o},c="lS_",d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.cookieOptions=r({path:"/"},t),c=t.prefix||c}return a(e,[{key:"getItem",value:function(e){var t=l.default.parse(document.cookie);return t&&t.hasOwnProperty(c+e)?t[c+e]:null}},{key:"setItem",value:function(e,t){return document.cookie=l.default.serialize(c+e,t,this.cookieOptions),t}},{key:"removeItem",value:function(e){var t=r({},this.cookieOptions,{maxAge:-1});return document.cookie=l.default.serialize(c+e,"",t),null}},{key:"clear",value:function(){var e=l.default.parse(document.cookie);for(var t in e)0===t.indexOf(c)&&this.removeItem(t.substr(c.length));return null}}]),e}();t.default=d},4585:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data={}}return n(e,[{key:"getItem",value:function(e){return this._data.hasOwnProperty(e)?this._data[e]:void 0}},{key:"setItem",value:function(e,t){return this._data[e]=String(t)}},{key:"removeItem",value:function(e){return delete this._data[e]}},{key:"clear",value:function(){return this._data={}}}]),e}();t.default=r},2741:(e,t,n)=>{"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=r(n(1402)),a=r(n(502)),o=r(n(4585)),s=null;s=(0,i.default)("localStorage")?window.localStorage:(0,i.default)("sessionStorage")?window.sessionStorage:(0,i.default)("cookieStorage")?new a.default:new o.default,t.ZP=s,i.default,a.default,o.default},1402:(e,t,n)=>{"use strict";function r(e){try{var t=window[e];return t.setItem("__test","1"),t.removeItem("__test"),!0}catch(n){return!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"localStorage",t=String(e).replace(/storage$/i,"").toLowerCase();if("local"===t)return r("localStorage");if("session"===t)return r("sessionStorage");if("cookie"===t)return(0,i.hasCookies)();if("memory"===t)return!0;throw new Error("Storage method `"+e+"` is not available.\n    Please use one of the following: localStorage, sessionStorage, cookieStorage, memoryStorage.")};var i=n(502)},8139:e=>{"use strict";e.exports=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){return e.__proto__=t,e}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=t[n]);return e})}},r={};e.m=n,e.n=t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},e.d=(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},e.f={},e.e=t=>Promise.all(Object.keys(e.f).reduce((n,r)=>(e.f[r](t,n),n),[])),e.u=e=>"js/lazy-init-multiroll.modern.js",e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),t={},e.l=(n,r,i,a)=>{if(t[n])t[n].push(r);else{var o,s;if(void 0!==i)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var d=l[c];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")=="webpackStreamPlayerJsonp:"+i){o=d;break}}o||(s=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,e.nc&&o.setAttribute("nonce",e.nc),o.setAttribute("data-webpack","webpackStreamPlayerJsonp:"+i),o.src=n),t[n]=[r];var u=(e,r)=>{o.onerror=o.onload=null,clearTimeout(h);var i=t[n];if(delete t[n],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach(e=>e(r)),e)return e(r)},h=setTimeout(u.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=u.bind(null,o.onerror),o.onload=u.bind(null,o.onload),s&&document.head.appendChild(o)}},e.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e.p="https://yastatic.net/yandex-video-player-iframe-api-bundles",(()=>{var t={209:0};e.f.j=(n,r)=>{var i=e.o(t,n)?t[n]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((e,r)=>i=t[n]=[e,r]);r.push(i[2]=a);var o=e.p+e.u(n),s=new Error;e.l(o,r=>{if(e.o(t,n)&&(0!==(i=t[n])&&(t[n]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+n+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}},"chunk-"+n,n)}};var n=(n,r)=>{var i,a,[o,s,l]=r,c=0;if(o.some(e=>0!==t[e])){for(i in s)e.o(s,i)&&(e.m[i]=s[i]);if(l)l(e)}for(n&&n(r);c<o.length;c++)a=o[c],e.o(t,a)&&t[a]&&t[a][0](),t[a]=0},r=self.webpackChunkwebpackStreamPlayerJsonp=self.webpackChunkwebpackStreamPlayerJsonp||[];r.forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r))})(),(()=>{"use strict";function t(e){void 0===e&&(e=er.no);const t=e();return()=>Math.max(0,e()-t)}function n(e){return"function"===typeof e||"Function"===(e=>{const t=nr.call(e);if(!t)return null;const n=t.match(rr);if(!n)return null;const r=n[1];if(!r)return null;return r})(e)}function r(e){if(void 0===e)return Er.DEFAULT;const t=function(e){switch(e){case Sr.DEFAULT_ERROR:return Er.DEFAULT;case Sr.BROADCAST_AD_BLOCK_INIT_ERROR:case Sr.AD_TYPE_IS_NOT_RECOGNIZED:case Sr.AD_IS_ALREADY_PLAYING:case Sr.MULTIROLL_INIT_ERROR:case Sr.PLAY_AD_VIEWERS_ERROR:return Er.ADS;case Sr.INVALID_METADATA:case Sr.NO_STREAMS:case Sr.INVALID_STREAM_URL:case Sr.NO_DRM_CONFIG:return Er.CONFIG;case Sr.YANDEX_RPC_ERROR:case Sr.ON_TICK_ERROR:case Sr.SAGA_ERROR:case Sr.SHAKA_FILTER_ERROR:case Sr.SHAKA_CONFIGURE_ERROR:case Sr.SHAKA_LOAD_SOURCE_ERROR:case Sr.REFRESH_SUBTITLES_ERROR:case Sr.NO_HLS_JS_INSTANCE:case Sr.REACT_COMPONENT_DID_CATCH_ERROR_INFO:case Sr.RECOVER_TASK_ERROR:case Sr.PRELOAD_SOURCE_FAILED:case Sr.MEDIA_ERR_ABORTED:return Er.EXCEPTION;case Sr.UNSUPPORTED_MEDIA_TYPE:case Sr.NATIVE_HLS_NOT_SUPPORTED_ERROR:case Sr.HLS_JS_NOT_SUPPORTED_ERROR:case Sr.MEDIA_ERR_SRC_NOT_SUPPORTED:case Sr.MEDIA_ERR_CUSTOM:case Sr.MEDIA_ERR_DECODE:case Sr.REPRESENTATION_CHANGE:return Er.MEDIA;case Sr.SCRIPT_INIT_ERROR:case Sr.MPD_SHAKA_INIT_ERROR:case Sr.META_INFO_REQUEST_FAILED:case Sr.STRM_ABD_INVALID_RESPONSE:case Sr.MANIFEST_NOT_FOUND:return Er.NETWORK_PLAYER;case Sr.MEDIA_ERR_NETWORK:return Er.NETWORK_MEDIA;case Sr.MPD_WIDEVINE_CERT_LOAD_ERROR:case Sr.FAIRPLAY_CERT_LOAD_ERROR:case Sr.FAIRPLAY_CREATE_MEDIA_KEYS_ERROR:case Sr.FAIRPLAY_CREATE_KEY_SESSION_ERROR:case Sr.FAIRPLAY_SPC_LOAD_ERROR:case Sr.FAIRPLAY_CREATE_KEY_ERROR:case Sr.FAIRPLAY_INVALID_CONTENT_ID:case Sr.DRM_PROXY_ERROR:case Sr.DRM_PROXY_ERROR_SIGNATURE_EXPIRED:case Sr.MEDIA_ERR_ENCRYPTED:case Sr.FAIRPLAY_NOT_SUPPORTED:case Sr.NO_DRM:case Sr.DRM_INIT_ERROR:case Sr.DRM_NO_INIT_DATA:case Sr.DRM_CERT_LOAD_ERROR:case Sr.DRM_NO_SUPPORTED_KEY_SYSTEM:case Sr.DRM_FAILED_TO_CREATE_CDM:case Sr.DRM_FAILED_TO_SET_MEDIA_KEYS:case Sr.DRM_NO_LICENSE_SERVER:case Sr.DRM_FAILED_TO_CREATE_SESSION:case Sr.DRM_SESSION_ERROR:case Sr.DRM_FAILED_TO_GENERATE_REQUEST:case Sr.DRM_UNKNOWN_ERROR:return Er.DRM;case Sr.REGIONAL_LIMITATION_MANIFEST:case Sr.REGIONAL_LIMITATION_LEVEL:case Sr.REGIONAL_LIMITATION_SEGMENT:return Er.REGIONAL;case Sr.SIGNATURE_EXPIRED_MANIFEST:case Sr.SIGNATURE_EXPIRED_LEVEL:case Sr.SIGNATURE_EXPIRED_SEGMENT:return Er.ACCESS;case Sr.BANNED_MANIFEST:case Sr.BANNED_LEVEL:case Sr.BANNED_SEGMENT:return Er.BANNED;case Sr.NO_CODECS:return Er.NO_CODECS;case Sr.NO_PLAYABLE_STREAMS:return Er.CANNOT_PLAY;case Sr.NO_MSE:return Er.UNSUPPORTED_ENV}return Er.DEFAULT}(e);if(t!==Er.DEFAULT)return t;switch(e){case dr.BUFFER_FULL_ERROR:case dr.BUFFER_NUDGE_ON_STALL:case dr.BUFFER_STALLED_ERROR:case dr.SHAKA_VIDEO_ERROR_3016:case dr.FRAG_PARSING_ERROR:case dr.BUFFER_SEEK_OVER_HOLE:case dr.BUFFER_APPENDING_ERROR:case dr.PIPELINE_ERROR_DECODE:case dr.DECODER_ERROR_NOT_SUPPORTED:case dr.BUFFER_APPEND_ERROR:case dr.SHAKA_MEDIA_SOURCE_OPERATION_THREW_3015:case dr.MEDIA_ELEMENT_ERROR_FORMAT_ERROR:case dr.REMUX_ALLOC_ERROR:case dr.BUFFER_ADD_CODEC_ERROR:case dr.DEMUXER_ERROR_COULD_NOT_OPEN:case dr.NS_ERROR_DOM_INVALID_STATE_ERR:case dr.SHAKA_DASH_INVALID_XML_4001:case dr.SHAKA_QUOTA_EXCEEDED_ERROR_3017:case dr.CHUNK_DEMUXER_ERROR_APPEND_FAILED:case dr.FAILED_TO_INIT_DECODER:case dr.PIPELINE_ERROR_INITIALIZATION_FAILED:case dr.NS_ERROR_FAILURE:case dr.SHAKA_MEDIA_SOURCE_OPERATION_FAILED_3014:case dr.REQUEST_FAILED:case dr.PIPELINE_ERROR_EXTERNAL_RENDERER_FAILED:case dr.PIPELINE_ERROR_COULD_NOT_RENDER:case dr.NS_ERROR_DOM_MEDIA_METADATA_ERR:case dr.MEDIA_ELEMENT_ERROR_EMPTY_SRC_ATTRIBUTE:case dr.NS_ERROR_DOM_MEDIA_FATAL_ERR:case dr.SHAKA_RESTRICTIONS_CANNOT_BE_MET_4012:case dr.MANIFEST_PARSING_ERROR:return Er.MEDIA;case dr.FRAG_LOAD_ERROR:case dr.SHAKA_BAD_HTTP_STATUS_1001_MANIFEST:case dr.SHAKA_HTTP_ERROR_1002_SEGMENT:case dr.MANIFEST_LOAD_ERROR:case dr.LEVEL_LOAD_ERROR:case dr.SHAKA_HTTP_ERROR_1002_MANIFEST:case dr.SHAKA_BAD_HTTP_STATUS_1001_SEGMENT:case dr.SHAKA_UNSUPPORTED_SCHEME_1000:case dr.AUDIO_TRACK_LOAD_ERROR:return Er.NETWORK_MEDIA;case dr.SHAKA_TIMEOUT_1003_SEGMENT:case dr.FRAG_LOAD_TIME_OUT:case dr.MANIFEST_LOAD_TIME_OUT:case dr.LEVEL_LOAD_TIME_OUT:case dr.SHAKA_TIMEOUT_1003_MANIFEST:case dr.SHAKA_TIMEOUT_1003_LICENSE:case dr.AUDIO_TRACK_LOAD_TIME_OUT:return Er.NETWORK_TIMEOUT;case dr.INTERNAL_EXCEPTION:case dr.SHAKA_OPERATION_ABORTED_7001:case dr.ON_PLAYER_INIT_ERROR_INTERNAL:case dr.EXTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR:case dr.INTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR:case dr.LOAD_SKIN_ERROR:case dr.INSERT_INTO_WITH_SECURE_FRAME:case dr.PLAY_AD_VIEWERS_WITH_SECURE_FRAME:case dr.ERROR_SCREEN_LOAD_ERROR:return Er.EXCEPTION;case dr.UNABLE_TO_LOAD_PLAYER_IFRAME:case dr.ON_PLAYER_INIT_ERROR:case dr.LOADER_INIT_ERROR:case dr.UNABLE_TO_LOAD_PLAYER_INTERNAL_SCRIPT:case dr.FAILED_TO_DOWNLOAD_DEBUG_INFO:case dr.SHAKA_REQUEST_FILTER_ERROR_1006:case dr.REQUEST_SOURCE_ERROR:return Er.NETWORK_PLAYER;case dr.PLAYER_CONTAINER_NOT_FOUND:case dr.KEY_LOAD_ERROR:case dr.FEATURE_HANDLER_ERROR:case dr.SHAKA_NO_LICENSE_SERVER_GIVEN_6012:case dr.INVALID_CONFIG_ELEMENT_IN_CREATE_PLAYER:case dr.INVALID_CONFIG_LANG_IN_CREATE_PLAYER:case dr.INVALID_CONFIG_IN_CREATE_PLAYER:case dr.INVALID_CONFIG_IN_SET_SOURCE:case dr.INVALID_CONFIG_IN_SOURCE_UPDATE:case dr.IFRAME_DOES_NOT_ALLOW_DRM:case dr.DRM_IS_NOT_ALLOWED:case dr.ELEMENT_NOT_IN_DOM:return Er.CONFIG;case dr.SHAKA_FAILED_TO_CREATE_CDM_6002:case dr.SHAKA_HTTP_ERROR_1002_LICENSE:case dr.SHAKA_LICENSE_REQUEST_FAILED_6007:case dr.SHAKA_FAILED_TO_GENERATE_LICENSE_REQUEST_6006:case dr.SHAKA_REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE_6001:case dr.SHAKA_FAILED_TO_ATTACH_TO_VIDEO_6003:case dr.SHAKA_LICENSE_RESPONSE_REJECTED_6008:case dr.SHAKA_INVALID_SERVER_CERTIFICATE_6004:case dr.SHAKA_EXPIRED_6014:case dr.SHAKA_BAD_HTTP_STATUS_1001_LICENSE:return Er.DRM;case dr.SHAKA_CONTENT_UNSUPPORTED_BY_BROWSER_4032:return Er.NO_CODECS}return Er.DEFAULT}function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t,n,r){let{params:i}=e;(0,Rr.K)(i[0])?((0,Dr.M)(i[0],(e,r)=>{r===t&&(Array.isArray(e)?e.forEach(e=>e(n)):e(n))}),r&&(i[0][t]=[])):i[0]===t&&(0,Nr.m)(i[1])&&(i[1](n),r&&(i[1]=kr.Z))}function o(e,t,n){for(let r=0;r<e.length;r++){const i=e[r];"on"===i.name?a(i,t,n,!1):"once"===i.name&&a(i,t,n,!0)}}function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e){function t(t){if(e&&console.log("[PLAYER] [CALL]",t.name,t.params),void 0!==r)return r[t.name].apply(r,t.params);if(void 0!==i&&Lr.indexOf(t.name)>-1)return i[t.name].apply(i,t.params);if(!t.async)return void l.push(t);const n=s({},t,{resolve:kr.Z,reject:kr.Z});return l.push(n),new Promise((e,t)=>{n.resolve=e,n.reject=t})}function n(e,t){e.forEach(e=>{e.async?t[e.name].apply(t,e.params).then(e.resolve,e.reject):t[e.name].apply(t,e.params)}),e.length=0}let r,i,a=!1,l=[];const c={getReadyState:()=>a?wr.broken:r?r.getReadyState():wr.init,getState:()=>{if(r)return r.getState()},setReadyInstance(e){r=e,n(l,r)},handlePlayerDestroy(){r=void 0,i=void 0},setInstance(e){i=e;const[t,r]=function(e,t){const n=[],r=[];return((e,t,n)=>{for(let r=0;r<e.length;r++)t.call(n,e[r],r,e)})(e,(i,a)=>{t(i,a,e)?n.push(i):r.push(i)}),[n,r]}(l,e=>{let{name:t}=e;return Wn.indexOf(t)>-1});l=r,n(t,i)},emitErrorOnStart(e){if(r)throw new Error("Can't emit error on lazyApi after #setInstance()");a=!0,function(e,t){o(e,"ErrorChange",{error:t})}(l,e instanceof Error?e:new Error("NOT_AN_OBJECT_ERROR: "+e))},emitEventOnStart(e,t){i||o(l,e,t)}};return Object.defineProperty(c,"skin",{get:()=>r?r.skin:void 0}),Zn.forEach(e=>{c[e]="pause"===e?function(n){return void 0===n&&(n=Ir.ExternalApi),c.emitEventOnStart("RequestPlayingState",{playingState:Pr.PAUSE,playingStateReason:n}),t({name:e,params:Array.prototype.slice.call(arguments),async:!1})}:function(){return t({name:e,params:Array.prototype.slice.call(arguments),async:!1})}}),Gn.forEach(e=>{c[e]="play"===e?function(n){return void 0===n&&(n=Ir.ExternalApi),c.emitEventOnStart("RequestPlayingState",{playingState:Pr.PLAY,playingStateReason:n}),t({name:e,params:Array.prototype.slice.call(arguments),async:!0})}:function(){return t({name:e,params:Array.prototype.slice.call(arguments),async:!0})}}),c}function c(e){return"number"===typeof e&&isFinite(e)}function d(e){let n,r=kr.Z,i=kr.Z,a=kr.Z,o=kr.Z;e.once("Ready",e=>{n=e});const s=()=>{e.off("RequestPlayingState",r),e.off("PlayingStateChange",i),e.off("ContentImpression",a),e.off("AdPodStart",o)};e.on("StreamChange",()=>{let l;s();let d=!1,u=!1,h=kr.Z,f=kr.Z;const p=()=>{if(s(),d||!l||!l.engine)return;const{hasPreroll:e=!1,engine:t}=l,r=h(),i=f();c(r)&&(0,_r.Y)(()=>n.logDelta(e?Fr[t]:Mr[t],r)),c(i)&&(0,_r.Y)(()=>n.logDelta(e?Vr[t]:Ur[t],i))};r=e=>{let{playingState:n}=e;if(n===Pr.PAUSE)return;h=t(),d=!(0,br.s)(document,!0);const r=(0,Or.Y)(document,e=>{e||(d=!0,r())});void 0!==l?p():u=!0},i=e=>{let{playingState:n}=e;n===Pr.BUFFERING?f=t():n===Pr.PAUSE?f=()=>0:n===Pr.PLAY&&s()},a=t=>{e.off("AdPodStart",o),t&&t.engine&&(l=t,u&&p())},o=()=>{l={engine:"AD",hasPreroll:!0},e.off("ContentImpression",a),u&&p()},e.once("RequestPlayingState",r),e.on("PlayingStateChange",i),e.once("ContentImpression",a),e.once("AdPodStart",o)})}function u(e){const t=e;return t.Ya||(t.Ya={}),t.Ya.streamPlayer||(t.Ya.streamPlayer={}),t.Ya.streamPlayer}function h(e){const t=function(e,t){let{content:n,size:r}=void 0===t?{}:t;const i=e.ownerDocument.createElement("iframe");i.scrolling="no",i.setAttribute("allowfullscreen",""),i.style.display="block",r&&(i.height=r.height,i.width=r.width),e.appendChild(i);const a=i.contentDocument;return a.open(),n&&a.write(n),a.close(),a.body.style.margin="0",i.style.borderWidth="0",i}(e);return t.width="0",t.height="0",t.style.position="absolute",t}function f(e){if(!e)return;const{parentElement:t}=e;t&&t.removeChild(e)}function p(e){return void 0===e&&(e=window),void 0===Wr&&(Wr=function(e){void 0===e&&(e=window);return e.JSON&&(0,Kr.E)(e.JSON.stringify)&&(0,Kr.E)(e.JSON.parse)}(e)?e.JSON:{stringify:zr("stringify"),parse:zr("parse")}),Wr}function m(e){return p().stringify(e,function(){const e=[],t=function(){const e="undefined"!==typeof WeakMap?new WeakMap:void 0,t=[];return{set:(n,r)=>{if(void 0!==e)try{e.set(n,r)}catch(i){t.push({path:r,value:n})}else t.push({path:r,value:n})},get:n=>{const r=Gr(t,e=>e.value===n);return void 0!==e&&void 0===r?e.get(n):r?r.path:void 0}}}();return(n,r)=>{if((0,Nr.m)(r))return(0,vr.H)(r.name)?r.name:"[Function]";if(!(0,Rr.K)(r))return r;const i=t.get(r);if(i)return"[Circular "+i+"]";for(;e.length>0&&e[e.length-1].value[n]!==r;)e.pop();const a=(e.length>0?e[e.length-1].path:"")+(n?"/"+n:"~");return e.push({path:a,value:r}),t.set(r,a),r}}())}function g(e,t){void 0===e&&(e="a"),void 0===t&&(t="z");const n=function(e,t){let n=e+(0,ei.M)()*(t+1-e);return n=Math.floor(n),n}(e.charCodeAt(0),t.charCodeAt(0));return String.fromCharCode(n)}function y(){return(y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _(e){const{dropCacheOnRetry:t=!1,onBeforeLoad:n=Qr.Z,retries:r=0}=e;if(e.checkLoad&&e.checkLoad())return void(e.onLoad&&e.onLoad());let i=n,a=0;return t&&r>0&&(i=e=>{if(n(e),a>0){const t=-1===e.src.indexOf("?")?"?":"&",n=function(e){const t=[];for(let n=0;n<e;n++)t.push(g());return t.join("")}(4);e.src+=t+n}a++}),function e(t){const{src:n,win:r=window,charset:i=ti.j,async:a=!0,retries:o=0,onRetry:s=Qr.Z,retryDelay:l=0,checkLoad:c=ni,onBeforeLoad:d=Qr.Z,onLoad:u=Qr.Z,onError:h=Qr.Z}=t,p=r.document.createElement("script"),m=r=>{o>0?(s(r),e(y({},t,{src:n,retries:o-1}))):h(r),f(p)};p.type="text/javascript",p.async=a,p.onload=()=>c(p)?u():m(new Error("checkLoad for "+n+" failed")),p.onerror=e=>{try{r.setTimeout(()=>{m(e)},l)}catch(e){}},p.src=n,p.charset=i,d(p),(0,$r.c)(r).appendChild(p)}(y({},e,{onBeforeLoad:i}))}function v(){return(v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function E(){return(E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function S(e){return new Promise((t,n)=>{!function(e){const{win:t=window,src:n,retries:r=0,onError:i=Qr.Z}=e,a=new Jr({id:Yr.LOAD_SCRIPT_ERROR,message:"Failed to load script ["+n+"]",details:{src:n,isSelfWindow:t===window,onBeforeLoad:Boolean(e.onBeforeLoad),retries:r}});_(v({},e,{win:t,onError:()=>i(a)}))}(E({},e,{onLoad:t,onError:n}))})}function R(e){let{win:t=window,src:n,checkLoad:r,onBeforeLoad:i=kr.Z,onLoad:a=kr.Z,withCredentials:o=!1}=e;Qn["ll1.0-10769"]=Qn["ll1.0-10769"]||{};const s=Qn["ll1.0-10769"];return s[n]||(s[n]=S({checkLoad:r,win:t,src:n,retries:3,dropCacheOnRetry:!0,onBeforeLoad:e=>{o||(e.crossOrigin="anonymous"),i()}}).then(a),s[n].catch(()=>delete s[n])),s[n]}function A(e,t,n){return(n?"https://yastatic.net/yandex-video-player-iframe-api-bundles-stable":"https://yastatic.net/yandex-video-player-iframe-api-bundles")+"/1.0-"+t+"/js/"+e}function T(e){let{modern:t,lang:n}=e;return A(function(e){let{modern:t,lang:n}=e;return"skin_"+n+(t?".modern":"")+".js"}({modern:t,lang:n}),10769,!1)}function b(e){const t=window;let n=!1;return e.player.once(Br.Destroy,()=>n=!0),R({src:T({modern:e.modern,lang:jr.i18nLang?jr.i18nLang:"ru"}),checkLoad:()=>(0,Rr.K)(t.Ya)&&(0,Rr.K)(t.Ya.playerSkin)&&(0,Nr.m)(t.Ya.playerSkin.create)}).then(()=>{if(!n)return t.Ya.playerSkin.create(e)})}function O(e){ri.flagsInited||(ri.flagsInited=!0,(0,Rr.K)(e)&&(0,Rr.K)(e.flags)&&(0,_r.Y)(()=>{(0,Dr.M)(e.flags,(e,t)=>{ri.flags[t]=String(e)})}))}function C(e){return k(e),ri.flags[e]}function P(e){return"true"===e||"1"===e||"false"!==e&&"0"!==e&&void 0}function I(e,t){const n=P(C(e));if("undefined"===typeof n){if("boolean"===typeof t)return t;return P(ii[e])}return n}function w(e){if("undefined"===typeof e)return;const t=parseFloat(e);return c(t)?t:void 0}function k(e){if(ri.flagsInited)return;const t=new Error(e?"Unexpected usage of player's flag "+e+" before any flag configuration":"Unexpected usage of player's getFlagsJson before any flag configuration");setTimeout(()=>{throw t})}function N(){return(N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function D(e,n){Qn.timeAPIInit=cr();const r=n(e),i=l(r.getDebugConfig().logCalls);!function(e,n){if(void 0===n&&(n=!0),!(0,br.s)(document,!0))return;let r=!1;const i=(0,Or.Y)(document,e=>{e||(r=!0,i())}),a=n?"loader":"create",o=0===Cr++,s=o?a+".player.firstready":a+".player.ready",l=o?a+".player.firststart":a+".player.start",c=t();let d,u=!0;e.once("Ready",e=>{const t=c();d=e,(0,_r.Y)(()=>{r||e.logDelta(s,t,{initSubpage:!0})})}),e.once("ResourcesIdle",()=>{u=!1}),e.once("ContentImpression",()=>{const e=c();!r&&u&&void 0!==d&&(0,_r.Y)(()=>d.logDelta(l,e,{initSubpage:!0}))})}(i,!1),!0!==e.skipPlayRumLogger&&d(i);const{setReadyInstance:a,setInstance:o}=i,s=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(i,ai);o(r),r.once(Br.Ready,a),r.once(Br.SkinReady,()=>s.skin=r.skin);const{loadSkin:c=b}=e,u=c===b;r.on(Br.RequestFullscreenStateChange,async e=>{u&&!r.skin&&r.once(Br.SkinReady,()=>{r.emit(Br.RequestFullscreenStateChange,e)})});const h=(0,$n.I)(async()=>{if(!1===c)return;if(r.getReadyState()===wr.destroyed)return;const n=e.skinParams||{};try{if(u){const e=t();r.once(Br.SkinReady,t=>{let{error:n}=t;r.logSkinDelta(n?"skin.error":"skin.load",e(),{initSubpage:!0})})}r.skin=await c(N({},n,{container:r.getContainer(),player:s,modern:!0},u?{flags:e.flags}:{})),r.emit(Br.SkinReady,{})}catch(i){r.logError(new Tr({code:dr.LOAD_SKIN_ERROR,isFatal:!1,details:i})),r.setNativeControlsVisibility(!0),r.setNativeAdControlsVisibility(!0),r.emit(Br.SkinReady,{error:i})}}),f=e=>{let{error:t}=e;t&&t.isFatal&&h()};r.once(Br.ErrorChange,f);return Promise.all([new Promise(e=>r.once(Br.Ready,e)),Promise.race([new Promise(e=>setTimeout(e,function(e){const t=w(C(e));if("undefined"===typeof t){return w(ii[e])}return t}("web_skin_load_timeout"))),new Promise(e=>r.once(Br.ResourcesIdle,e))])]).then(()=>{r.off(Br.ErrorChange,f),h()}),s}function L(e,t){const n=e.style;for(const r in t)if(t.hasOwnProperty(r)){n[pi(r)]=t[r]}}function x(e,t){void 0===t&&(t=window);return("function"===typeof t.getComputedStyle?t.getComputedStyle(e,null):e.currentStyle)||{}}function M(e){const t=e.getRootNode;if((0,Nr.m)(t))return t.call(e);let n=e;for(;n.parentNode;)n=n.parentNode;return n}function F(e){return!!e&&"ShadowRoot"===(0,oi.M)(e)}function U(e){const t=e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;let n=e;for(;n;){if(n&&t.document.body.contains(n))return!0;const e=M(n);if(!F(e)||!_i(e.host))return!1;n=e.host}return!1}function V(e,t){!function(e){return"function"===typeof e.dispatch}(e)?e(t):e.dispatch(t)}function B(e,t){e.forEach(e=>{V(e,t)})}function j(e,t){if(void 0===t&&(t=!1),e===Sr.NO_CODECS&&Ii&&wi>6)return{title:"NO_CODECS_TITLE",message:"NO_CODECS_MESSAGE",helpLink:"https://yandex.ru/support/video-player/player-issues.html#no-codecs",helpLinkButtonText:"NO_CODECS_HELP_LINK_TITLE"};const n=r(e);return t&&function(e){return[Er.NETWORK_PLAYER,Er.NETWORK_MEDIA,Er.NETWORK_TIMEOUT,Er.DRM,Er.ADS].indexOf(e)>-1}(n)?{title:"ADBLOCK_DETECTED_TITLE",message:"ADBLOCK_DETECTED_MESSAGE",helpLink:"https://yandex.ru/support/video-player/blocker-settings.html",helpLinkButtonText:"ERROR_SCREEN_DEFAULT_HELP_LINK"}:function(e){return{title:Ni[e],message:Di[e],helpLink:ki[e],helpLinkButtonText:Li[e]||"ERROR_SCREEN_DEFAULT_HELP_LINK"}}(n)}function Y(e){return(t=e.supportInfo).supported&&void 0!==t.engine;var t}function H(e){return void 0===e?[]:(e.testIds||"").split(",").map(e=>parseInt(e,10)).filter(c)}function K(e,t){function n(){this.constructor=e}if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Qi(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function q(e,t,n,r){return new(n=n||Promise)((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))}function G(e,t){function n(n){return function(s){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,i&&(a=2&n[0]?i.return:n[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,n[1])).done)return a;switch(i=0,(n=a?[2&n[0],a.value]:n)[0]){case 0:case 1:a=n;break;case 4:return o.label++,{value:n[1],done:!1};case 5:o.label++,i=n[1],n=[0];continue;case 7:n=o.ops.pop(),o.trys.pop();continue;default:if(!(a=0<(a=o.trys).length&&a[a.length-1])&&(6===n[0]||2===n[0])){o=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){o.label=n[1];break}if(6===n[0]&&o.label<a[1]){o.label=a[1],a=n;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(n);break}a[2]&&o.ops.pop(),o.trys.pop();continue}n=t.call(e,o)}catch(s){n=[6,s],i=0}finally{r=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}var r,i,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},s={next:n(0),throw:n(1),return:n(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}function W(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Z(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}function z(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e}function X(e){return new Ja({values:e,typeName:Va.ZodEnum})}function J(e){return void 0===e?void 0:Boolean(e)}function Q(e){if("function"===typeof Object.keys)return Object.keys(e);{const t=[];for(const n in e)(0,Ko.n)(e,n)&&t.push(n);return t}}function $(e){return Go.indexOf(e)>-1}function ee(e){return"number"===typeof e&&0<=e&&e<=1}function te(e){const t=(0,vr.H)(e)?(void 0===(n=e)&&(n=""),n.split(",").map(e=>e.trim()).filter($)):e||[];var n;return t.indexOf(qo.ALL)>-1?Go:t}function ne(){return(ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function re(e){us.href=e;let t=us.pathname||"";"/"!==t.charAt(0)&&(t="/"+t);const n=(us.search||"")+(us.hash||""),r=e.lastIndexOf(n),i=-1===r?e:e.slice(0,r);if(ms.test(e)){const t=re(e.replace(ms,"https:"));return us.href=e,ne({},t,{originalPath:i,protocol:e.slice(0,e.indexOf(":")+1),href:us.href})}const a=us.protocol&&/^[a-z\-]+:/i.test(us.protocol)?us.protocol:"";return{originalPath:i,href:us.href,protocol:a,host:us.host,hostname:us.hostname,port:us.port,pathname:t,search:us.search,hash:us.hash}}function ie(e,t){if(void 0===t&&(t=!1),t){const t=e.originalPath,n="/"===e.pathname&&"/"!==t[t.length-1];return e.originalPath+(n?"/":"")+e.search+e.hash}const n="443"===e.port||"80"===e.port?e.hostname:e.host;return e.protocol+"//"+n+e.pathname+e.search+e.hash}function ae(e){const t={},n=e.replace(/^[?#]+/,"").replace(/#.*$/,"").split("&");for(let r=0;r<n.length;r++){const e=n[r].indexOf("=");let i,a;if(-1===e?(i=gs(n[r]),a=""):(i=gs(n[r].slice(0,e)),a=n[r].slice(e+1)),i){const e=Boolean(/(\[\])$/.exec(i));i=i.replace(/\[\]$/,""),e?void 0===t[i]?t[i]=[gs(a)]:t[i]=[].concat(t[i],gs(a)):t[i]=gs(a)}}return t}function oe(e){return ae(re(e).search)}function se(e){const t=[];for(const n in e)if(e.hasOwnProperty(n)){const r=e[n];yi(r)?t.push(ys(n,r)):void 0!==r&&t.push(n+"="+encodeURIComponent(r))}return"?"+t.join("&")}function le(e,t,n){if(void 0===n)return e;const r=re(e),i=ae(r.search);return i[t]=n,ie(ne({},r,{search:se(i)}))}function ce(e,t,n){let{override:r=!0,saveOriginalPath:i=!1}=void 0===n?{}:n;const a=re(e),o=ae(a.search);(0,Dr.M)(t,(e,t)=>{(void 0===o[t]||r)&&(o[t]=e)});return ie(ne({},a,{search:se(o)}),i)}function de(e){return"function"===typeof Object.entries?Object.entries(e):Q(e).map(t=>[t,e[t]])}function ue(){return(ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function he(e,t){var n,r;if(!e.servers)return e;const i={};de(e.servers).forEach(e=>{let[n,r]=e;!function(e){const{hostname:t}=re(e);return-1!==_s.indexOf(t)}(r)?i[n]=r:i[n]=le(r,"vsid",t)});const a=ue({},e);a.servers=i;const o=a;return null!=(n=o.advanced)&&null!=(r=n["com.widevine.alpha"])&&r.serverCertificateUrl&&(o.advanced=ue({},o.advanced,{"com.widevine.alpha":ue({},o.advanced["com.widevine.alpha"],{serverCertificateUrl:le(o.advanced["com.widevine.alpha"].serverCertificateUrl,"vsid",t)})})),function(e){if(!(0,Rr.K)(e))return!1;if(!(0,Rr.K)(e.servers)||!("com.apple.fps.1_0"in e.servers))return!1;if(!(0,Rr.K)(e.advanced)||!("com.apple.fps.1_0"in e.advanced))return!1;const t=e.advanced["com.apple.fps.1_0"];if(!(0,Rr.K)(t))return!1;const{processSPCPath:n}=t;return(0,vr.H)(n)}(a)&&(a.advanced=ue({},a.advanced,{"com.apple.fps.1_0":ue({},a.advanced["com.apple.fps.1_0"],{processSPCPath:le(a.advanced["com.apple.fps.1_0"].processSPCPath,"vsid",t)})})),a}function fe(){return(fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function pe(e){const t=e.filter(c).sort().join(",");return t.length>0?t:void 0}function me(e){return pe(e.map(e=>parseInt(e,10)))}function ge(e){try{return JSON.stringify(e),!0}catch(na){return!1}}function ye(e,t){void 0===e&&(e={});const n={};return function(e,t){for(const n in t)(0,Ko.n)(t,n)&&(e[n]=t[n])}(n,e),Fs.forEach(e=>{"undefined"===typeof n[e]&&"undefined"!==typeof t[e]&&(n[e]=t[e])}),n}function _e(){return(_e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ve(e){let{url:t,adConfig:n,additionalParams:r}=e;t=((e,t)=>{if(!e||!t)return e;const n={"partner-id":"number"===typeof t.partnerId?String(t.partnerId):t.partnerId,"video-category-id":"number"===typeof t.category?String(t.category):t.category,"imp-id":String(t.impId),gzip:"1"};return ce(e,n,{override:!0,saveOriginalPath:!0})})(t,n);const{from:i,vsid:a}=r,o=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(r,Vs);return t=ce(t,{from:i,vsid:a},{override:!0,saveOriginalPath:!0}),ce(t,o,{override:!1,saveOriginalPath:!0})}function Ee(){return(Ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Se(e,t){const n=Us.parse(e),{vsid:r}=t;n.params.additionalParams.vsid=r,n.params.additionalParams=Ee({},cs,n.params.additionalParams,{vsid:r}),n.params.posterStyle=Ee({objectFit:t.objectFit},n.params.posterStyle);const{adConfig:i}=n.params;return void 0!==i&&void 0===i.skinType&&(i.skinType=function(e){return void 0===e.loadSkin?"defaultInstream":void 0}(t)),n.streams=n.streams.map(e=>Ee({},e,{drmConfig:e.drmConfig?he(e.drmConfig,r):void 0,url:ve({url:e.url,adConfig:n.params.adConfig,additionalParams:n.params.additionalParams})})),n}function Re(e){if(!(0,Rr.K)(e))return!1;const{utcStart:t,utcEnd:n}=e;return(void 0===t||c(t))&&(void 0===n||c(n))}function Ae(e){return Array.isArray(e)?e.filter(e=>"string"===typeof e):[]}function Te(e){if(!(0,Rr.K)(e))return{init:[],start:[],end:[],setSource:[],adStart:[],adRequest:[],adError:[],adEnd:[],adPodStart:[],adPodClick:[],adPodEnd:[],adPodSkip:[],sourceStart:[],play:[],pause:[],seek:[],firstQuartile:[],midpoint:[],thirdQuartile:[],viewed:[],heartbeat:[],watchedTime:[],error:[]};const{init:t,start:n,end:r,setSource:i,adRequest:a,adError:o,adStart:s,adEnd:l,adPodStart:d,adPodClick:u,adPodEnd:h,adPodSkip:f,sourceStart:p,play:m,pause:g,seek:y,firstQuartile:_,midpoint:v,thirdQuartile:E,viewed:S,heartbeat:R,watchedTime:A,error:T}=e;return{init:Ae(t),start:Ae(n),end:Ae(r),setSource:Ae(i),adRequest:Ae(a),adError:Ae(o),adStart:Ae(s),adEnd:Ae(l),adPodStart:Ae(d),adPodClick:Ae(u),adPodEnd:Ae(h),adPodSkip:Ae(f),sourceStart:Ae(p),play:Ae(m),pause:Ae(g),seek:Ae(y),firstQuartile:Ae(_),midpoint:Ae(v),thirdQuartile:Ae(E),heartbeat:(C=R,Array.isArray(C)?C.filter(e=>{if(!Array.isArray(e)||2!==e.length)return!1;const[t,n]=e;if("string"!==typeof t||!Re(n))return!1;const{offset:r,delay:i,callsCount:a}=n;return"number"===typeof i&&(void 0===r||c(r))&&(void 0===a||"number"===typeof a&&a>0)}):[]),viewed:(O=S,Array.isArray(O)?O.filter(e=>{if(Array.isArray(e)&&2===e.length){const[t,n]=e;if("string"!==typeof t)return!1;if(!(0,Rr.K)(n))return!1;{const{percent:e}=n;if("number"!==typeof e)return!1}return!0}return!1}):[]),watchedTime:(b=A,Array.isArray(b)?b.filter(e=>{if(!Array.isArray(e)||2!==e.length)return!1;const[t,n]=e;if("string"!==typeof t||!(0,Rr.K)(n))return!1;const{offset:r}=n;return Re(n)&&"number"===typeof r}):[]),error:Ae(T)};var b,O,C}function be(e){if(void 0===e||!(0,Rr.K)(e))return Bs;const{trackingEvents:t}=e;return{trackingEvents:(Array.isArray(t)?t:[t]).map(Te)}}function Oe(){return(Oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ce(e,t){return Oe({},function(e){return(0,Rr.K)(e)?Ys.parse(e):Ys.parse({})}(e),{source:Se(e,t)})}function Pe(e){void 0===e&&(e=window);const{userAgent:t=""}=e.navigator,n=/Android/.test(t),r=Gs(e),i=/com\.yandex\.mobile\.metrica\.ads\.sdk.*?Android/.test(t);return n&&!r||i}function Ie(e){const t=e.trim();return"//"===t.substr(0,2)||"http://"===t.substr(0,7)||"https://"===t.substr(0,8)}function we(e,t){void 0===t&&(t={});const{silent:n=!0,allowRelative:r=!1}=t;return r||Ie(e)?new Promise((t,r)=>{const i=document.createElement("img");i.onload=()=>t(e),i.onerror=n?()=>t(null):()=>r(new Error("knockPixel failed to load image ["+e+"]")),i.src=e}):n?Promise.resolve(null):Promise.reject("["+e+"] is not an absolute url, to knock this pixel use { allowRelative: true } option")}async function ke(e){let{url:t,data:n,contentType:r}=e;if(((e,t)=>{if("function"!==typeof navigator.sendBeacon)return!1;try{return navigator.sendBeacon(e,t)}catch(n){return!1}})(t,r?new Blob([n],{type:r}):n))return;const i=new XMLHttpRequest;i.open("POST",t),i.withCredentials=!0,void 0!==r&&i.setRequestHeader("Content-Type",r),i.send(n)}function Ne(e){setTimeout(()=>{throw e},0)}function De(e){let[t,{offset:n,utcStart:r,utcEnd:i}]=e;return[t,{offset:n,utcStart:r,utcEnd:i,delay:1/0,callsCount:1}]}function Le(e,t){return e.map(e=>[e,{percent:t}])}function xe(e){if("string"===typeof e)return"plain-url="+e;const[t,{utcStart:n="none",offset:r="none",delay:i="none"}]=e;return"url="+t+"|"+n+"/"+r+"/"+i}function Me(e){return void 0===e?"":"inroll"===e?"midroll":"postPauseroll"===e?"pauseroll":e}function Fe(){return(Fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ue(e){const t=e+"x"+gl;return gl++,t}function Ve(e,t){return e+"/"+t}function Be(e){if("string"===typeof e&&(e={message:e}),"object"===typeof e&&null!==e||(e={}),"function"===typeof e.toJSON)try{return{__stringifyError:e.toJSON()}}catch(i){}const{name:t,message:n,stack:r}=e;return{__stringifyError:{name:t,message:n,stack:r}}}function je(e,t,n,r){const i=He(e[t],Ve(n,t),r);return void 0===i?"null":i}function Ye(e){return JSON.stringify(e)}function He(e,t,n){switch(typeof e){case"boolean":return e?"true":"false";case"string":return Ye(e);case"undefined":return;case"bigint":return Ye(e.toString());case"function":return Ye("[Function"+("string"===typeof e.name&&e.name.length>0?" "+e.name:"")+"]");case"symbol":return Ye("[Symbol]");case"number":return isNaN(e)||!isFinite(e)?"null":String(e);case"object":if(null===e)return"null";if(r=e,"[object Window]"===Object.prototype.toString.call(r))return Ye("[object Window]");if(function(e){return(0,vr.H)(e.tagName)}(e))return Ye("[DOMNode "+e.tagName+"]");if(function(e){return"undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&ArrayBuffer.isView(e)}(e)){const{name:t}=e.constructor;return Ye("["+(t||"TypedArray")+"("+(e.byteLength||0)+")]")}const i=n.get(e);if(void 0!==i)return Ye("[Circular "+i+"]");n.set(e,t);return _l(e)?function(e,t,n){if(0===e.length)return"[]";let r="["+je(e,0,t,n);for(let i=1;i<e.length;i++)r+=","+je(e,i,t,n);return r+"]"}(e,t,n):function(e,t,n){if("function"===typeof e.toJSON){let r;try{r=e.toJSON()}catch(na){r=Be(na)}return He(r,Ve(t,"toJSON"),n)}let r="{",i=!0;for(let a in e){if(!Object.prototype.hasOwnProperty.call(e,a))continue;let o;try{o=e[a]}catch(na){o=Be(na)}const s=He(o,Ve(t,a),n);void 0!==s&&(i?i=!1:r+=",",r+=Ye(a)+":"+s)}return r+"}"}(e,t,n)}var r}function Ke(e){try{return He(e,"~",function(){const e="undefined"!==typeof WeakMap?new WeakMap:void 0,t=[];return{set:(n,r)=>{if(void 0!==e)try{e.set(n,r)}catch(i){t.push({path:r,value:n})}else t.push({path:r,value:n})},get:n=>{const r=Gr(t,e=>e.value===n);return void 0!==e&&void 0===r?e.get(n):r?r.path:void 0}}}())}catch(na){return JSON.stringify(Be(na))}}function qe(e){return Math.floor(e/30)}function Ge(e){void 0===e&&(e=window);const{navigator:t}=e,{connection:n={}}=t;return Boolean(n.saveData)}function We(e){if(void 0===e&&(e=window),!e.navigator)return bl;const{connection:t={}}=e.navigator;return"number"===typeof(n=t.rtt)&&isFinite(n)?t.rtt:bl;var n}function Ze(){}function ze(e,t){return e?"fullscreen":t?"pip":"default"}function Xe(){return(Xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Je(e){setTimeout(()=>{throw e},0)}function Qe(e,t){try{return e()}catch(na){"function"===typeof t&&t(na)}}function $e(e){void 0===e&&(e=cr);const t=e();return()=>Math.max(0,e()-t)}function et(e,t){return{reason:e,details:t,getElapsedTime:$e()}}function tt(){return(tt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function nt(e,t){void 0===t&&(t=!0);const n=Vl(e);if(!n)return t;return!e[n]}function rt(e,t){const n=function(e){const t=Vl(e);if(t)return t.replace(/hidden/i,"visibilitychange")}(e);if(!n)return Ze;const r=()=>{t(nt(e))};return e.addEventListener(n,r),()=>e.removeEventListener(n,r)}function it(e){let t="";for(let n=0;n<e;n++)t+=(16*Hl()|0).toString(16);return t}function at(e,t,n){void 0===n&&(n=" ");const r=t-e.length;if(r>0){let t=n;for(;t.length<r;)t+=t;return(t.length>r?t.substr(0,r):t)+e}return e}function ot(e){return at(String(e%Math.pow(10,4)),4,"0")}function st(){return(st=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function lt(e){if(e&&e.location){const{location:t}=e;return"function"===typeof t.toString?t.toString():t.href||""}return""}function ct(e){const{location:t,referrer:n}=e;return{location:lt(window),topLocation:t,referrer:window.document.referrer,topReferrer:n}}function dt(e,t){return function(e,t){if(e.status===t.status)return 0;if(e.status===Oi.OFFLINE)return 1;return-1}(e,t)||function(e,t){return String.prototype.localeCompare.call(e.name,t.name)}(e,t)}function ut(){return(ut=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ht(){return(ht=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ft(e){let t=0;var n;return function(e){return new Promise((t,n)=>{(0,Xl.W)(ut({},e,{onSuccess:t,onError:n}))})}(ht({},e,{checkStatus:e=>(t=e,304===t||t>=200&&t<300),url:(n=e.url,n.replace(/<tld>/g,zl))})).then(e=>e.responseText).catch(e=>{throw e.status=t,e})}function pt(e){return{name:e.name,bitrate:e.bitrate,lang:e.lang}}function mt(e){return"undefined"===typeof e?null:{name:e.name,lang:e.lang}}function gt(e){return{auto:e.auto,name:e.name,bitrate:e.bitrate,width:e.width,height:e.height}}function yt(){return(yt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _t(e){void 0===e&&(e={});const t={};for(const n in e){const r=e[n],i=typeof r;"string"!==i&&"number"!==i&&"boolean"!==i||(t[n]=r)}return t}function vt(){const{plugins:e}=window.navigator;return void 0===e||0===e.length?[]:Ei(e,_t)}function Et(){const e=window.navigator||{},t=window.performance||{},{location:n,referrer:r}=(0,Wl.w)(document);return{navigator:yt({},_t(e),{connection:_t(e.connection),plugins:vt()}),performance:{memory:_t(t.memory)},playerLocation:location.href,iframeApiLocation:n,iframeApiReferrer:r}}function St(e){let{videoType:t,currentTime:n,dvrStartTime:r,dvrDuration:i}=e;if(void 0===t||t===hl.VOD)return Hi;if(i===1/0||n>r+i-10)return rc;if(t!==hl.LIVE)return Hi;return r+(0===n?0:10)>n?nc:Hi}function Rt(e,t){const n=document.createElement("style");n.textContent+=e,t?t.appendChild(n):(0,$r.c)(window).appendChild(n)}function At(e){let t,{vsid:n,container:r}=e;return t=function(e,t){void 0===t&&(t=document);const n=h(t.body);return n.id="ya-video-player-frame-"+e,n}(n),r.appendChild(function(e){ac();const t=document.createElement("yaplayertag");return t.id=function(e){return"ya-video-player-"+e}(e),L(t,{width:"100%",height:"100%",position:"relative",overflow:"hidden",display:"block"}),t}(n)),t}function Tt(e){let{useAbdBundle:t}=e;return(t?"https://yastatic.net/yandex-video-player-iframe-api-bundles-stable":"https://yastatic.net/yandex-video-player-iframe-api-bundles")+"/1.0-10769"}function bt(e){let{vsid:t,from:n,reqid:r,slots:i,flags:a}=e,o="use_friendly_frame=true&vsid="+encodeURIComponent(t)+"&from="+encodeURIComponent(n);return r&&(o+="&reqid="+encodeURIComponent(r)),i&&(o+="&slots="+encodeURIComponent(i)),function(e){void 0===e&&(e=(0,dc.b)(window));try{if("1"===localStorage.getItem("rumdebug"))return console&&(0,Nr.m)(console.warn)&&console.warn("using rumdebug=1 from localStorage"),!0}catch(t){}return/[?&#]rumdebug=1(?:[&#]|$)/.test(e)}()&&(o+="&rumdebug=1"),o+="&flags="+encodeURIComponent(a),o}function Ot(){return(Ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ct(e){return Tt({useAbdBundle:e})+(qs?"/js/player.v2.modern.js":"/js/player.v2.js")}function Pt(n){let{iframe:r,useAbdBundle:i,vsid:a,from:o,reqid:s,slots:l,shouldLoadAdSdk:c,adConfig:d,flags:h,sendDelta:f}=n;const p=r.contentDocument,m=r.contentWindow;!function(e,t){if(void 0===t&&(t=window),t.history&&(0,Nr.m)(t.history.replaceState)&&!lc)try{t.history.replaceState(null,t.document.title,t.location.pathname+"#"+e)}catch(n){cc(e,t)}else cc(e,t)}(bt({vsid:a,from:o,reqid:s,slots:l,flags:h}),m),function(e,t){const n=Tt({useAbdBundle:t}),r=e.createElement("base");r.href=n,e.head.appendChild(r)}(p,i);const g=u(m),y=function(e){return{win:e,retries:3,async:!0,dropCacheOnRetry:!0,onBeforeLoad:e=>{e.crossOrigin="anonymous"}}}(m);!function(e,t){S(Ot({src:"https://yastatic.net/yandex-video-player-iframe-api/is-android-player-supported/is-yandex-player-supported.js"},t,{checkLoad:()=>{try{return(0,Nr.m)(e.isYandexPlayerSupported)}catch(t){return!1}}})).catch(()=>{e.isYandexPlayerSupported=()=>!1,(0,Nr.m)(e.onYandexPlayerSupportedAvailable)&&e.onYandexPlayerSupportedAvailable()})}(g,y),c&&void 0!==d&&e.e(769).then(e.bind(e,9627)).then(e=>{let{initMultirollModule:t}=e;return t(m,d,a)}).catch(kr.Z);const _=t();return S(Ot({src:Ct(i)},y,{checkLoad:()=>{try{return g.playerJsLoaded}catch(e){return!1}}})).then(e=>(f("internal_js_load",_()),e)).catch(e=>{throw new Tr(Ot({},e,{code:dr.UNABLE_TO_LOAD_PLAYER_INTERNAL_SCRIPT}))})}function It(){return(It=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function wt(){return(wt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function kt(e,t){return vc.some(n=>{if(!e[n.element])return!1;let r=t;for(;r;){if(e[n.element]===r)return!0;r=r.parentElement}return!1})}function Nt(e){if(e&&function(e){const t=re(e).pathname;return 0===t.indexOf("/vod/")||0===t.indexOf("/live/")||0===t.indexOf("/kal/")}(e))return ce(e,{json_preview:"1",preview_version:"4"})}function Dt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.join("")}function Lt(){return(Lt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function xt(){this.returnValue=!1}function Mt(){this.cancelBubble=!0}function Ft(e){return function(t){const n=function(e){return e.stopPropagation||(e.stopPropagation=Mt),e.preventDefault||(e.preventDefault=xt),e.target||(e.target=e.srcElement),e}(t);e.call(this,n)}}function Ut(e){e&&e.un()}function Vt(e,t,n){return Math.max(Math.min(t,n)-Math.max(e,0),0)}function Bt(e){const t=Uc(e),n=t.width,r=t.height;let i=0;if(n>0&&r>0){const e=function(){const e=window;let t=e.innerWidth,n=e.innerHeight;if(!t){const r=e.document.documentElement;t=r.clientWidth,n=r.clientHeight}return{width:t,height:n}}();i=Vt(t.left,t.right,e.width)*Vt(t.top,t.bottom,e.height)/(n*r)}return i}function jt(){return(jt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Yt(){return(Yt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ht(e){let{playingState:t}=e;return t===Pr.BUFFERING||t===Pr.PLAY}function Kt(e){let{playingState:t}=e;return t===Pr.PLAY}function qt(){return(qt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Gt(e,t,n){(0,Rr.K)(t)?(0,Dr.M)(t,(t,n)=>{(Array.isArray(t)?t:[t]).forEach(t=>{e(n,t)})}):(0,Nr.m)(n)&&e(t,n)}function Wt(){return((e,t)=>{for(let n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1})(Qc,e=>{let[t,n]=e;const r=function(e,t){void 0===t&&(t=window);const n=(0,Pi.i)(t),r=new RegExp("\\b"+e+"/((?:\\d+)(?:\\.\\d+)*)\\b","i"),i=n.match(r);if(i)return i[1].split(".").map(e=>parseInt(e,10))}(t);if(void 0===r)return!1;const[i]=r;return i<n})}function Zt(){return Jc||Ws&&function(){const e=zc<5;return Wt()||e}()}function zt(){return Zt()||(window,!1)}function Xt(){return!zt()&&((Ws||zs||Zc)&&!Zt())}function Jt(){return(Jt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Qt(){return(Qt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function $t(e){const t=[...e],n=t.pop();if(!n||0===t.length)throw new Error("memoizeSingle need at least 2 functions as arg");return{preparers:t,resolver:n}}function en(e){return(0,vr.H)(e.className)?e.className:e.namespaceURI===ud.svg&&e.getAttribute("class")||""}function tn(e,t){(0,vr.H)(e.className)?e.className=t:e.namespaceURI===ud.svg&&e.setAttributeNS("","class",t)}function nn(e,t){void 0===t&&(t=""),0!==e.className.length?pd(e)?yd(e,t):function(e,t){let n=en(e).split(" ").concat(t.split(" "));n=function(e){const t={};for(let n=0;n<e.length;n++)t[e[n]]=n;return Q(t)}(Hr(n,(function(e){return""!==e}))),tn(e,n.join(" "))}(e,t):e.className=t}function rn(e){const t=e.createElement("div");return L(t,Ad),t}function an(){const e=document.createElement("div");L(e,{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"});const t=document.createElement("div");return e.appendChild(t),L(t,{color:"#fff",fontFamily:'"Helvetica Neue",Helvetica,Arial,sans-serif',fontSize:"16px",lineHeight:"19px",textShadow:"0 0 3px #000",margin:"0 0 20px 0"}),{wrapper:e,setText:e=>{t.textContent=e}}}function on(e){let{document:t,poster:n,style:r,onReady:i,hiddenControls:a=[],primaryColor:o=Wc,backgroundColor:s}=e;const l=t.createElement("div");L(l,{width:"100%",height:"100%",display:"block",position:"relative",pointerEvents:"none",backgroundColor:s});const c=new cd({container:l,onReady:i,src:n,style:r}),d=rn(t);let u;-1===a.indexOf(qo.ALL)&&-1===a.indexOf(qo.PRELOADER)&&(u=function(e){let{document:t,primaryColor:n,isMobileSkin:r=!1}=e;Rd();const i=t.createElement("div");nn(i,vd().locals.spinner),i.innerHTML=r?Sd:Ed;const a=i.getElementsByTagName("svg")[0];return nn(a,vd().locals.spinner__svg),r||a.setAttributeNS("","fill",n||Wc),i.appendChild(a),i}({document:t,primaryColor:o,isMobileSkin:Xt()}),d.appendChild(u)),l.appendChild(d);const h=an();return l.appendChild(h.wrapper),{element:l,setPoster:e=>c.setPoster(e),setStyle:e=>c.setStyle(e),setSpinnerVisibility:e=>{u&&L(u,{display:e?"block":"none"})},setVisibility:e=>{L(l,{display:e?"block":"none"})},setAnnotationText:e=>{h.setText(e)},destroy:()=>{c.destroy(),f(l)}}}function sn(){function e(){return 0===n.length}function t(t){function i(){n.splice(n.indexOf(a),1),function(){if(!e())return;const t=r.shift();t&&t()}()}const a=t.then(i,i);return n.push(a),t}const n=[],r=[];return{waitAndLock:function(n){return e()?t(n()):new Promise(e=>{r.push(()=>{e(t(n()))})})},addLock:t,isFree:e}}function ln(){return(ln=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function cn(e){let{source:t}=e;return!!t&&(!!t.adConfig&&(!(!t.adConfig.partnerId&&!t.adConfig.adBreaks)&&!1!==t.adConfig.hasPreroll))}function dn(e){return!!(0,Rr.K)(e)&&(!!(0,Rr.K)(e.videoInfo)&&Boolean(e.enableRemoteProgressSaving&&e.videoInfo.videoContentId))}function un(e,t){const n=function(e,t,n){return void 0===n&&(n=0),Gr(e,e=>{let{start:r,end:i}=e;return r-n<=t&&t<=i+n})}(e,t);return void 0===n?void 0:n.end-t}function hn(e,t){return void 0===t&&(t=2),e===1/0?"inf":c(e)?e.toFixed(t):".".repeat(t<=0?1:t+1)}function fn(e,t){const n=document.createElement("tr"),r=document.createElement("th");r.textContent=t,L(r,{paddingRight:"5px",textAlign:"right",lineBreak:"auto"}),n.appendChild(r);const i=document.createElement("td");return L(r,{paddingLeft:"5px"}),n.appendChild(i),e.appendChild(n),i}function pn(e){return"undefined"===typeof e}function mn(e){return"boolean"===typeof e}function gn(e){return"number"===typeof e&&e===e}function yn(e){return"string"===typeof e}function _n(e){return"function"===typeof e}function vn(e){return Boolean(e)&&"object"===typeof e}function En(e,t,n,r){if(!yn(e))return;if(!t||!n)return e;const i=(r||0)<1.5?1:2,a=function(e){e=e.replace(/https?:\/\//i,"").replace(/\/\//i,"");return e.split("/")[1]||null}(e);if(!a||-1===Dd.indexOf(a))return e;const o=t<=n?t:n,s=t<=n?"width":"height",l=Nd.reduce((e,t)=>!e&&o*i<=t[s]?t:e,void 0);return l?e.replace("orig",l.sizeString):e}function Sn(e){return new Ld(e).toString("/",!0,Fd)}function Rn(e,t){const n={content_id:t.content_id,stream_block:t.stream_block,channel_id:t.channel_id,path:"player-events."+e};return"error"===e&&(n.error_code="{{error-code}}"),"seek"===e&&(n.position_from="{{old-position}}"),function(e){if(Ud&&e.reqid===Vd)return Ud;Vd=e.reqid;const t={reqid:Vd,yandexuid:e.yandexuid,select_event:"click",cid:73037,pid:197,dtype:"stred",source:e.from,from_block:e.from_block};return e.licence&&(t.licence=e.licence),e.svod&&(t.svod=e.svod),Ud=xd+"//yandex.ru/clck/jclck/"+Sn(t)}(t)+Sn({rnd:"{{random}}",fullscreen:"{{fullscreen}}",mute:"{{muted}}",duration:"{{duration}}",timestamp:"{{timestamp}}",user_ts:"{{vts}}",watchedTime:"{{fts}}",vsid:"{{vsid}}"})+Sn(n)+"*"}function An(e,t){this[t]=Boolean(e)}function Tn(e,t){this[t]=void 0!==e?Boolean(e):void 0}function bn(e,t){!0===e&&(this[t]=e)}function On(e,t){e&&(this[t]=String(e))}function Cn(e,t){gn(e)&&(this[t]=e)}function Pn(e,t){const n=Number(e);this[t]=gn(n)?n:0}function In(e,t){!qd&&Array.isArray(e)&&(qd=!0,this[t]=e)}function wn(){return{from:{value:"other",set:On},slots:null,"test-id":{value:[],set(e,t){const n=yn(e)?Ld.parseJSON(e):e;n&&(Array.isArray(n)?this[t]=n.filter(Boolean).map(String):yn(n)?this[t]=n.split(/[,_]/).filter(Boolean):gn(n)&&(this[t]=[String(n)]))}},distr_id:null,audio_only:!1,tv:{value:!1,set:An},loop:{value:!1,set:An},preload:{value:!1,set:An},report:{value:!0,set:An},preview:{value:!0,set:An},preview_src:{value:"",set:On},poster_object_fit:{set:On},nativeui:{value:!1,set:An},use_friendly_frame:{value:!0,set:An},disable_android_player:{value:!1,set:An},branding_intro:{value:!1,set:An},restore_playback_progress:{value:!1,set:An},remote_progress_saving:{value:!1,set:An},progress:{value:!0,set:An},start_position_confirmation:{value:!1,set:An},force_unmute:{value:!0,set:An},stream_cms:{value:!0,set:An},beta:{value:!1,set:bn},event_prefix:{value:"",set:On},from_block:{value:"other",set:On},hidden:{value:"",set:On},device_id:{value:"",set:On},autoplay:{value:!0,set(e,t){0===e&&(this[t]=!1)}},lang:{value:"",set(e,t){var n;(n=e,-1!==Kd.indexOf(n))&&(this[t]=e)}},allow_muted:{set:An},mute:{value:!1,set:Tn},volume:{set(e,t){gn(e)&&e>=0&&e<=100&&(this[t]=e)}},play_on_visible:{set(e,t){gn(e)?e>0&&e<=1&&(this[t]={threshold:e}):pn(e)||"undefined"===e||(this[t]=Boolean(e))}},adConfig:{set(e,t){vn(e)&&(this[t]=e)}},streams:{set(e,t){Array.isArray(e)&&(this[t]=e)}},vmap_id:{set:Pn},vmap_scenario_id:{set:Pn},meta:{value:Bd.none,set(e,t){if(!yn(e))return;const n=Bd[e];gn(n)&&(this[t]=n)}},subscribe_button:{value:void 0,set(e,t){if(!yn(e))return;gn(jd[e])&&(this[t]=e)}},m_duration:{value:3e3,set(e,t){gn(e)&&e>=0&&(this[t]=1e3*e)}},m_title:{value:null,set:On},m_desc:{value:null,set:On},live_offset:{set(e,t){gn(e)&&e>=0&&(this[t]=e)}},platform:{set(e,t){Yd.indexOf(e)>-1&&(this[t]=e)}},mod:{value:"",set:On},t:{set:Cn},skippable_fragments:{value:!0,set:An},preferable_width:{set:Cn},preferable_height:{set:Cn},preferable_audio:{value:[],set(e,t){this[t]="string"===typeof e?e.split(",").filter(e=>e.length>0):[]}},preferable_text:{value:[],set(e,t){this[t]="string"===typeof e?e.split(",").filter(e=>e.length>0):[]}},release_timeout:{value:0,set:Cn},retpath:{set:On},ya_station:{value:!0,set:An},share:{value:!0,set:An},has_preroll:{set:An},disable_update:{value:!1,set:An},velocity_metrics_sampled:{value:!0,set:An},test_mode:{value:!1,set:An},test_data:{value:"default",set(e,t){var n;(n=e,-1!==Hd.indexOf(n))&&(this[t]=e)}},object_fit:{set:On},background_color:{set:On},zen_preload:{set:An},disable_postmessage_broadcast:{value:!1,set:An},cache_sources_count:{set:Pn},scriptedEvents:{set:In},version:{set(e,t){/^1\.0-\d+$/.test(e)&&(this[t]=e)}}}}function kn(){const e={};for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.join(";").split(";").forEach(t=>{if(!/^\d+,\d+,-?\d+$/.test(t))return;const n=parseInt(t,10);e[n]=e[n]||t});const i=[];for(let a in e)e.hasOwnProperty(a)&&i.push(e[a]);return i.join(";")}function Nn(e){var t;const n="http:"===location.protocol?"http://":"https://",r=null==(t=e.request_info)?void 0:t.player_version;return n+"yastatic.net"+(r?"/yandex-video-player-iframe-api-bundles/"+r+"/js/player-api-loader.js":"/yandex-video-player-iframe-api/js/player-api-loader.js")}function Dn(e,t){var n,r,i,a;const o={yandexuid:li(document,"yandexuid"),reqid:t.reqid,from:t.from,bundle:Nn(e),sandboxVersion:null==(n=e.request_info)?void 0:n.player_version,slots:kn((null==(r=e.request_info)?void 0:r.slots)||"",t.slots||""),frontendVhReqid:e["apphost-reqid"]||(null==(i=e.user_data)?void 0:i.req_id),contentId:null!=(s=e.content)&&s.actual_episode?e.content.actual_episode.content_id:null==(l=e.content)?void 0:l.content_id,fromBlock:t.from_block,streamBlock:t.stream_block||(null==(a=e.content)?void 0:a.streamBlock)};var s,l,c;(!o.reqid&&vn(t.counters)&&(o.reqid=t.counters.reqid),!o.reqid&&e.user_data)&&(o.reqid=null==(c=e.user_data)?void 0:c.req_id);return o.reqid||(o.reqid=""),o}function Ln(){return(Ln=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}async function xn(e,t){const n=await async function(e,t){const n=ce("https://frontend.vh.yandex.ru/player/"+e+".json",(t?oe(t):{})||{});return await(await fetch(n,{credentials:"include"})).json()}(e,t),r=new zd(t);return{vhParams:n,sourceConfig:r.getSourceConfig(n),skinConfig:r.getSkinConfig(n)}}function Mn(e){if(void 0!==e)return e.error?Xd[e.error]:void 0===e.content?Xd.not_found:void 0}function Fn(e){const{details:t}=e;try{const e="string"===typeof t?JSON.parse(t):t;return Boolean(e.isVhError)}catch(n){}return!1}function Un(e){return void 0===e&&(e=ls),e in $d&&$d[e].preferHd}function Vn(e){return void 0===e&&(e="/log"),"https://log.strm.yandex.ru"+e}function Bn(){return Vn("/"+it((e=ru,t=iu,Math.floor(Math.floor(Math.random()*(t-e+1))+e))));var e,t}function jn(e){return{reqid:null==e?void 0:e.reqid,from_block:null==e?void 0:e.from_block,frontend_vh_reqid:null==e?void 0:e.frontend_vh_reqid,recommender_reqid:null==e?void 0:e.recommender_reqid,stream_block:null==e?void 0:e.stream_block}}function Yn(){if(void 0!==document.featurePolicy)try{return document.featurePolicy.allowedFeatures()}catch(e){return}}function Hn(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function Kn(){return(Kn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const qn=["play","setSource","destroy"],Gn=["sendReportLog","preloadSource","requestVideoElementFullscreen","requestDebugInfo","requestExternalPlay","requestExternalPlayerList","insertInto","playAdViewers",...qn],Wn=["pause","on","once","off","publicEmit"],Zn=["setVideoTrack","setAudioTrack","setTextTrack","changeAdditionalParams","exitVideoElementFullscreen","setPlaybackRate","setMuted","setVolume","setPictureInPictureAllowed","setVideoStyle","setNativeControlsVisibility","setNativeTextTrackVisibility","logEvent","logError","seek","openReportWindow","playInrollAd","skipAdPod","setNativeAdControlsVisibility","setDebugPanelVisibility",...Wn],zn=[...Gn,...Zn,"getState","getReadyState"],Xn=window;Xn.Ya||(Xn.Ya={}),Xn.Ya.playerApi||(Xn.Ya.playerApi={}),Xn.Ya.playerApi.METHODS||(Xn.Ya.playerApi.METHODS=zn);const Jn=window.Ya.playerApi,Qn=window.Ya.playerApi;var $n=e(5386),er=e(7293),tr=e(7881);const nr={}.toString,rr=/\[object (\w+)\]/,ir=Date&&n(Date.now)?()=>Date.now():()=>(new Date).getTime(),ar="undefined"===typeof window?void 0:window.performance,or=ar&&n(ar.now),sr=ar&&ar.timing&&ar.timing.navigationStart?ar.timing.navigationStart:ir();let lr=0;const cr=or?()=>ar.now():()=>(()=>{const e=ir()-sr;return lr=Math.max(e,lr),lr})();let dr;!function(e){e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.BUFFER_STALLED_ERROR="bufferStalledError",e.SHAKA_VIDEO_ERROR_3016="shaka.VIDEO_ERROR_3016",e.FRAG_PARSING_ERROR="fragParsingError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.PIPELINE_ERROR_DECODE="PIPELINE_ERROR_DECODE",e.DECODER_ERROR_NOT_SUPPORTED="DECODER_ERROR_NOT_SUPPORTED",e.SHAKA_CONTENT_UNSUPPORTED_BY_BROWSER_4032="shaka.CONTENT_UNSUPPORTED_BY_BROWSER_4032",e.BUFFER_APPEND_ERROR="bufferAppendError",e.SHAKA_MEDIA_SOURCE_OPERATION_THREW_3015="shaka.MEDIA_SOURCE_OPERATION_THREW_3015",e.MEDIA_ELEMENT_ERROR_FORMAT_ERROR="MEDIA_ELEMENT_ERROR: Format error",e.REMUX_ALLOC_ERROR="remuxAllocError",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.DEMUXER_ERROR_COULD_NOT_OPEN="DEMUXER_ERROR_COULD_NOT_OPEN",e.NS_ERROR_DOM_INVALID_STATE_ERR="NS_ERROR_DOM_INVALID_STATE_ERR",e.SHAKA_DASH_INVALID_XML_4001="shaka.DASH_INVALID_XML_4001",e.SHAKA_QUOTA_EXCEEDED_ERROR_3017="shaka.QUOTA_EXCEEDED_ERROR_3017",e.CHUNK_DEMUXER_ERROR_APPEND_FAILED="CHUNK_DEMUXER_ERROR_APPEND_FAILED",e.FAILED_TO_INIT_DECODER="Failed to init decoder",e.PIPELINE_ERROR_INITIALIZATION_FAILED="PIPELINE_ERROR_INITIALIZATION_FAILED",e.NS_ERROR_FAILURE="NS_ERROR_FAILURE",e.SHAKA_MEDIA_SOURCE_OPERATION_FAILED_3014="shaka.MEDIA_SOURCE_OPERATION_FAILED_3014",e.REQUEST_FAILED="2147500036: Request failed",e.PIPELINE_ERROR_EXTERNAL_RENDERER_FAILED="PIPELINE_ERROR_EXTERNAL_RENDERER_FAILED",e.PIPELINE_ERROR_COULD_NOT_RENDER="PIPELINE_ERROR_COULD_NOT_RENDER",e.MEDIA_ELEMENT_ERROR_EMPTY_SRC_ATTRIBUTE="MEDIA_ELEMENT_ERROR: Empty src attribute",e.NS_ERROR_DOM_MEDIA_METADATA_ERR="NS_ERROR_DOM_MEDIA_METADATA_ERR",e.NS_ERROR_DOM_MEDIA_FATAL_ERR="NS_ERROR_DOM_MEDIA_FATAL_ERR",e.SHAKA_RESTRICTIONS_CANNOT_BE_MET_4012="shaka.RESTRICTIONS_CANNOT_BE_MET_4012",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.FRAG_LOAD_ERROR="fragLoadError",e.SHAKA_BAD_HTTP_STATUS_1001_MANIFEST="shaka.BAD_HTTP_STATUS_1001_MANIFEST",e.SHAKA_HTTP_ERROR_1002_SEGMENT="shaka.HTTP_ERROR_1002_SEGMENT",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.LEVEL_LOAD_ERROR="levelLoadError",e.SHAKA_HTTP_ERROR_1002_MANIFEST="shaka.HTTP_ERROR_1002_MANIFEST",e.SHAKA_BAD_HTTP_STATUS_1001_SEGMENT="shaka.BAD_HTTP_STATUS_1001_SEGMENT",e.SHAKA_UNSUPPORTED_SCHEME_1000="shaka.UNSUPPORTED_SCHEME_1000",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.SHAKA_TIMEOUT_1003_SEGMENT="shaka.TIMEOUT_1003_SEGMENT",e.FRAG_LOAD_TIME_OUT="fragLoadTimeOut",e.MANIFEST_LOAD_TIME_OUT="manifestLoadTimeOut",e.LEVEL_LOAD_TIME_OUT="levelLoadTimeOut",e.SHAKA_TIMEOUT_1003_MANIFEST="shaka.TIMEOUT_1003_MANIFEST",e.SHAKA_TIMEOUT_1003_LICENSE="shaka.TIMEOUT_1003_LICENSE",e.AUDIO_TRACK_LOAD_TIME_OUT="audioTrackLoadTimeOut",e.INTERNAL_EXCEPTION="internalException",e.SHAKA_OPERATION_ABORTED_7001="shaka.OPERATION_ABORTED_7001",e.ON_PLAYER_INIT_ERROR_INTERNAL="ON_PLAYER_INIT_ERROR_INTERNAL",e.UNABLE_TO_LOAD_PLAYER_IFRAME="UNABLE_TO_LOAD_PLAYER_IFRAME",e.ON_PLAYER_INIT_ERROR="ON_PLAYER_INIT_ERROR",e.LOADER_INIT_ERROR="LoaderInitError",e.UNABLE_TO_LOAD_PLAYER_INTERNAL_SCRIPT="UNABLE_TO_LOAD_PLAYER_INTERNAL_SCRIPT",e.FAILED_TO_DOWNLOAD_DEBUG_INFO="FAILED_TO_DOWNLOAD_DEBUG_INFO",e.SHAKA_REQUEST_FILTER_ERROR_1006="shaka.REQUEST_FILTER_ERROR_1006",e.PLAYER_CONTAINER_NOT_FOUND="PLAYER_CONTAINER_NOT_FOUND",e.KEY_LOAD_ERROR="keyLoadError",e.FEATURE_HANDLER_ERROR="FEATURE_HANDLER_ERROR",e.SHAKA_NO_LICENSE_SERVER_GIVEN_6012="shaka.NO_LICENSE_SERVER_GIVEN_6012",e.INVALID_CONFIG_ELEMENT_IN_CREATE_PLAYER="InvalidConfigElementInCreatePlayer",e.INVALID_CONFIG_LANG_IN_CREATE_PLAYER="InvalidConfigLangInCreatePlayer",e.INVALID_CONFIG_IN_CREATE_PLAYER="InvalidConfigInCreatePlayer",e.INVALID_CONFIG_IN_SET_SOURCE="InvalidConfigInSetSource",e.INVALID_CONFIG_IN_SOURCE_UPDATE="InvalidConfigInSourceUpdate",e.IFRAME_DOES_NOT_ALLOW_DRM="IframeDoesNotAllowDrm",e.DRM_IS_NOT_ALLOWED="DrmIsNotAllowed",e.SHAKA_FAILED_TO_CREATE_CDM_6002="shaka.FAILED_TO_CREATE_CDM_6002",e.SHAKA_HTTP_ERROR_1002_LICENSE="shaka.HTTP_ERROR_1002_LICENSE",e.SHAKA_LICENSE_REQUEST_FAILED_6007="shaka.LICENSE_REQUEST_FAILED_6007",e.SHAKA_FAILED_TO_GENERATE_LICENSE_REQUEST_6006="shaka.FAILED_TO_GENERATE_LICENSE_REQUEST_6006",e.SHAKA_REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE_6001="shaka.REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE_6001",e.SHAKA_FAILED_TO_ATTACH_TO_VIDEO_6003="shaka.FAILED_TO_ATTACH_TO_VIDEO_6003",e.SHAKA_LICENSE_RESPONSE_REJECTED_6008="shaka.LICENSE_RESPONSE_REJECTED_6008",e.SHAKA_INVALID_SERVER_CERTIFICATE_6004="shaka.INVALID_SERVER_CERTIFICATE_6004",e.SHAKA_EXPIRED_6014="shaka.EXPIRED_6014",e.SHAKA_BAD_HTTP_STATUS_1001_LICENSE="shaka.BAD_HTTP_STATUS_1001_LICENSE",e.EXTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR="EXTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR",e.INTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR="INTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR",e.LOAD_SKIN_ERROR="LOAD_SKIN_ERROR",e.INSERT_INTO_WITH_SECURE_FRAME="INSERT_INTO_WITH_SECURE_FRAME",e.PLAY_AD_VIEWERS_WITH_SECURE_FRAME="PLAY_AD_VIEWERS_WITH_SECURE_FRAME",e.ELEMENT_NOT_IN_DOM="ELEMENT_NOT_IN_DOM",e.ERROR_SCREEN_LOAD_ERROR="ERROR_SCREEN_LOAD_ERROR",e.REQUEST_SOURCE_ERROR="REQUEST_SOURCE_ERROR"}(dr||(dr={}));const ur="DEFAULT_ERROR_MESSAGE",hr=0,fr="",pr="?:?:?",mr=!0;var gr=e(8139),yr=e.n(gr),_r=e(2818),vr=e(8833);let Er,Sr;!function(e){e.DEFAULT="DEFAULT",e.MEDIA="MEDIA",e.NETWORK_MEDIA="NETWORK_MEDIA",e.NETWORK_PLAYER="NETWORK_PLAYER",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NO_CODECS="NO_CODECS",e.CANNOT_PLAY="CANNOT_PLAY",e.UNSUPPORTED_ENV="UNSUPPORTED_ENV",e.EXCEPTION="EXCEPTION",e.ADS="ADS",e.CONFIG="CONFIG",e.REGIONAL="REGIONAL",e.DRM="DRM",e.ACCESS="ACCESS",e.BANNED="BANNED"}(Er||(Er={})),function(e){e.DEFAULT_ERROR="DEFAULT_ERROR",e.YANDEX_RPC_ERROR="YANDEX_RPC_ERROR",e.BROADCAST_AD_BLOCK_INIT_ERROR="BROADCAST_AD_BLOCK_INIT_ERROR",e.AD_TYPE_IS_NOT_RECOGNIZED="AD_TYPE_IS_NOT_RECOGNIZED",e.INVALID_METADATA="INVALID_METADATA",e.INVALID_STREAM_URL="INVALID_STREAM_URL",e.UNSUPPORTED_MEDIA_TYPE="UNSUPPORTED_MEDIA_TYPE",e.SCRIPT_INIT_ERROR="SCRIPT_INIT_ERROR",e.MPD_WIDEVINE_CERT_LOAD_ERROR="MPD_WIDEVINE_CERT_LOAD_ERROR",e.MPD_SHAKA_INIT_ERROR="MPD_SHAKA_INIT_ERROR",e.NATIVE_HLS_NOT_SUPPORTED_ERROR="NATIVE_HLS_NOT_SUPPORTED_ERROR",e.HLS_JS_NOT_SUPPORTED_ERROR="HLS_JS_NOT_SUPPORTED_ERROR",e.REFRESH_SUBTITLES_ERROR="REFRESH_SUBTITLES_ERROR",e.ON_TICK_ERROR="ON_TICK_ERROR",e.FAIRPLAY_NOT_SUPPORTED="FAIRPLAY_NOT_SUPPORTED",e.FAIRPLAY_CERT_LOAD_ERROR="FAIRPLAY_CERT_LOAD_ERROR",e.FAIRPLAY_CREATE_MEDIA_KEYS_ERROR="FAIRPLAY_CREATE_MEDIA_KEYS_ERROR",e.FAIRPLAY_CREATE_KEY_SESSION_ERROR="FAIRPLAY_CREATE_KEY_SESSION_ERROR",e.FAIRPLAY_SPC_LOAD_ERROR="FAIRPLAY_SPC_LOAD_ERROR",e.FAIRPLAY_CREATE_KEY_ERROR="FAIRPLAY_CREATE_KEY_ERROR",e.FAIRPLAY_INVALID_CONTENT_ID="FAIRPLAY_INVALID_CONTENT_ID",e.DRM_PROXY_ERROR="DRM_PROXY_ERROR",e.DRM_PROXY_ERROR_SIGNATURE_EXPIRED="DRM_PROXY_ERROR_SIGNATURE_EXPIRED",e.DRM_INIT_ERROR="DRM_INIT_ERROR",e.DRM_NO_INIT_DATA="DRM_NO_INIT_DATA",e.DRM_CERT_LOAD_ERROR="DRM_CERT_LOAD_ERROR",e.DRM_NO_SUPPORTED_KEY_SYSTEM="DRM_NO_SUPPORTED_KEY_SYSTEM",e.DRM_FAILED_TO_CREATE_CDM="DRM_FAILED_TO_CREATE_CDM",e.DRM_FAILED_TO_SET_MEDIA_KEYS="DRM_FAILED_TO_SET_MEDIA_KEYS",e.DRM_NO_LICENSE_SERVER="DRM_NO_LICENSE_SERVER",e.DRM_FAILED_TO_CREATE_SESSION="DRM_FAILED_TO_CREATE_SESSION",e.DRM_SESSION_ERROR="DRM_SESSION_ERROR",e.DRM_FAILED_TO_GENERATE_REQUEST="DRM_FAILED_TO_GENERATE_REQUEST",e.DRM_UNKNOWN_ERROR="DRM_UNKNOWN_ERROR",e.NO_HLS_JS_INSTANCE="NO_HLS_JS_INSTANCE",e.AD_IS_ALREADY_PLAYING="AD_IS_ALREADY_PLAYING",e.META_INFO_REQUEST_FAILED="META_INFO_REQUEST_FAILED",e.MULTIROLL_INIT_ERROR="MULTIROLL_INIT_ERROR",e.REACT_COMPONENT_DID_CATCH_ERROR_INFO="REACT_COMPONENT_DID_CATCH_ERROR_INFO",e.PLAY_AD_VIEWERS_ERROR="PLAY_AD_VIEWERS_ERROR",e.SAGA_ERROR="SAGA_ERROR",e.STRM_ABD_INVALID_RESPONSE="STRM_ABD_INVALID_RESPONSE",e.REPRESENTATION_CHANGE="REPRESENTATION_CHANGE",e.RECOVER_TASK_ERROR="RECOVER_TASK_ERROR",e.PRELOAD_SOURCE_FAILED="PRELOAD_SOURCE_FAILED",e.REGIONAL_LIMITATION_MANIFEST="REGIONAL_LIMITATION_MANIFEST",e.REGIONAL_LIMITATION_LEVEL="REGIONAL_LIMITATION_LEVEL",e.REGIONAL_LIMITATION_SEGMENT="REGIONAL_LIMITATION_SEGMENT",e.SIGNATURE_EXPIRED_MANIFEST="SIGNATURE_EXPIRED_MANIFEST",e.SIGNATURE_EXPIRED_LEVEL="SIGNATURE_EXPIRED_LEVEL",e.SIGNATURE_EXPIRED_SEGMENT="SIGNATURE_EXPIRED_SEGMENT",e.BANNED_MANIFEST="BANNED_MANIFEST",e.BANNED_LEVEL="BANNED_LEVEL",e.BANNED_SEGMENT="BANNED_SEGMENT",e.MANIFEST_NOT_FOUND="MANIFEST_NOT_FOUND",e.NO_STREAMS="NO_STREAMS",e.NO_CODECS="NO_CODECS",e.NO_MSE="NO_MSE",e.NO_DRM_CONFIG="NO_DRM_CONFIG",e.NO_DRM="NO_DRM",e.NO_PLAYABLE_STREAMS="NO_PLAYABLE_STREAMS",e.SHAKA_FILTER_ERROR="SHAKA_FILTER_ERROR",e.SHAKA_CONFIGURE_ERROR="SHAKA_CONFIGURE_ERROR",e.SHAKA_LOAD_SOURCE_ERROR="SHAKA_LOAD_SOURCE_ERROR",e.MEDIA_ERR_CUSTOM="MEDIA_ERR_CUSTOM",e.MEDIA_ERR_ABORTED="MEDIA_ERR_ABORTED",e.MEDIA_ERR_NETWORK="MEDIA_ERR_NETWORK",e.MEDIA_ERR_DECODE="MEDIA_ERR_DECODE",e.MEDIA_ERR_SRC_NOT_SUPPORTED="MEDIA_ERR_SRC_NOT_SUPPORTED",e.MEDIA_ERR_ENCRYPTED="MEDIA_ERR_ENCRYPTED"}(Sr||(Sr={}));var Rr=e(3770),Ar=e(6377);class Tr extends Error{constructor(e,t){const n="object"===typeof e?e:{message:String(e),code:0};if(super(String(n.message)),this.message=void 0,this.messageDetails=void 0,this.code=void 0,this.category=void 0,this.isFatal=void 0,this.details=void 0,this.stack=void 0,this.vsid=void 0,yr()(this,Tr.prototype),this.message=n.message||this.message,this.messageDetails=n.messageDetails,this.code=n.code,this.category=null!=n&&n.category&&(null==n?void 0:n.category)!==Er.DEFAULT?n.category:r(this.code),this.details=n.details,this.isFatal=void 0===n.isFatal||n.isFatal,this.stack=n.stack&&"?:?:?"!==n.stack?n.stack:this.details&&this.details.stack||((e,t)=>{const{url:n,line:r,col:i,fileName:a,columnNumber:o,lineNumber:s}=e;return String(t||(n||a||"?")+":"+(r||s||"?")+":"+(i||o||"?"))})(n,this.stack),!this.stack||this.stack===pr)try{throw new Error(this.message)}catch(na){(0,Rr.K)(na)&&(this.stack=na.stack||pr)}this.vsid=t||n.vsid}static from(e,t){var n,r;if(void 0===t&&(t={}),e instanceof Tr)return e;const a=null!=(n=null!=(r=t.code)?r:(0,_r.Y)(()=>e.code))?n:0;return(0,Ar.V)(e)?new Tr(i({},e,t,{code:a})):(0,vr.H)(e)?new Tr(i({message:e},t,{code:a})):new Tr(i({message:"UNEXPECTED_ERROR_TYPE"},t,{code:a}))}toString(){return JSON.stringify(this.toJSON())}toJSON(){const e={message:this.message,messageDetails:this.messageDetails,code:this.code,category:this.category,isFatal:this.isFatal,details:this.details,stack:this.stack,vsid:this.vsid};return i({},e,{raw:JSON.stringify(e)})}}var br=e(2439),Or=e(9738);let Cr=0;let Pr,Ir,wr;!function(e){e.PLAY="play",e.PAUSE="pause",e.BUFFERING="buffering",e.END="end"}(Pr||(Pr={})),function(e){e.Unknown="Unknown",e.ExternalApi="ExternalApi",e.VisiblePlayback="VisiblePlayback",e.PlayRejected="PlayRejected",e.RestoreAfterInsertInto="RestoreAfterInsertInto",e.WaitForSourceConfigUpdate="WaitForSourceConfigUpdate",e.CompletedRecoverSourceConfig="CompletedRecoverSourceConfig"}(Ir||(Ir={})),function(e){e.init="init",e.ready="ready",e.broken="broken",e.destroyed="destroyed"}(wr||(wr={}));var kr=e(55),Nr=e(6351),Dr=e(141);const Lr=[...Wn,...qn];let xr;!function(e){e.NATIVE="NATIVE",e.HLS="HLS",e.MPD="MPD",e.MP4="MP4",e.YANDEX="YANDEX",e.YASP="YASP"}(xr||(xr={}));const Mr={AD:"play.start.adsdk",[xr.YANDEX]:"play.start.yandex",[xr.YASP]:"play.start.yasp",[xr.NATIVE]:"play.start.native",[xr.MPD]:"play.start.mpd",[xr.HLS]:"play.start.hls",[xr.MP4]:"play.start.mp4"},Fr={AD:"play.start.adsdk",[xr.YANDEX]:"play.start.adsdk.yandex",[xr.YASP]:"play.start.adsdk.yasp",[xr.NATIVE]:"play.start.adsdk.native",[xr.MPD]:"play.start.adsdk.mpd",[xr.HLS]:"play.start.adsdk.hls",[xr.MP4]:"play.start.adsdk.mp4"},Ur={AD:"network.start.adsdk",[xr.YANDEX]:"network.start.yandex",[xr.YASP]:"network.start.yasp",[xr.NATIVE]:"network.start.native",[xr.MPD]:"network.start.mpd",[xr.HLS]:"network.start.hls",[xr.MP4]:"network.start.mp4"},Vr={AD:"network.start.adsdk",[xr.YANDEX]:"network.start.adsdk.yandex",[xr.YASP]:"network.start.adsdk.yasp",[xr.NATIVE]:"network.start.adsdk.native",[xr.MPD]:"network.start.adsdk.mpd",[xr.HLS]:"network.start.adsdk.hls",[xr.MP4]:"network.start.adsdk.mp4"};let Br;!function(e){e.Ready="Ready",e.SkinReady="SkinReady",e.PosterReady="PosterReady",e.UserReady="UserReady",e.Destroy="Destroy",e.ContentImpression="ContentImpression",e.ResourcesIdle="ResourcesIdle",e.SourceChange="SourceChange",e.StreamChange="StreamChange",e.StreamsWithSupportInfoChange="StreamsWithSupportInfoChange",e.StartStageChange="StartStageChange",e.PlayingStateChange="PlayingStateChange",e.RequestPlayingState="RequestPlayingState",e.VideoTypeChange="VideoTypeChange",e.UtcStartTimeChange="UtcStartTimeChange",e.DVRStartTimeChange="DVRStartTimeChange",e.DVRDurationChange="DVRDurationChange",e.CurrentTimeChange="CurrentTimeChange",e.WatchedTimeChange="WatchedTimeChange",e.LiveLatencyChange="LiveLatencyChange",e.DurationChange="DurationChange",e.VolumeChange="VolumeChange",e.MutedChange="MutedChange",e.VolumeChangeReasonChange="VolumeChangeReasonChange",e.FullscreenStateChange="FullscreenStateChange",e.RequestFullscreenStateChange="RequestFullscreenStateChange",e.PictureInPictureStateChange="PictureInPictureStateChange",e.VisibleStateChange="VisibleStateChange",e.VideoSizeChange="VideoSizeChange",e.VideoTracksChange="VideoTracksChange",e.VideoTrackChange="VideoTrackChange",e.AudioTracksChange="AudioTracksChange",e.AudioTrackChange="AudioTrackChange",e.TextTracksChange="TextTracksChange",e.TextTrackChange="TextTrackChange",e.SubtitlesChange="SubtitlesChange",e.ErrorChange="ErrorChange",e.PlaybackRateRangeChange="PlaybackRateRangeChange",e.PlaybackRateChange="PlaybackRateChange",e.AdStateChange="AdStateChange",e.NextAdRemainingTimeChange="NextAdRemainingTimeChange",e.BeforeAdPodStart="BeforeAdPodStart",e.AdPodStart="AdPodStart",e.AdPodSkip="AdPodSkip",e.AdPodEnd="AdPodEnd",e.AdSkippableStateChange="AdSkippableStateChange",e.AdVolumeAvailabilityStateChange="AdVolumeAvailabilityStateChange",e.AdPodCloseStateChange="AdPodCloseStateChange",e.AdPodDurationChange="AdPodDurationChange",e.AdPodCurrentTimeChange="AdPodCurrentTimeChange",e.AdPodTimeToSkipChange="AdPodTimeToSkipChange",e.AdPodFullyClickableStateChange="AdPodFullyClickableStateChange",e.AdInteraction="AdInteraction",e.BufferedRangesChange="BufferedRangesChange",e.TileMetaInfoChange="TileMetaInfoChange",e.TileMetaInfoUrlChange="TileMetaInfoUrlChange",e.NetworkStatusChange="NetworkStatusChange",e.RecoverStart="RecoverStart",e.ConnectionQualityChange="ConnectionQualityChange",e.DrmSystemChange="DrmSystemChange",e.AdLoaded="AdLoaded",e.AdError="AdError",e.AdPodClick="AdPodClick",e.InrollFrame="InrollFrame",e.UgcLiveStatusChange="UgcLiveStatusChange"}(Br||(Br={}));const jr=u("object"===typeof self?self:window);var Yr;!function(e){e.LOAD_SCRIPT_ERROR="LOAD_SCRIPT_ERROR",e.STATS_SENSOR_NAME_ERROR="STATS_SENSOR_NAME_ERROR",e.STATS_LABEL_KEY_ERROR="STATS_LABEL_KEY_ERROR",e.STATS_LABEL_VALUE_ERROR="STATS_LABEL_VALUE_ERROR"}(Yr||(Yr={}));const Hr=(e,t,n)=>{const r=[];for(let i=0;i<e.length;i++){const a=e[i];t.call(n,a,i,e)&&r.push(a)}return r};var Kr=e(5638);const qr=[].find,Gr=(0,Kr.E)(qr)?(e,t)=>qr.call(e,t):(e,t)=>{for(let n=0;n<e.length;n++){const r=e[n];if(t(r,n,e))return r}};let Wr;const Zr=function(e){void 0===e&&(e=document.body);const t=h(e);return{JSON:t.contentWindow.JSON,clean:()=>function(e){e.src="",f(e)}(t)}},zr=e=>t=>{const{JSON:n,clean:r}=Zr();try{return n[e](t)}finally{r()}},Xr=e(5983);class Jr extends Error{constructor(e,t){void 0===t&&(t={});const n="object"===typeof e?e:{message:String(e||ur)};super(),Xr(this,Jr.prototype),this.message=t.message||n.message||ur,this.code=t.code||n.code||n.id||hr,this.isFatal=Boolean(function(e){const[t]=Hr(e,e=>void 0!==e);return t}([t.isFatal,n.isFatal,mr])),this.details=t.details||n.details||fr;const r=t.stack||n.stack||function(e){const{url:t,line:n,col:r,fileName:i,columnNumber:a,lineNumber:o}=e;return(t||i||"?")+":"+(n||o||"?")+":"+(r||a||"?")}(n);let i=r===pr?this.stack:r;if(i&&i!==pr)this.stack=i;else if(!this.stack)try{throw new Error(this.message)}catch(na){this.stack=i=na.stack||pr}this.toString=()=>m(this.toJSON()),this.toJSON=()=>({message:this.message,code:this.code,isFatal:this.isFatal,details:this.details,stack:i})}}var Qr=e(6652),$r=e(8194),ei=e(2447),ti=e(6794);const ni=e=>!0;e(5865);(0,$n.I)(()=>shaka.polyfill.installAll());const ri=u("object"===typeof self?self:window),ii={web_debug_log_calls:"false",web_debug_log_events:"false",web_debug_log_internals:"false",web_debug_panel:"false",web_disable_dpi:"false",web_disable_dynamic_buffer:"false",web_disable_yandex_engine:"false",web_forbid_allow_muted_autoplay:"false",web_pass_credentials:"false",web_sdk_normalize_time:"false",web_skin_load_timeout:"60000",web_wait_volumechange:"false",web_yasp_back_watch:"10",web_yasp_back_watch_mse:"10",web_yasp_buffer:"30",web_yasp_clear_useless_on_seek:"false",web_yasp_cmaf:"false",web_yasp_enable:"true",web_yasp_enable_network_traces:"false",web_yasp_enable_worker:"false",web_yasp_expected_time_to_load_multiplier:"1",web_yasp_fast_ewma_half_life:"0.25",web_yasp_live:"false",web_yasp_live_kal:"false",web_yasp_min_ttfb:"false",web_yasp_override_ewma_half_life:"false",web_yasp_parallel_downloads:"false",web_yasp_slow_ewma_half_life:"5",web_yasp_timeout_buffer:"default",web_yasp_ttfb_min_sample_count:"6",web_yasp_use_currenttime_for_fake_videostate:"false"};ri.flags||(ri.flags={});const ai=["setReadyInstance","setInstance"];var oi=e(8062);const si=e=>e instanceof Date||"Date"===(0,oi.M)(e),li=(e,t)=>{let n=[];try{n=e.cookie?e.cookie.split("; "):[]}catch(na){}const r=/(%[0-9A-Z]{2})+/g;let i;for(let a=0;a<n.length;a++){const e=n[a].split("="),o=e.slice(1).join("=");try{const n=e[0].replace(r,decodeURIComponent);if(o.replace(r,decodeURIComponent),t===n){i=decodeURIComponent(o);break}}catch(na){return}}return i};let ci;const di=function(e){return void 0===e&&(e=window),ci||(ci=e.document.createElement("div")),ci}(window),ui=(e,t)=>{const n="undefined"!==typeof di.style[e];if(n&&t&&(0,vr.H)(t))try{di.style.cssText=e+": "+t+";";const n=Boolean(di.style.cssText);return di.style.cssText="",n}catch(na){return!1}return n},hi=["","webkit","moz","o","ms"],fi={},pi=function(e){return void 0===e&&(e=""),fi[e]||function(e){const t=""+e[0].toUpperCase()+e.slice(1);for(let n=0;n<hi.length;n++){const r=hi[n],i=r?""+r+t:e;if(ui(i))return fi[e]=i}return fi[e]=e}(e)},mi=function(e,t){let n=e[t];if(!(0,Kr.E)(n)){const r=n;try{delete e[t],n=e[t],e[t]=r}catch(na){}}return n}(Object,"create")?Object.create:function(e,t){function n(){}if(n.prototype=e,(0,Rr.K)(t))for(const r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return new n};const gi=(0,e(984).C)(Array,"isArray"),yi=Boolean(gi)?e=>gi.call(Array,e):e=>"Array"===(0,oi.M)(e),_i=e=>{try{return"display"in x(e)}catch(na){return!1}},vi=e=>(e=>e instanceof Promise||"Promise"===(0,oi.M)(e)&&Boolean((0,_r.Y)(()=>(0,Kr.E)(e.constructor))))(e)||(e=>Boolean((0,_r.Y)(()=>(0,Nr.m)(e.then)&&(0,Nr.m)(e.catch))))(e),Ei=(e,t,n)=>{const r=new Array(e.length);for(let i=0;i<e.length;i++)r[i]=t.call(n,e[i],i,e);return r};const Si=(0,e(6566).A)(document.documentElement),Ri=function(){const e=Ei(Si,e=>e.ownerDocument),{length:t}=e,n=(t?e[t-1]:document).defaultView;return!!n&&n.self!==n.parent}();class Ai extends class{constructor(){this.on=[],this.once=[]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.on.push(...t),()=>this.remove(...t)}addOne(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.once.push(...t),()=>this.remove(...t)}promise(){return new Promise(e=>this.addOne(e))}dispatch(e){const{once:t}=this;this.once=[],B(this.on,e),B(t,e)}removeAll(){this.on.length=0,this.once.length=0}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.on=this.on.filter(e=>t.indexOf(e)<0),this.once=this.once.filter(e=>t.indexOf(e)<0)}}{constructor(e,t){void 0===t&&(t=(e,t)=>e===t),super(),this.checkToEqualFunction=t,this.value=e}getValue(){return this.value}subscribeValueCondition(e,t){return this.add(n=>{e(n)&&V(t,n)})}subscribeValueConditionOnce(e,t){const n=this.subscribeValueCondition(e,e=>{n(),V(t,e)});return n}dispatch(e){this.checkToEqualFunction(this.value,e)||(this.value=e,super.dispatch(e))}}var Ti=e(6048),bi=e.n(Ti);let Oi,Ci;!function(e){e.OFFLINE="offline",e.IDLE="idle",e.ATTEMPT="attempt",e.PLAYING="playing",e.ERROR="error"}(Oi||(Oi={})),function(e){e.init="init",e.waitForUserPlay="waitForUserPlay",e.waitForDocumentVisibility="waitForDocumentVisibility",e.starting="starting",e.started="started",e.broken="broken",e.destroyed="destroyed"}(Ci||(Ci={}));var Pi=e(1247);const Ii=function(e){void 0===e&&(e=window);const t=(0,Pi.i)(e).toLowerCase();return/windows/.test(t)}(),wi=function(e){void 0===e&&(e=window);const t=(0,Pi.i)(e).toLowerCase(),n=/windows nt (\d+\.\d+)/.exec(t);if(n){const e=Number(n[1]);return e>0?e:-1}return-1}(),ki={[Er.MEDIA]:"https://yandex.ru/support/video-player/loading-issues.html",[Er.NETWORK_MEDIA]:"https://yandex.ru/support/video-player/loading-issues.html",[Er.NETWORK_PLAYER]:"https://yandex.ru/support/video-player/player-issues.html",[Er.NETWORK_TIMEOUT]:"https://yandex.ru/support/video-player/player-issues.html",[Er.NO_CODECS]:"https://yandex.ru/search/?text=\u043a\u043e\u0434\u0435\u043a\u0438",[Er.UNSUPPORTED_ENV]:"https://yandex.ru/soft/browsers/",[Er.EXCEPTION]:"https://yandex.ru/support/video-player/loading-issues.html",[Er.DRM]:"https://yandex.ru/support/video-player/drm.html",[Er.BANNED]:null},Ni={[Er.DEFAULT]:"DEFAULT_ERROR_CATEGORY_TITLE",[Er.MEDIA]:"MEDIA_ERROR_CATEGORY_TITLE",[Er.NETWORK_MEDIA]:"NETWORK_MEDIA_ERROR_CATEGORY_TITLE",[Er.NETWORK_PLAYER]:"NETWORK_PLAYER_ERROR_CATEGORY_TITLE",[Er.NETWORK_TIMEOUT]:"NETWORK_TIMEOUT_ERROR_CATEGORY_TITLE",[Er.NO_CODECS]:"NO_CODECS_ERROR_CATEGORY_TITLE",[Er.UNSUPPORTED_ENV]:"UNSUPPORTED_ENV_ERROR_CATEGORY_TITLE",[Er.CANNOT_PLAY]:"CANNOT_PLAY_ERROR_CATEGORY_TITLE",[Er.EXCEPTION]:"EXCEPTION_ERROR_CATEGORY_TITLE",[Er.CONFIG]:"CONFIG_ERROR_CATEGORY_TITLE",[Er.REGIONAL]:"REGIONAL_ERROR_CATEGORY_TITLE",[Er.DRM]:"DRM_ERROR_CATEGORY_TITLE",[Er.ACCESS]:"ACCESS_ERROR_CATEGORY_TITLE",[Er.BANNED]:"BANNED_ERROR_CATEGORY_TITLE"},Di={[Er.DEFAULT]:"DEFAULT_ERROR_CATEGORY_MESSAGE",[Er.MEDIA]:"MEDIA_ERROR_CATEGORY_MESSAGE",[Er.NETWORK_MEDIA]:"NETWORK_MEDIA_ERROR_CATEGORY_MESSAGE",[Er.NETWORK_PLAYER]:"NETWORK_PLAYER_ERROR_CATEGORY_MESSAGE",[Er.NETWORK_TIMEOUT]:"NETWORK_TIMEOUT_ERROR_CATEGORY_MESSAGE",[Er.NO_CODECS]:"NO_CODECS_ERROR_CATEGORY_MESSAGE",[Er.UNSUPPORTED_ENV]:"UNSUPPORTED_ENV_ERROR_CATEGORY_MESSAGE",[Er.CANNOT_PLAY]:"CANNOT_PLAY_ERROR_CATEGORY_MESSAGE",[Er.EXCEPTION]:"EXCEPTION_ERROR_CATEGORY_MESSAGE",[Er.CONFIG]:"CONFIG_ERROR_CATEGORY_MESSAGE",[Er.DRM]:"DRM_ERROR_CATEGORY_MESSAGE",[Er.ACCESS]:"ACCESS_ERROR_CATEGORY_MESSAGE",[Er.BANNED]:"BANNED_ERROR_CATEGORY_MESSAGE"},Li={[Er.NO_CODECS]:"NO_CODECS_ERROR_CATEGORY_HELP_LINK",[Er.UNSUPPORTED_ENV]:"UNSUPPORTED_ENV_ERROR_CATEGORY_HELP_LINK"};let xi,Mi,Fi,Ui,Vi;!function(e){e.BroadcastAdReceived="BroadcastAdReceived",e.BroadcastAdInit="BroadcastAdInit",e.StreamPlayerReceivedMetadata="StreamPlayerReceivedMetadata",e.StreamPlayerChooseMetadata="StreamPlayerChooseMetadata",e.PlayWithoutRAAResults="PlayWithoutRAAResults",e.CanPlay="CanPlay",e.ContentImpression="ContentImpression",e.WaitForPlayCompleted="WaitForPlayCompleted",e.DrmSystemsSupportDetected="DrmSystemsSupportDetected",e.InrollAdStart="InrollAdStart",e.InrollAdPodStart="InrollAdPodStart",e.InrollAdPodEnd="InrollAdPodEnd",e.InrollAdEnd="InrollAdEnd",e.PlayAdViewers="PlayAdViewers",e.AdStart="AdStart",e.AdPodImpression="AdPodImpression",e.AdPodLoading="AdPodLoading",e.AdPodError="AdPodError",e.AdPodStart="AdPodStart",e.AdPodEnd="AdPodEnd",e.AdEnd="AdEnd",e.AdClickThru="AdClickThru",e.NoAdPodsToPlayAd="NoAdPodsToPlayAd",e.Stalled="Stalled",e.NudgeStalledFailed="NudgeStalledFailed",e.LoadSource="LoadSource",e.PrerollInit="PrerollInit",e.WaitForUserGesture="WaitForUserGesture",e.WaitForDocumentVisibility="WaitForDocumentVisibility",e.CallPublicApiAfterDestroy="CallPublicApiAfterDestroy",e.HiddenAutoplayPrevented="HiddenAutoplayPrevented",e.PlayVideoOnVisibilityChange="PlayVideoOnVisibilityChange",e.PauseVideoOnVisibilityChange="PauseVideoOnVisibilityChange",e.StreamStopWhileLoadingMultiroll="StreamStopWhileLoadingMultiroll",e.StreamStopWhileChoosingStream="StreamStopWhileChoosingStream",e.StreamStopWhileDestroyVideoController="StreamStopWhileDestroyVideoController",e.StreamStopDuringDefineAutoplaySettings="StreamStopDuringDefineAutoplaySettings",e.StreamStopWhileWaitingForPlay="StreamStopWhileWaitingForPlay",e.StreamStopWhileWaitingForDocumentVisibility="StreamStopWhileWaitingForDocumentVisibility",e.StreamStopWhileLoadingPreroll="StreamStopWhileLoadingPreroll",e.StreamStopWhilePreloadingPreroll="StreamStopWhilePreloadingPreroll",e.SkippableFragmentWidgetDrawn="SkippableFragmentWidgetDrawn",e.SkippableFragmentWidgetHidden="SkippableFragmentWidgetHidden",e.HlsJsLoadSourceCalledTwice="HlsJsLoadSourceCalledTwice",e.PreloadSource="PreloadSource",e.UsePreloadedHlsJs="UsePreloadedHlsJs",e.PlayAfterWaitingForDocumentVisibility="PlayAfterWaitingForDocumentVisibility",e.ResourcesIdle="ResourcesIdle",e.ClientInfo="ClientInfo",e.HlsJsForceCappingStart="HlsJsForceCappingStart",e.CanRenderSkinCalledBeforeSkinIsReady="CanRenderSkinCalledBeforeSkinIsReady",e.ExternalPlaybackOpenButtonClick="ExternalPlaybackOpenButtonClick",e.ExternalPlaybackCloseButtonClick="ExternalPlaybackCloseButtonClick",e.ExternalPlayerListVisibleStatusChange="ExternalPlayerListVisibleStatusChange",e.ExternalPlaybackPlayerCsrfFetching="ExternalPlaybackPlayerCsrfFetching",e.ExternalPlaybackPlayerCsrfFetchSuccess="ExternalPlaybackPlayerCsrfFetchSuccess",e.ExternalPlaybackPlayerCsrfFetchError="ExternalPlaybackPlayerCsrfFetchError",e.ExternalPlaybackPlayerListHasAnyDevice="ExternalPlaybackPlayerListHasAnyDevice",e.ExternalPlaybackPlayerListFetching="ExternalPlaybackPlayerListFetching",e.ExternalPlaybackPlayerListFetchSuccess="ExternalPlaybackPlayerListFetchSuccess",e.ExternalPlaybackPlayerListFetchError="ExternalPlaybackPlayerListFetchError",e.ExternalPlaybackPlayerListAboutInfoClick="ExternalPlaybackPlayerListAboutInfoClick",e.ExternalPlaybackPlayerListRefresh="ExternalPlaybackPlayerListRefresh",e.ExternalPlaybackPlayerActivate="ExternalPlaybackPlayerActivate",e.ExternalPlaybackPlayerActivateSucceed="ExternalPlaybackPlayerActivateSucceed",e.ExternalPlaybackPlayerActivateFailed="ExternalPlaybackPlayerActivateFailed",e.ExternalPlaybackCsrfTokenExpired="ExternalPlaybackCsrfTokenExpired",e.YandexRpcError="YandexRpcError",e.Seek="Seek",e.MediaInternalsHistoryOnFatal="MediaInternalsHistoryOnFatal",e.PlayInrollAd="PlayInrollAd",e.ShareButtonClick="ShareButtonClick",e.FPSControllerRestrictions="FPSControllerRestrictions",e.NativeVideoTypeChange="NativeVideoTypeChange"}(xi||(xi={})),function(e){e[e.PLAYING=1]="PLAYING",e[e.NOT_PLAYING=2]="NOT_PLAYING"}(Mi||(Mi={})),function(e){e.INIT="INIT",e.SET_SOURCE="SET_SOURCE"}(Fi||(Fi={})),function(e){e.SetMuted="SetMuted",e.SetVolume="SetVolume",e.RequestAutoplaySettings="RequestAutoplaySettings",e.VolumeChangeEvent="VolumeChangeEvent",e.RestoreSavedMuted="RestoreSavedMuted"}(Ui||(Ui={})),function(e){e.NO_MSE="NO_MSE",e.NO_CODECS="NO_CODECS",e.NO_SUPPORTED_DRM="NO_SUPPORTED_DRM",e.NO_SUPPORTED_FORMAT="NO_SUPPORTED_FORMAT",e.INVALID_STREAM_URL="INVALID_STREAM_URL"}(Vi||(Vi={}));Vi.NO_MSE,Vi.NO_CODECS,Vi.NO_SUPPORTED_DRM,Vi.NO_SUPPORTED_FORMAT,Vi.INVALID_STREAM_URL;var Bi=e(7343);const ji=(0,Kr.E)(Object.getPrototypeOf)?e=>Object.getPrototypeOf(e):e=>e.__proto__||Object.prototype;let Yi;!function(e){e.PublicApiCall="PublicApiCall",e.Unload="Unload",e.PlayerContainerNotFound="PlayerContainerNotFound"}(Yi||(Yi={}));const Hi={min:0,max:1/0},Ki="0000000000000000000000000000000000000000000000000000000000000000",qi={state:Mi.NOT_PLAYING,type:void 0,adParams:{}},Gi={source:void 0,stream:void 0,drmSystem:void 0,startStage:Ci.init,playingState:Pr.PAUSE,playingStateReason:Ir.Unknown,videoType:void 0,utcStartTime:void 0,currentTime:NaN,watchedTime:0,dvrStartTime:NaN,dvrDuration:NaN,duration:NaN,volume:NaN,muted:!1,volumeChangeReason:void 0,isFullscreen:!1,pictureInPictureAllowed:!1,isPictureInPicture:!1,isVisible:!1,videoSize:void 0,videoTracks:[],videoTrack:void 0,audioTracks:[],audioTrack:void 0,textTracks:[],textTrack:void 0,subtitles:[],vsid:Ki,error:void 0,playbackRateRange:Hi,playbackRate:1,version:"1.0-10769",adState:qi,adSkippableState:!1,adVolumeAvailabilityState:!1,adPodCloseState:void 0,adPodCurrentTime:NaN,adPodTimeToSkip:NaN,adPodDuration:NaN,adPodFullyClickableState:void 0,nextAdRemainingTime:void 0,bufferedRanges:[],tileMetaInfo:void 0,tileMetaInfoUrl:void 0,liveLatency:void 0,connectionQuality:void 0,ugcLiveStatus:void 0};let Wi;!function(e){e[e.LOADING=0]="LOADING",e[e.READY=1]="READY",e[e.ERROR=2]="ERROR"}(Wi||(Wi={}));var Zi,zi,Xi=window.Map||function(){},Ji=window.Set||function(){},Qi=function(e,t){return(Qi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},$i=function(){return($i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ea=function(){function e(e){this.promise=e}return e.prototype.then=function(t){return new e(this.promise.then(t))},e.all=function(t){return new e(Promise.all(t.map((function(t){return t instanceof e?t.promise:t}))))},e}();(zi=Zi=Zi||{}).assertNever=function(e){throw new Error},zi.arrayToEnum=function(e){var t,n,r={};try{for(var i=W(e),a=i.next();!a.done;a=i.next()){var o=a.value;r[o]=o}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},zi.getValidEnumValues=function(e){var t,n,r=zi.objectKeys(e).filter((function(t){return"number"!=typeof e[e[t]]})),i={};try{for(var a=W(r),o=a.next();!o.done;o=a.next()){var s=o.value;i[s]=e[s]}}catch(n){t={error:n}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return zi.objectValues(i)},zi.objectValues=function(e){return zi.objectKeys(e).map((function(t){return e[t]}))},zi.objectKeys="function"==typeof Object.keys?function(e){return Object.keys(e)}:function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return n},zi.find=function(e,t){var n,r;try{for(var i=W(e),a=i.next();!a.done;a=i.next()){var o=a.value;if(t(o))return o}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},zi.isInteger="function"==typeof Number.isInteger?function(e){return Number.isInteger(e)}:function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};var ta,na,ra=Zi.arrayToEnum(["invalid_type","custom","invalid_union","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types"]),ia=function(e){function t(t){var n=this.constructor,r=e.call(this)||this;return r.issues=[],r.format=function(){var e={_errors:[]};return function t(n){var r,i;try{for(var a=W(n.issues),o=a.next();!o.done;o=a.next()){var s=o.value;if("invalid_union"===s.code)s.unionErrors.map(t);else if("invalid_return_type"===s.code)t(s.returnTypeError);else if("invalid_arguments"===s.code)t(s.argumentsError);else if(0===s.path.length)e._errors.push(s.message);else for(var l=e,c=0;c<s.path.length;){var d,u=s.path[c];c===s.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(s.message)):"string"==typeof u?l[u]=l[u]||{_errors:[]}:"number"==typeof u&&((d=[])._errors=[],l[u]=l[u]||d),l=l[u],c++}}}catch(n){r={error:n}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}}(r),e},r.addIssue=function(e){r.issues=z(z([],Z(r.issues)),[e])},r.addIssues=function(e){void 0===e&&(e=[]),r.issues=z(z([],Z(r.issues)),Z(e))},r.flatten=function(e){var t,n;void 0===e&&(e=function(e){return e.message});var i={},a=[];try{for(var o=W(r.issues),s=o.next();!s.done;s=o.next()){var l=s.value;0<l.path.length?(i[l.path[0]]=i[l.path[0]]||[],i[l.path[0]].push(e(l))):a.push(e(l))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return{formErrors:a,fieldErrors:i}},n=n.prototype,Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n,r.name="ZodError",r.issues=t,r}return K(t,e),Object.defineProperty(t.prototype,"errors",{get:function(){return this.issues},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this.message},Object.defineProperty(t.prototype,"message",{get:function(){return JSON.stringify(this.issues,null,2)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.issues.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"formErrors",{get:function(){return this.flatten()},enumerable:!1,configurable:!0}),t.create=function(e){return new t(e)},t}(Error),aa=function(e,t){var n;switch(e.code){case ra.invalid_type:n="undefined"===e.received?"Required":"Expected "+e.expected+", received "+e.received;break;case ra.unrecognized_keys:n="Unrecognized key(s) in object: "+e.keys.map((function(e){return"'"+e+"'"})).join(", ");break;case ra.invalid_union:n="Invalid input";break;case ra.invalid_enum_value:n="Invalid enum value. Expected "+e.options.map((function(e){return"string"==typeof e?"'"+e+"'":e})).join(" | ")+", received "+("string"==typeof t.data?"'"+t.data+"'":t.data);break;case ra.invalid_arguments:n="Invalid function arguments";break;case ra.invalid_return_type:n="Invalid function return type";break;case ra.invalid_date:n="Invalid date";break;case ra.invalid_string:n="regex"!==e.validation?"Invalid "+e.validation:"Invalid";break;case ra.too_small:n="array"===e.type?"Should have "+(e.inclusive?"at least":"more than")+" "+e.minimum+" items":"string"===e.type?"Should be "+(e.inclusive?"at least":"over")+" "+e.minimum+" characters":"number"===e.type?"Value should be greater than "+(e.inclusive?"or equal to ":"")+e.minimum:"Invalid input";break;case ra.too_big:n="array"===e.type?"Should have "+(e.inclusive?"at most":"less than")+" "+e.maximum+" items":"string"===e.type?"Should be "+(e.inclusive?"at most":"under")+" "+e.maximum+" characters long":"number"===e.type?"Value should be less than "+(e.inclusive?"or equal to ":"")+e.maximum:"Invalid input";break;case ra.custom:n="Invalid input";break;case ra.invalid_intersection_types:n="Intersections only support objects";break;default:n=t.defaultError,Zi.assertNever(e)}return{message:n}},oa=aa,sa=Zi.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),la=function(e){switch(typeof e){case"undefined":return sa.undefined;case"string":return sa.string;case"number":return isNaN(e)?sa.nan:sa.number;case"boolean":return sa.boolean;case"function":return sa.function;case"bigint":return sa.bigint;case"object":return Array.isArray(e)?sa.array:null===e?sa.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?sa.promise:e instanceof Xi?sa.map:e instanceof Ji?sa.set:e instanceof Date?sa.date:sa.object;default:return sa.unknown}},ca=function(e,t,n,r){var i=z(z([],Z(t)),Z(r.path||[])),a=$i($i({},r),{path:i});t=aa(a,{data:e,defaultError:"Invalid input"});return $i($i({},r),{path:i,message:r.message||n(a,{data:e,defaultError:t.message}).message})},da=function(e){if(null===e)return[];for(var t=new Array(e.count);null!==e;)t[e.count-1]=e.component,e=e.parent;return t},ua=function(e){for(var t=null,n=0;n<e.length;n++)t={parent:t,component:e[n],count:n+1};return t},ha=function(){function e(e,t,n){this.path=e,this.issues=t,this.params=n}return e.prototype.stepInto=function(t){return new e(null===this.path?{parent:null,count:1,component:t}:{parent:this.path,count:this.path.count+1,component:t},this.issues,this.params)},e.prototype.addIssue=function(e,t){t=ca(e,da(this.path),this.params.errorMap,t),this.issues.push(t)},e}(),fa=Object.freeze({valid:!1}),pa=function(e){return{valid:!0,value:e}},ma=function(e){return new ea(e)},ga=function(e){return!1===e.valid},ya=function(e){return!0===e.valid},_a=function(e){return e instanceof ea};(na=ta=ta||{}).errToObj=function(e){return"string"==typeof e?{message:e}:e||{}},na.toString=function(e){return"string"==typeof e?e:null==e?void 0:e.message};var va,Ea=function(e){return e.params.async?[]:null},Sa=function(e){var t;return new ha(ua(e.path||[]),[],{async:null!==(t=e.async)&&void 0!==t&&t,errorMap:e.errorMap||oa})},Ra=function(e,t,n){return ya(t)?{success:!0,data:t.value}:(null!=n&&n.addIssues(e.issues),{success:!1,error:new ia(e.issues)})},Aa=function(){function e(e){var t=this;this.parse=function(e,n){if((n=t.safeParse(e,n)).success)return n.data;throw n.error},this.safeParse=function(e,n){var r=Sa($i($i({},n),{async:!1}));e=t._parseSync(r,e,la(e));return Ra(r,e,null==n?void 0:n.parentError)},this.parseAsync=function(e,n){return q(t,void 0,void 0,(function(){var t;return G(this,(function(r){switch(r.label){case 0:return[4,this.safeParseAsync(e,n)];case 1:if((t=r.sent()).success)return[2,t.data];throw t.error}}))}))},this.safeParseAsync=function(e,n){return q(t,void 0,void 0,(function(){var t,r;return G(this,(function(i){switch(i.label){case 0:return t=Sa($i($i({},n),{async:!0})),r=this._parse(t,e,la(e)),[4,_a(r)?r.promise:Promise.resolve(r)];case 1:return r=i.sent(),[2,Ra(t,r,null==n?void 0:n.parentError)]}}))}))},this.spa=this.safeParseAsync,this.refine=function(e,n){return t._refinement((function(t,r){function i(){return r.addIssue($i({code:ra.custom},"string"==typeof n||void 0===n?{message:n}:"function"==typeof n?n(t):n))}var a=e(t);return a instanceof Promise?a.then((function(e){return!!e||(i(),!1)})):!!a||(i(),!1)}))},this.refinement=function(e,n){return t._refinement((function(t,r){return!!e(t)||(r.addIssue("function"==typeof n?n(t,r):n),!1)}))},this.superRefine=this._refinement,this.optional=function(){return to.create(t)},this.nullable=function(){return no.create(t)},this.nullish=function(){return t.optional().nullable()},this.array=function(){return Ua.create(t)},this.promise=function(){return $a.create(t)},this.isOptional=function(){return t.safeParse(void 0).success},this.isNullable=function(){return t.safeParse(null).success},this._def=e,this.transform=this.transform.bind(this),this.default=this.default.bind(this)}return e.prototype._parseSync=function(e,t,n){if(n=this._parse(e,t,n),_a(n))throw new Error("Synchronous parse encountered promise.");return n},e.prototype._refinement=function(e){return e=new eo(this instanceof eo?$i($i({},this._def),{effects:z(z([],Z(this._def.effects||[])),[{type:"refinement",refinement:e}])}):{schema:this,typeName:Va.ZodEffects,effects:[{type:"refinement",refinement:e}]})},e.prototype.or=function(e){return Ya.create([this,e])},e.prototype.and=function(e){return Ha.create(this,e)},e.prototype.transform=function(e){return new eo({schema:this,typeName:Va.ZodEffects,effects:[{type:"transform",transform:e}]})},e.prototype.default=function(e){return new ro({innerType:this,defaultValue:"function"==typeof e?e:function(){return e},typeName:Va.ZodDefault})},e}(),Ta=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[89ab][a-f0-9]{3}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,ba=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,Oa=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n._regex=function(e,t,r){return n.refinement((function(t){return e.test(t)}),$i({validation:t,code:ra.invalid_string},ta.errToObj(r)))},n.email=function(e){return new t($i($i({},n._def),{checks:z(z([],Z(n._def.checks)),[$i({kind:"email"},ta.errToObj(e))])}))},n.url=function(e){return new t($i($i({},n._def),{checks:z(z([],Z(n._def.checks)),[$i({kind:"url"},ta.errToObj(e))])}))},n.uuid=function(e){return new t($i($i({},n._def),{checks:z(z([],Z(n._def.checks)),[$i({kind:"uuid"},ta.errToObj(e))])}))},n.regex=function(e,r){return new t($i($i({},n._def),{checks:z(z([],Z(n._def.checks)),[$i({kind:"regex",regex:e},ta.errToObj(r))])}))},n.min=function(e,r){return new t($i($i({},n._def),{checks:z(z([],Z(n._def.checks)),[$i({kind:"min",value:e},ta.errToObj(r))])}))},n.max=function(e,r){return new t($i($i({},n._def),{checks:z(z([],Z(n._def.checks)),[$i({kind:"max",value:e},ta.errToObj(r))])}))},n.nonempty=function(e){return n.min(1,ta.errToObj(e))},n}return K(t,e),t.prototype._parse=function(e,t,n){var r,i;if(n!==sa.string)return e.addIssue(t,{code:ra.invalid_type,expected:sa.string,received:n}),fa;var a=!1;try{for(var o=W(this._def.checks),s=o.next();!s.done;s=o.next()){var l=s.value;if("min"===l.kind)t.length<l.value&&(a=!0,e.addIssue(t,{code:ra.too_small,minimum:l.value,type:"string",inclusive:!0,message:l.message}));else if("max"===l.kind)t.length>l.value&&(a=!0,e.addIssue(t,{code:ra.too_big,maximum:l.value,type:"string",inclusive:!0,message:l.message}));else if("email"===l.kind)ba.test(t)||(a=!0,e.addIssue(t,{validation:"email",code:ra.invalid_string,message:l.message}));else if("uuid"===l.kind)Ta.test(t)||(a=!0,e.addIssue(t,{validation:"uuid",code:ra.invalid_string,message:l.message}));else if("url"===l.kind)try{new URL(t)}catch(n){a=!0,e.addIssue(t,{validation:"url",code:ra.invalid_string,message:l.message})}else"regex"===l.kind&&(l.regex.test(t)||(a=!0,e.addIssue(t,{validation:"regex",code:ra.invalid_string,message:l.message})))}}catch(n){r={error:n}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return a?fa:pa(t)},t.prototype.length=function(e,t){return this.min(e,t).max(e,t)},Object.defineProperty(t.prototype,"isEmail",{get:function(){return!!this._def.checks.find((function(e){return"email"===e.kind}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isURL",{get:function(){return!!this._def.checks.find((function(e){return"url"===e.kind}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isUUID",{get:function(){return!!this._def.checks.find((function(e){return"uuid"===e.kind}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minLength",{get:function(){var e=-1/0;return this._def.checks.map((function(t){"min"===t.kind&&(null===e||t.value>e)&&(e=t.value)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxLength",{get:function(){var e=null;return this._def.checks.map((function(t){"max"===t.kind&&(null===e||t.value<e)&&(e=t.value)})),e},enumerable:!1,configurable:!0}),t.create=function(){return new t({checks:[],typeName:Va.ZodString})},t}(Aa),Ca=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.gte=function(e,t){return n.setLimit("min",e,!0,ta.toString(t))},n.min=n.gte,n.gt=function(e,t){return n.setLimit("min",e,!1,ta.toString(t))},n.lte=function(e,t){return n.setLimit("max",e,!0,ta.toString(t))},n.max=n.lte,n.lt=function(e,t){return n.setLimit("max",e,!1,ta.toString(t))},n.setLimit=function(e,r,i,a){return new t($i($i({},n._def),{checks:z(z([],Z(n._def.checks)),[{kind:e,value:r,inclusive:i,message:ta.toString(a)}])}))},n.int=function(e){return new t($i($i({},n._def),{checks:z(z([],Z(n._def.checks)),[{kind:"int",message:ta.toString(e)}])}))},n.positive=function(e){return new t($i($i({},n._def),{checks:z(z([],Z(n._def.checks)),[{kind:"min",value:0,inclusive:!1,message:ta.toString(e)}])}))},n.negative=function(e){return new t($i($i({},n._def),{checks:z(z([],Z(n._def.checks)),[{kind:"max",value:0,inclusive:!1,message:ta.toString(e)}])}))},n.nonpositive=function(e){return new t($i($i({},n._def),{checks:z(z([],Z(n._def.checks)),[{kind:"max",value:0,inclusive:!0,message:ta.toString(e)}])}))},n.nonnegative=function(e){return new t($i($i({},n._def),{checks:z(z([],Z(n._def.checks)),[{kind:"min",value:0,inclusive:!0,message:ta.toString(e)}])}))},n}return K(t,e),t.prototype._parse=function(e,t,n){var r,i;if(n!==sa.number)return e.addIssue(t,{code:ra.invalid_type,expected:sa.number,received:n}),fa;var a=!1;try{for(var o=W(this._def.checks),s=o.next();!s.done;s=o.next()){var l=s.value;"int"===l.kind?Zi.isInteger(t)||(a=!0,e.addIssue(t,{code:ra.invalid_type,expected:"integer",received:"float",message:l.message})):"min"===l.kind?(l.inclusive?t<l.value:t<=l.value)&&(a=!0,e.addIssue(t,{code:ra.too_small,minimum:l.value,type:"number",inclusive:l.inclusive,message:l.message})):"max"===l.kind&&(l.inclusive?t>l.value:t>=l.value)&&(a=!0,e.addIssue(t,{code:ra.too_big,maximum:l.value,type:"number",inclusive:l.inclusive,message:l.message}))}}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return a?fa:pa(t)},Object.defineProperty(t.prototype,"minValue",{get:function(){var e,t,n=null;try{for(var r=W(this._def.checks),i=r.next();!i.done;i=r.next()){var a=i.value;"min"===a.kind&&(null===n||a.value>n)&&(n=a.value)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxValue",{get:function(){var e,t,n=null;try{for(var r=W(this._def.checks),i=r.next();!i.done;i=r.next()){var a=i.value;"max"===a.kind&&(null===n||a.value<n)&&(n=a.value)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isInt",{get:function(){return!!this._def.checks.find((function(e){return"int"===e.kind}))},enumerable:!1,configurable:!0}),t.create=function(){return new t({checks:[],typeName:Va.ZodNumber})},t}(Aa),Pa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return K(t,e),t.prototype._parse=function(e,t,n){return n!==sa.bigint?(e.addIssue(t,{code:ra.invalid_type,expected:sa.bigint,received:n}),fa):pa(t)},t.create=function(){return new t({typeName:Va.ZodBigInt})},t}(Aa),Ia=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return K(t,e),t.prototype._parse=function(e,t,n){return n!==sa.boolean?(e.addIssue(t,{code:ra.invalid_type,expected:sa.boolean,received:n}),fa):pa(t)},t.create=function(){return new t({typeName:Va.ZodBoolean})},t}(Aa),wa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return K(t,e),t.prototype._parse=function(e,t,n){return n!==sa.date?(e.addIssue(t,{code:ra.invalid_type,expected:sa.date,received:n}),fa):isNaN(t.getTime())?(e.addIssue(t,{code:ra.invalid_date}),fa):pa(new Date(t.getTime()))},t.create=function(){return new t({typeName:Va.ZodDate})},t}(Aa),ka=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return K(t,e),t.prototype._parse=function(e,t,n){return n!==sa.undefined?(e.addIssue(t,{code:ra.invalid_type,expected:sa.undefined,received:n}),fa):pa(t)},t.create=function(){return new t({typeName:Va.ZodUndefined})},t}(Aa),Na=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return K(t,e),t.prototype._parse=function(e,t,n){return n!==sa.null?(e.addIssue(t,{code:ra.invalid_type,expected:sa.null,received:n}),fa):pa(t)},t.create=function(){return new t({typeName:Va.ZodNull})},t}(Aa),Da=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._any=!0,t}return K(t,e),t.prototype._parse=function(e,t,n){return pa(t)},t.create=function(){return new t({typeName:Va.ZodAny})},t}(Aa),La=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._unknown=!0,t}return K(t,e),t.prototype._parse=function(e,t,n){return pa(t)},t.create=function(){return new t({typeName:Va.ZodUnknown})},t}(Aa),xa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return K(t,e),t.prototype._parse=function(e,t,n){return e.addIssue(t,{code:ra.invalid_type,expected:sa.never,received:n}),fa},t.create=function(){return new t({typeName:Va.ZodNever})},t}(Aa),Ma=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return K(t,e),t.prototype._parse=function(e,t,n){return n!==sa.undefined?(e.addIssue(t,{code:ra.invalid_type,expected:sa.void,received:n}),fa):pa(t)},t.create=function(){return new t({typeName:Va.ZodVoid})},t}(Aa),Fa=function(e,t,n,r){if(n!==sa.array)return e.addIssue(t,{code:ra.invalid_type,expected:sa.array,received:n}),fa;var i=!1;null!==r.minLength&&t.length<r.minLength.value&&(i=!0,e.addIssue(t,{code:ra.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,message:r.minLength.message})),null!==r.maxLength&&t.length>r.maxLength.value&&(i=!0,e.addIssue(t,{code:ra.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,message:r.maxLength.message}));var a=Ea(e),o=new Array(t.length),s=r.type;return t.forEach((function(t,n){!function e(t,n){ya(n)?o[t]=n.value:ga(n)?i=!0:null!=a&&a.push(n.promise.then((function(n){return e(t,n)})))}(n,s._parse(e.stepInto(n),t,la(t)))})),null!==a&&0<a.length?ma(Promise.all(a).then((function(){return i?fa:pa(o)}))):i?fa:pa(o)},Ua=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.min=function(e,r){return new t($i($i({},n._def),{minLength:{value:e,message:ta.toString(r)}}))},n.max=function(e,r){return new t($i($i({},n._def),{maxLength:{value:e,message:ta.toString(r)}}))},n.length=function(e,t){return n.min(e,t).max(e,t)},n.nonempty=function(e){return n.min(1,e)},n}return K(t,e),t.prototype._parse=function(e,t,n){return Fa(e,t,n,this._def)},Object.defineProperty(t.prototype,"element",{get:function(){return this._def.type},enumerable:!1,configurable:!0}),t.create=function(e){return new t({type:e,minLength:null,maxLength:null,typeName:Va.ZodArray})},t}(Aa);!function(e){e.mergeShapes=function(e,t){return $i($i({},e),t)},e.intersectShapes=function(e,t){var n,r,i=Zi.objectKeys(e),a=Zi.objectKeys(t),o=(i=i.filter((function(e){return-1!==a.indexOf(e)})),{});try{for(var s=W(i),l=s.next();!l.done;l=s.next()){var c=l.value;o[c]=Ha.create(e[c],t[c])}}catch(e){n={error:e}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return $i($i($i({},e),t),o)}}(va=va||{});var Va,Ba=function(e){return function(t){return new ja($i($i({},e),{shape:function(){return $i($i({},e.shape()),t)}}))}},ja=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n._cached=null,n.strict=function(){return new t($i($i({},n._def),{unknownKeys:"strict"}))},n.strip=function(){return new t($i($i({},n._def),{unknownKeys:"strip"}))},n.passthrough=function(){return new t($i($i({},n._def),{unknownKeys:"passthrough"}))},n.nonstrict=n.passthrough,n.augment=Ba(n._def),n.extend=Ba(n._def),n.setKey=function(e,t){var r;return n.augment(((r={})[e]=t,r))},n.merge=function(e){var r=va.mergeShapes(n._def.shape(),e._def.shape());return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:function(){return r},typeName:Va.ZodObject})},n.catchall=function(e){return new t($i($i({},n._def),{catchall:e}))},n.pick=function(e){var r={};return Zi.objectKeys(e).map((function(e){r[e]=n.shape[e]})),new t($i($i({},n._def),{shape:function(){return r}}))},n.omit=function(e){var r={};return Zi.objectKeys(n.shape).map((function(t){-1===Zi.objectKeys(e).indexOf(t)&&(r[t]=n.shape[t])})),new t($i($i({},n._def),{shape:function(){return r}}))},n.partial=function(){var e,r={};for(e in n.shape){var i=n.shape[e];r[e]=i.isOptional()?i:i.optional()}return new t($i($i({},n._def),{shape:function(){return r}}))},n.deepPartial=function(){var e,r={};for(e in n.shape){var i=n.shape[e];r[e]=i instanceof t?i.isOptional()?i:i.deepPartial().optional():i.isOptional()?i:i.optional()}return new t($i($i({},n._def),{shape:function(){return r}}))},n.required=function(){var e,r={};for(e in n.shape){for(var i=n.shape[e];i instanceof to;)i=i._def.innerType;r[e]=i}return new t($i($i({},n._def),{shape:function(){return r}}))},n}return K(t,e),t.prototype._getCached=function(){if(null!==this._cached)return this._cached;var e=this._def.shape(),t=Zi.objectKeys(e);return this._cached={shape:e,keys:t}},t.prototype._parse=function(e,t,n){var r,i,a,o,s;if(n!==sa.object)return e.addIssue(t,{code:ra.invalid_type,expected:sa.object,received:n}),fa;var l=(n=this._getCached()).shape,c=(n=n.keys,!1),d=Ea(e),u={},h=function e(n,r){var i;ya(r)?(void 0!==(i=r.value)||n in t)&&(u[n]=i):ga(r)?c=!0:null!=d&&d.push(r.promise.then((function(t){return e(n,t)})))};try{for(var f=W(n),p=f.next();!p.done;p=f.next()){var m=p.value,g=l[m],y=t[m];h(m,g._parse(e.stepInto(m),y,la(y)))}}catch(e){_={error:e}}finally{try{p&&!p.done&&(r=f.return)&&r.call(f)}finally{if(_)throw _.error}}if(this._def.catchall instanceof xa){var _=this._def.unknownKeys;if("passthrough"===_){var v=Zi.objectKeys(t).filter((function(e){return!(e in l)}));try{for(var E=W(v),S=E.next();!S.done;S=E.next())m=S.value,u[m]=t[m]}catch(e){i={error:e}}finally{try{S&&!S.done&&(a=E.return)&&a.call(E)}finally{if(i)throw i.error}}}else if("strict"===_)0<(v=Zi.objectKeys(t).filter((function(e){return!(e in l)}))).length&&(c=!0,e.addIssue(t,{code:ra.unrecognized_keys,keys:v}));else if("strip"!==_)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{var R=this._def.catchall;v=Zi.objectKeys(t).filter((function(e){return!(e in l)}));try{for(var A=W(v),T=A.next();!T.done;T=A.next())m=T.value,y=t[m],h(m,R._parse(e.stepInto(m),y,la(y)))}catch(e){o={error:e}}finally{try{T&&!T.done&&(s=A.return)&&s.call(A)}finally{if(o)throw o.error}}}return null!==d&&0<d.length?ma(Promise.all(d).then((function(){return c?fa:pa(u)}))):c?fa:pa(u)},Object.defineProperty(t.prototype,"shape",{get:function(){return this._def.shape()},enumerable:!1,configurable:!0}),t.create=function(e){return new t({shape:function(){return e},unknownKeys:"strip",catchall:xa.create(),typeName:Va.ZodObject})},t.strictCreate=function(e){return new t({shape:function(){return e},unknownKeys:"strict",catchall:xa.create(),typeName:Va.ZodObject})},t.lazycreate=function(e){return new t({shape:e,unknownKeys:"strip",catchall:xa.create(),typeName:Va.ZodObject})},t}(Aa),Ya=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return K(t,e),t.prototype._parse=function(e,t,n){function r(n){var r=n.map((function(e){return new ia(e)}));return 1===(n=r.filter((function(e){return"invalid_type"!==e.issues[0].code}))).length?n[0].issues.forEach((function(t){return e.issues.push(t)})):e.addIssue(t,{code:ra.invalid_union,unionErrors:r}),fa}var i,a,o=this._def.options;if(e.params.async){var s=o.map((function(){return new ha(e.path,[],e.params)}));return ea.all(o.map((function(e,r){return e._parse(s[r],t,n)}))).then((function(e){var t,n;try{for(var i=W(e),a=i.next();!a.done;a=i.next()){var o=a.value;if(ya(o))return o}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r(s.map((function(e){return e.issues})))}))}var l=[];try{for(var c=W(o),d=c.next();!d.done;d=c.next()){var u=d.value,h=new ha(e.path,[],e.params),f=u._parseSync(h,t,n);if(!ga(f))return f;l.push(h.issues)}}catch(a){i={error:a}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return r(l)},Object.defineProperty(t.prototype,"options",{get:function(){return this._def.options},enumerable:!1,configurable:!0}),t.create=function(e){return new t({options:e,typeName:Va.ZodUnion})},t}(Aa),Ha=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return K(t,e),t.prototype._parse=function(e,t,n){function r(n,r){return ga(n)||ga(r)?fa:(r=function e(t,n){var r,i,a=la(t),o=la(n);if(t===n)return{valid:!0,data:t};if(a!==sa.object||o!==sa.object)return{valid:!1};var s=Zi.objectKeys(n),l=(o=Zi.objectKeys(t).filter((function(e){return-1!==s.indexOf(e)})),$i($i({},t),n));try{for(var c=W(o),d=c.next();!d.done;d=c.next()){var u=d.value,h=e(t[u],n[u]);if(!h.valid)return{valid:!1};l[u]=h.data}}catch(t){r={error:t}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return{valid:!0,data:l}}(n.value,r.value)).valid?pa(r.data):(e.addIssue(t,{code:ra.invalid_intersection_types}),fa)}return e.params.async?ea.all([this._def.left._parse(e,t,n),this._def.right._parse(e,t,n)]).then((function(e){var t;return r(e=(t=Z(e,2))[0],t=t[1])})):r(this._def.left._parseSync(e,t,n),this._def.right._parseSync(e,t,n))},t.create=function(e,n){return new t({left:e,right:n,typeName:Va.ZodIntersection})},t}(Aa),Ka=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return K(t,e),t.prototype._parse=function(e,t,n){if(n!==sa.array)return e.addIssue(t,{code:ra.invalid_type,expected:sa.array,received:n}),fa;if(t.length>this._def.items.length)return e.addIssue(t,{code:ra.too_big,maximum:this._def.items.length,inclusive:!0,type:"array"}),fa;if(t.length<this._def.items.length)return e.addIssue(t,{code:ra.too_small,minimum:this._def.items.length,inclusive:!0,type:"array"}),fa;var r=Ea(e),i=(n=this._def.items,new Array(n.length)),a=!1;return n.forEach((function(n,o){!function e(t,n){ya(n)?i[t]=n.value:ga(n)?a=!0:null!=r&&r.push(n.promise.then((function(n){return e(t,n)})))}(o,n._parse(e.stepInto(o),t[o],la(t[o])))})),null!==r&&0<r.length?ma(Promise.all(r).then((function(){return a?fa:pa(i)}))):a?fa:pa(i)},Object.defineProperty(t.prototype,"items",{get:function(){return this._def.items},enumerable:!1,configurable:!0}),t.create=function(e){return new t({items:e,typeName:Va.ZodTuple})},t}(Aa),qa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return K(t,e),t.prototype._parse=function(e,t,n){if(n!==sa.object)return e.addIssue(t,{code:ra.invalid_type,expected:sa.object,received:n}),fa;var r,i=Ea(e),a=this._def.valueType,o={},s=!1,l=function e(t,n){ya(n)?o[t]=n.value:ga(n)?s=!0:null!=i&&i.push(n.promise.then((function(n){return e(t,n)})))};for(r in t)l(r,a._parse(e.stepInto(r),t[r],la(t[r])));return null!==i&&0<i.length?ma(Promise.all(i).then((function(){return s?fa:pa(o)}))):s?fa:pa(o)},t.create=function(e){return new t({valueType:e,typeName:Va.ZodRecord})},t}(Aa),Ga=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return K(t,e),t.prototype._parse=function(e,t,n){if(n!==sa.map)return e.addIssue(t,{code:ra.invalid_type,expected:sa.map,received:n}),fa;var r=this._def.keyType,i=this._def.valueType,a=(t=t,new Xi),o=Ea(e),s=!1,l=function e(t,n){_a(t)||_a(n)?null!=o&&o.push(ea.all([t,n]).promise.then((function(t){t=(n=Z(t,2))[0];var n=n[1];return e(t,n)}))):ga(t)||ga(n)?s=!0:a.set(t.value,n.value)};return z([],Z(t.entries())).forEach((function(t,n){t=(a=Z(t,2))[0];var a=a[1];n=e.stepInto(n),t=r._parse(n.stepInto("key"),t,la(t)),a=i._parse(n.stepInto("value"),a,la(a));l(t,a)})),null!==o&&0<o.length?ma(Promise.all(o).then((function(){return s?fa:pa(a)}))):s?fa:pa(a)},t.create=function(e,n){return new t({valueType:n,keyType:e,typeName:Va.ZodMap})},t}(Aa),Wa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return K(t,e),t.prototype._parse=function(e,t,n){if(n!==sa.set)return e.addIssue(t,{code:ra.invalid_type,expected:sa.set,received:n}),fa;t=t;var r=this._def.valueType,i=new Ji,a=Ea(e),o=!1;return z([],Z(t.values())).forEach((function(t,n){return function e(t){ya(t)?i.add(t.value):ga(t)?o=!0:null!=a&&a.push(t.promise.then((function(t){return e(t)})))}(r._parse(e.stepInto(n),t,la(t)))})),null!==a&&0<a.length?ma(Promise.all(a).then((function(){return o?fa:pa(i)}))):o?fa:pa(i)},t.create=function(e){return new t({valueType:e,typeName:Va.ZodSet})},t}(Aa),Za=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.args=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return new t($i($i({},n._def),{args:Ka.create(e)}))},n.returns=function(e){return new t($i($i({},n._def),{returns:e}))},n.implement=function(e){return n.parse(e)},n.strictImplement=function(e){return n.parse(e)},n.validate=n.implement,n}return K(t,e),t.prototype._parse=function(e,t,n){function r(t,n){if(n.success)return n.data;throw n=ca(t,da(e.path),e.params.errorMap,{code:ra.invalid_arguments,argumentsError:n.error}),new ia([n])}function i(t,n){if(n.success)return n.data;throw n=ca(t,da(e.path),e.params.errorMap,{code:ra.invalid_return_type,returnTypeError:n.error}),new ia([n])}var a=this;if(n!==sa.function)return e.addIssue(t,{code:ra.invalid_type,expected:sa.function,received:n}),fa;var o={errorMap:e.params.errorMap},s=t;return this._def.returns instanceof $a?pa((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return q(a,void 0,void 0,(function(){var t,n,a,l,c;return G(this,(function(d){switch(d.label){case 0:return t=r,n=[e],[4,this._def.args.spa(e,o)];case 1:return a=t.apply(void 0,n.concat([d.sent()])),[4,s.apply(void 0,z([],Z(a)))];case 2:return a=d.sent(),l=i,c=[a],[4,this._def.returns.spa(a,o)];case 3:return[2,l.apply(void 0,c.concat([d.sent()]))]}}))}))})):pa((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=r(e,a._def.args.safeParse(e,o));return i(n=s.apply(void 0,z([],Z(n))),a._def.returns.safeParse(n,o))}))},t.prototype.parameters=function(){return this._def.args},t.prototype.returnType=function(){return this._def.returns},t.create=function(e,n){return new t({args:e||Ka.create([]),returns:n||La.create(),typeName:Va.ZodFunction})},t}(Aa),za=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return K(t,e),Object.defineProperty(t.prototype,"schema",{get:function(){return this._def.getter()},enumerable:!1,configurable:!0}),t.prototype._parse=function(e,t,n){return this._def.getter()._parse(e,t,n)},t.create=function(e){return new t({getter:e,typeName:Va.ZodLazy})},t}(Aa),Xa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return K(t,e),t.prototype._parse=function(e,t,n){return t!==this._def.value?(e.addIssue(t,{code:ra.invalid_type,expected:this._def.value,received:t}),fa):pa(t)},Object.defineProperty(t.prototype,"value",{get:function(){return this._def.value},enumerable:!1,configurable:!0}),t.create=function(e){return new t({value:e,typeName:Va.ZodLiteral})},t}(Aa),Ja=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return K(t,e),t.prototype._parse=function(e,t,n){return-1===this._def.values.indexOf(t)?(e.addIssue(t,{code:ra.invalid_enum_value,options:this._def.values}),fa):pa(t)},Object.defineProperty(t.prototype,"options",{get:function(){return this._def.values},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enum",{get:function(){var e,t,n={};try{for(var r=W(this._def.values),i=r.next();!i.done;i=r.next()){var a=i.value;n[a]=a}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Values",{get:function(){var e,t,n={};try{for(var r=W(this._def.values),i=r.next();!i.done;i=r.next()){var a=i.value;n[a]=a}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Enum",{get:function(){var e,t,n={};try{for(var r=W(this._def.values),i=r.next();!i.done;i=r.next()){var a=i.value;n[a]=a}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},enumerable:!1,configurable:!0}),t.create=X,t}(Aa),Qa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return K(t,e),t.prototype._parse=function(e,t,n){var r=Zi.getValidEnumValues(this._def.values);return-1===r.indexOf(t)?(e.addIssue(t,{code:ra.invalid_enum_value,options:Zi.objectValues(r)}),fa):pa(t)},t.create=function(e){return new t({values:e,typeName:Va.ZodNativeEnum})},t}(Aa),$a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return K(t,e),t.prototype._parse=function(e,t,n){var r=this;return n!==sa.promise&&!1===e.params.async?(e.addIssue(t,{code:ra.invalid_type,expected:sa.promise,received:n}),fa):(t=n===sa.promise?t:Promise.resolve(t),pa(t.then((function(t){return r._def.type.parseAsync(t,{path:da(e.path),errorMap:e.params.errorMap})}))))},t.create=function(e){return new t({type:e,typeName:Va.ZodPromise})},t}(Aa),eo=function(e){function t(t){return e.call(this,t)||this}return K(t,e),t.prototype.innerType=function(){return this._def.schema},t.prototype._parse=function(e,t,n){function r(e,t){switch(t.type){case"refinement":var n=t.refinement(e,s);if(n instanceof Promise){if(a)throw new Error("You can't use .parse() on a schema containing async refinements. Use .parseAsync instead.");return n.then((function(t){var n=s.issueFound;return l=l||n,e}))}return n=s.issueFound,l=l||n,e;case"transform":if((n=t.transform(e))instanceof Promise&&a)throw new Error("You can't use .parse() on a schema containing async transformations. Use .parseAsync instead.");return n;default:throw new Error("Invalid effect type.")}}function i(e){return(e=o.reduce((function(e,t){return e instanceof Promise?e.then((function(e){return r(e,t)})):r(e,t)}),e))instanceof Promise?ma(e.then((function(e){return l?fa:pa(e)}))):l?fa:pa(e)}var a=!1===e.params.async,o=this._def.effects||[],s={issueFound:!1,addIssue:function(n){this.issueFound=!0,e.addIssue(t,n)},get path(){return da(e.path)}},l=!1;if(a){var c=this._def.schema._parseSync(e,t,n);return ya(c)?(c=o.reduce(r,c.value),l?fa:pa(c)):fa}return n=this._def.schema._parse(e,t,n),ya(n)?i(n.value):ga(n)?fa:ma(n.promise.then((function(e){return ga(e)?fa:(e=i(e.value),_a(e)?e.promise:e)})))},t.create=function(e){return new t({schema:e,typeName:Va.ZodEffects})},t}(Aa),to=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return K(t,e),t.prototype._parse=function(e,t,n){return n===sa.undefined?pa(void 0):this._def.innerType._parse(e,t,n)},t.prototype.unwrap=function(){return this._def.innerType},t.create=function(e){return new t({innerType:e,typeName:Va.ZodOptional})},t}(Aa),no=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return K(t,e),t.prototype._parse=function(e,t,n){return n===sa.null?pa(null):this._def.innerType._parse(e,t,n)},t.prototype.unwrap=function(){return this._def.innerType},t.create=function(e){return new t({innerType:e,typeName:Va.ZodNullable})},t}(Aa),ro=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return K(t,e),t.prototype._parse=function(e,t,n){return n===sa.undefined&&(t=this._def.defaultValue()),this._def.innerType._parse(e,t,la(t))},t.prototype.removeDefault=function(){return this._def.innerType},t.create=function(e){return new to({innerType:e,typeName:Va.ZodOptional})},t}(Aa),io=function(e,t){return e?Da.create().refine(e,t):Da.create()},ao={object:ja.lazycreate};!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodPromise="ZodPromise"}(Va=Va||{});var oo=Oa.create,so=Ca.create,lo=Pa.create,co=Ia.create,uo=wa.create,ho=ka.create,fo=Na.create,po=Da.create,mo=La.create,go=xa.create,yo=Ma.create,_o=Ua.create,vo=ja.create,Eo=ja.strictCreate,So=Ya.create,Ro=Ha.create,Ao=Ka.create,To=qa.create,bo=Ga.create,Oo=Wa.create,Co=Za.create,Po=za.create,Io=Xa.create,wo=Ja.create,ko=Qa.create,No=$a.create,Do=eo.create,Lo=to.create,xo=no.create;Object.freeze({__proto__:null,ZodParsedType:sa,getParsedType:la,makeIssue:ca,EMPTY_PATH:null,pathToArray:da,pathFromArray:ua,ParseContext:ha,createRootContext:function(e){var t;return new ha(null,[],{async:null!==(t=e.async)&&void 0!==t&&t,errorMap:e.errorMap||oa})},INVALID:fa,OK:pa,ASYNC:ma,isInvalid:ga,isOk:ya,isAsync:_a,ZodType:Aa,ZodString:Oa,ZodNumber:Ca,ZodBigInt:Pa,ZodBoolean:Ia,ZodDate:wa,ZodUndefined:ka,ZodNull:Na,ZodAny:Da,ZodUnknown:La,ZodNever:xa,ZodVoid:Ma,ZodArray:Ua,get objectUtil(){return va},mergeObjects:function(e){return function(t){var n=va.mergeShapes(e._def.shape(),t._def.shape());return new ja({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:function(){return n},typeName:Va.ZodObject})}},ZodObject:ja,ZodUnion:Ya,ZodIntersection:Ha,ZodTuple:Ka,ZodRecord:qa,ZodMap:Ga,ZodSet:Wa,ZodFunction:Za,ZodLazy:za,ZodLiteral:Xa,ZodEnum:Ja,ZodNativeEnum:Qa,ZodPromise:$a,ZodEffects:eo,ZodTransformer:eo,ZodOptional:to,ZodNullable:no,ZodDefault:ro,custom:io,Schema:Aa,ZodSchema:Aa,late:ao,get ZodFirstPartyTypeKind(){return Va},any:po,array:_o,bigint:lo,boolean:co,date:uo,effect:Do,enum:wo,function:Co,instanceof:function(e,t){return void 0===t&&(t={message:"Input not instance of "+e.name}),io((function(t){return t instanceof e}),t)},intersection:Ro,lazy:Po,literal:Io,map:bo,nativeEnum:ko,never:go,null:fo,nullable:xo,number:so,object:vo,oboolean:function(){return co().optional()},onumber:function(){return so().optional()},optional:Lo,ostring:function(){return oo().optional()},promise:No,record:To,set:Oo,strictObject:Eo,string:oo,transformer:Do,tuple:Ao,undefined:ho,union:So,unknown:mo,void:yo,ZodIssueCode:ra,quotelessJson:function(e){return JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:")},ZodError:ia,defaultErrorMap:aa,get overrideErrorMap(){return oa},setErrorMap:function(e){oa=e}});const Mo=["be","en","id","kk","ru","tr","tt","uk","uz"],Fo=wo([Mo[0],...Mo.slice(1)]).transform(e=>e).default("ru"),Uo=So([Fo,oo().transform(()=>"ru")]).transform(e=>e).default("ru"),Vo=e=>void 0!==function(e){let t;try{t=JSON.stringify(e)}catch(na){}return t}(e),Bo=So([co().default(!1).transform(e=>({autoplay:e,allowMuted:!0})),vo({allowMuted:co()}).transform(e=>{let{allowMuted:t}=e;return{autoplay:!0,allowMuted:t}})]);var jo=e(3126);const Yo=So([co().default(!1).transform(e=>({logCalls:e,logEvents:e,logInternals:e,showDebugPanel:e})),vo({logCalls:co().default(!1),logEvents:co().default(!1),logInternals:co().default(!1),showDebugPanel:co().default(!1)})]).transform(e=>{let{logCalls:t,logEvents:n,logInternals:r,showDebugPanel:i}=e;return{logCalls:I("web_debug_log_calls")||(0,jo.O)("playerapi-debug-logcalls",J)||t,logEvents:I("web_debug_log_events")||(0,jo.O)("playerapi-debug-logevents",J)||n,logInternals:I("web_debug_log_internals")||(0,jo.O)("playerapi-debug-loginternals",J)||r,showDebugPanel:I("web_debug_panel")||(0,jo.O)("playerapi-debug-panel",J)||i}}),Ho=vo({}).passthrough().optional();var Ko=e(8258);let qo;!function(e){e.ALL="*",e.PLAY="play",e.START_SCREEN_PLAY="startScreenPlay",e.VOLUME="sound",e.VOLUME_SLIDER="volumeSlider",e.SETTINGS="settings",e.SETTINGS_ITEM="settingsItem",e.FULLSCREEN="fullscreen",e.TIMELINE="timeline",e.TIMELINE_PREVIEW="timelinePreview",e.LIVE="live",e.POSTER="poster",e.START_POSITION_CONFIRM="startPositionConfirm",e.TIME_DISPLAY="time",e.TITLE_DISPLAY="titleDisplay",e.REPORT="report",e.FORWARD="forward",e.BACKWARD="backward",e.LOGO="logo",e.PRELOADER="preloader",e.CONTEXT_MENU="contextMenu",e.START_SCREEN="startScreen",e.PLAYBACK_RATE="playbackRate",e.SKIPPABLE_FRAGMENTS="skippableFragments",e.EXTERNAL_PLAYBACK="externalPlayback",e.RECOMMENDATIONS="recommendations",e.CLOSE_BUTTON="closeButton",e.NEXT_AD_INFO="nextAdInfo",e.SUBTITLES_TOGGLE="subtitlesToggle",e.LOGO_WIDGET="logoWidget",e.SKIP_AD="skipAd",e.MOBILE_SEEK_BUTTONS="mobileSeekButtons",e.TITLE="title"}(qo||(qo={}));const Go=Q(qo).map(e=>qo[e]),Wo=So([ko(qo),oo().transform(()=>"")]),Zo=_o(Wo).transform(e=>e.filter(e=>""!==e)),zo=So([_o(Wo),oo().transform(e=>e.split(",").map(e=>e.trim()).filter(e=>""!==e))]).transform(e=>Zo.parse(e)).default(""),Xo=so().optional().transform(e=>Math.max(void 0===e?30:e,5)),Jo=So([co().transform(e=>({enabled:e,reportUrl:"https://yandex.ru/support/video-player/feedback.html"})),vo({enabled:mo().transform(e=>!0===e),reportUrl:oo().default("https://yandex.ru/support/video-player/feedback.html")})]).default(!1),Qo=So([co().transform(e=>{if(e)return{onlyMuted:!1,forceAutoplay:!0,threshold:.5}}),ho().transform(()=>({onlyMuted:!0,forceAutoplay:!1,threshold:.5})),vo({onlyMuted:co()}).strict().transform(e=>{let{onlyMuted:t}=e;return{threshold:.5,onlyMuted:t,forceAutoplay:!0}}),vo({threshold:so().nonnegative().max(1),onlyMuted:co().default(!1)}).transform(e=>{let{threshold:t,onlyMuted:n}=e;return{threshold:t,onlyMuted:n,forceAutoplay:!0}})]);let $o;!function(e){e.USER_VOLUME="yandexJSPlayerApiSavedUserAdjustedVolume",e.VOLUME="yandexJSPlayerApiSavedUserVolume",e.MUTED="yandexJSPlayerApiSavedUserMuted"}($o||($o={}));var es=e(2741);const ts={getItem(e){try{return es.ZP.getItem(e)}catch(t){return null}},setItem(e,t){try{es.ZP.setItem(e,t)}catch(n){}},removeItem(e){try{es.ZP.removeItem(e)}catch(t){}},clear(){try{es.ZP.clear()}catch(e){}}};class ns{static setSavedVolume(e){ts.setItem($o.VOLUME,String(e))}static getSavedVolume(){const e=this.parseVolume(ts.getItem($o.VOLUME));return void 0===e?1:e}static setSavedMuted(e){ts.setItem($o.MUTED,String(e))}static getSavedMuted(){return"true"===ts.getItem($o.MUTED)}static parseVolume(e){if(!(0,vr.H)(e))return;const t=parseFloat(e);return isNaN(t)?void 0:t>=0&&t<=1?t:t>=0&&t<=100?t/100:void 0}}const rs=so().refine(ee,"must be a number 0..1").optional().transform(e=>void 0===e?ns.getSavedVolume():e).transform(e=>ee(e)?e:1),is=vo({debug:Yo,autoplay:Bo,slowConnection:co().default(!1),volume:rs,muted:co().optional(),preload:co().default(!0),autoQuality:co().default(!0),defaultQuality:so().nullable().default(720),feed:co().default(!1),useAbdBundle:co().default(!1),lang:Uo,env:Ho,maxBufferLength:so().refine(c).transform(tr.toSeconds).optional(),enableRemoteProgressSaving:co().default(!1),liveOffset:Xo,bandwidthEstimateOffset:so().refine(c).transform(tr.toBps).optional(),report:Jo,preferNative:co().default(!1),disableAndroidPlayer:co().default(!1),togglePlaybackOnVisibilityChange:Qo,restoreTabSessionPlaybackProgress:co().default(!1),useFallbackStream:co().default(!1),loadSkin:So([Co(),Io(!1)]).optional(),perfLogUrl:oo().optional(),skinParams:vo({skinConfig:vo({hiddenControls:zo,primaryColor:oo().optional().default("#FFCC00"),secondaryColor:oo().optional().default("#EEEEEE")}).passthrough().optional().default({})}).refine(Vo).optional(),useNativeAdControls:co().default(!0),device:mo().refine(Vo).transform(e=>e).default({}),backgroundColor:oo().transform(e=>e||void 0).default("#000"),objectFit:oo().optional().transform(e=>e||void 0),cacheSourcesCount:so().nonnegative().int().refine(c).default(0)}),as=(0,Pi.i)(),os=new RegExp("("+["Googlebot","YandexBot","AhrefsBot","spider","Bot"].join("|")+")"),ss=is.transform(e=>{var t,n,r,i,a;const o=te(null==(t=e.skinParams)||null==(n=t.skinConfig)?void 0:n.hiddenControls),s=0===e.volume||(void 0===e.muted?ns.getSavedMuted():e.muted),l=e.togglePlaybackOnVisibilityChange&&e.togglePlaybackOnVisibilityChange.forceAutoplay||e.autoplay.autoplay,c=(void 0===d&&(d=as),os.test(d));var d;return{streamPlayerParams:{debug:e.debug.logInternals,hidden:!1===e.loadSkin?o:Go,autoplay:!c&&l,allowMuted:I("web_forbid_allow_muted_autoplay")?s:e.autoplay.allowMuted,lang:e.lang,autoQuality:e.autoQuality,defaultQuality:e.defaultQuality,feed:e.feed,preload:!c&&e.preload,togglePlaybackOnVisibilityChange:e.togglePlaybackOnVisibilityChange,restoreTabSessionPlaybackProgress:e.restoreTabSessionPlaybackProgress,resourceTimingsMonitor:{perfLogUrl:e.perfLogUrl},maxBufferLength:e.maxBufferLength,preferNative:e.preferNative,disableAndroidPlayer:e.disableAndroidPlayer,report:e.report.enabled,skinConfig:null==(r=e.skinParams)?void 0:r.skinConfig,backgroundColor:e.backgroundColor,shouldPlayOnFirstClick:void 0===e.loadSkin,bandwidthEstimateOffset:e.bandwidthEstimateOffset,useNativeAdControls:e.useNativeAdControls,device:e.device,volume:e.volume,muted:s,liveOffset:e.liveOffset,slowConnection:e.slowConnection,cacheSourcesCount:e.cacheSourcesCount,showUnmuteButtonForAll:!1},useAbdBundle:e.useAbdBundle,useFallbackStream:e.useFallbackStream,debugConfig:e.debug,reportConfig:e.report,loadSkin:e.loadSkin,originalHiddenControls:o,primaryColor:null==(i=e.skinParams)||null==(a=i.skinConfig)?void 0:a.primaryColor,objectFit:e.objectFit,savedMutedRestored:void 0===e.muted&&0!==e.volume}}),ls="other",cs={from:ls,reqid:void 0,hash:void 0,vsid:Ki};class ds{constructor(e){this.cache=e}get(e){return this.cache[e]}has(e){return e in this.cache}set(e,t){this.cache[e]=t}}const us=document.createElement("a");hs=e=>ne({},re(e)),void 0===fs&&(fs=e=>e),void 0===ps&&(ps=new ds({}));var hs,fs,ps;const ms=/^(android-app:|chrome-extension:)/,gs=e=>{try{return decodeURIComponent(e)}catch(na){return e}},ys=(e,t)=>t.map(t=>e+"[]="+encodeURIComponent(t)).join("&"),_s=["playready-proxy.ott.yandex.ru","playready-proxy-preproduction.ott.yandex.ru","widevine-proxy.ott.yandex.ru","widevine-proxy-preproduction.ott.yandex.ru","fairplay-proxy.ott.yandex.ru","fairplay-proxy-preproduction.ott.yandex.ru","drm.yandex-team.ru"],vs={preferredAudioLangs:[],preferredTextLangs:[]},Es=0,Ss=["partnerId","partner_id","category","impId","imp_id","hasPreroll","videoContentId","video_content_id","videoContentName","video_content_name","videoPublisherId","video_publisher_id","videoPublisherName","video_publisher_name","videoGenreId","video_genre_id","videoGenreName","video_genre_name","distrId","distr_id","adBreaks"],Rs=vo({}).passthrough().default({partnerId:void 0}).transform((function(e){const{partnerId:t,partner_id:n=t,category:r=Es,impId:i,imp_id:a=i,hasPreroll:o,videoContentId:s,video_content_id:l=s,videoContentName:c,video_content_name:d=c,videoPublisherId:u,video_publisher_id:h=u,videoPublisherName:f,video_publisher_name:p=f,videoGenreId:m,video_genre_id:g=m,videoGenreName:y,video_genre_name:_=y,distrId:v,distr_id:E=v,adBreaks:S}=e;return fe({},function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Ss),{partnerId:Number(n),category:Number(r),impId:void 0!==a?parseInt(String(a),10)||0:void 0,hasPreroll:"boolean"===typeof o?o:void 0,videoContentId:l,videoContentName:d,videoPublisherId:h,videoPublisherName:p,videoGenreId:g,videoGenreName:_,distrId:E,adBreaks:S})})),As=/^\w(\-|_|:|\s|\.|\w){0,70}$/,Ts=vo({from:oo().transform((function(e){if(!e)return cs.from;const t=String(e);return As.test(t)?t:"_$invalid_label_value$_"})).optional(),slots:So([oo().transform((function(e){return"string"===typeof e?e.split(";"):[]})),_o(oo()),mo().transform(String)]).transform((function(e){if(!Array.isArray(e))return;const t=e.filter(e=>"string"===typeof e&&/^\d+,\d+,-?\d+$/.test(e)).sort().join(";");return t.length>0?t:void 0})).optional().default([]),testIds:So([oo().transform((function(e){return me(e.split(","))})),_o(oo()).transform(me),_o(so()).transform(pe),mo().transform(kr.Z)]).optional()}).catchall(mo().transform(e=>{if(void 0!==e)return String(e)})).transform((function(e){return void 0!==e.slots&&(e.testIds=me(e.slots.split(";"))),e})),bs=vo({}).passthrough().refine(ge,"must be serializable"),Os=vo({preferredAudioLangs:_o(oo()).max(1),preferredTextLangs:_o(oo()).max(1)}).transform(e=>e),Cs=Lo(so().nonnegative().refine(c).transform(tr.toSeconds)).transform(e=>({videoTime:e})),Ps=vo({url:oo().url(),drmConfig:bs.optional(),metaInfoUrl:oo().optional()}),Is=vo({objectFit:oo().optional()}).optional(),ws=vo({videoContentId:oo().optional(),videoContentName:oo().optional(),videoPublisherId:oo().optional(),videoPublisherName:oo().optional(),videoGenreId:oo().optional(),videoGenreName:oo().optional()}),ks=vo({endTime:so(),startTime:so(),type:wo(["intro","recap","credits"])}),Ns=vo({loop:co().default(!1),startPosition:Cs,adConfig:Rs.default({}),withCredentials:co().optional(),passportRetpath:oo().url().optional(),preview:oo().optional(),posterStyle:Is,additionalParams:Ts.optional().default({}),externalPlayerConfig:vo({}).passthrough().optional(),id:oo().default(""),videoInfo:ws.default({}),enableRemoteProgressSaving:co().optional().default(!1),preferredTracks:Os.default(vs),skippableFragments:_o(ks).optional(),initialStalledDuration:so().default(0),externalStalledDuration:so().optional()}),Ds=vo({streamUrl:oo().url(),drmConfig:bs.optional(),contentId:So([ho(),go()])}),Ls=vo({streams:_o(Ps).nonempty(),drmConfig:So([ho(),go()]),contentId:So([ho(),go()])}),xs=vo({contentId:oo(),streamUrl:So([ho(),go()]),streams:So([ho(),go()])}),Ms=Ro(So([xs,Ls,Ds]).transform(e=>{if("contentId"in e)return{contentId:e.contentId,streams:[]};if("streams"in e)return{streams:e.streams,contentId:void 0};if("streamUrl"in e)return{streams:[{url:e.streamUrl,drmConfig:e.drmConfig}],contentId:void 0};throw new Error("SourceSchema Exception")}),Ns),Fs=["videoContentName","videoContentId","videoPublisherId","videoPublisherName","videoGenreId","videoGenreName"],Us=Ms.transform(e=>({contentId:e.contentId,id:e.id,streams:e.streams,params:{startPosition:e.startPosition,adConfig:_e({},e.adConfig,ye(e.videoInfo,e.adConfig)),withCredentials:e.withCredentials,loop:e.loop,preview:e.preview,posterStyle:e.posterStyle,additionalParams:e.additionalParams,externalPlayerConfig:(0,Rr.K)(e.externalPlayerConfig)?_e({},e.externalPlayerConfig,{passportRetpath:(0,vr.H)(e.passportRetpath)?e.passportRetpath:void 0}):e.externalPlayerConfig,videoInfo:ye(e.videoInfo,e.adConfig),preferredTracks:e.preferredTracks,skippableFragments:e.skippableFragments},initialStalledDuration:e.initialStalledDuration,externalStalledDuration:void 0!==e.externalStalledDuration?e.externalStalledDuration:void 0})),Vs=["from","vsid"],Bs={trackingEvents:[{init:[],start:[],end:[],setSource:[],adStart:[],adRequest:[],adError:[],adEnd:[],adPodStart:[],adPodClick:[],adPodEnd:[],adPodSkip:[],sourceStart:[],play:[],pause:[],seek:[],firstQuartile:[],midpoint:[],thirdQuartile:[],viewed:[],heartbeat:[],watchedTime:[],error:[]}]},js=Co().args().returns(po()),Ys=vo({trackings:mo().transform(be).default(Bs),update:js.default(()=>kr.Z),enableRemoteProgressSaving:co().default(!1).or(mo().transform(()=>!1)),videoInfo:ws.default({})});let Hs;!function(e){e.PLAYER_API="player-api.js",e.PLAYER_API_MODERN="player-api.modern.js",e.PLAYER_API_MOCK="player-api-mock.js"}(Hs||(Hs={}));var Ks=e(8976);const qs=(e=>(0,Ks.Y)(e))(window),Gs=(function(e){const t=100*(0,ei.M)();let n=0;for(let r=0;r<e.length;r++)if(n+=e[r].percent,t<n)return e[r].id;e[0].id}([{id:10769,percent:100}]),function(e){return void 0===e&&(e=window),/Windows Phone/i.test(e.navigator.userAgent)}),Ws=Pe();var Zs=e(6487);const zs=(0,Zs.P)(),Xs=function(e){void 0===e&&(e=window);const t=(0,Pi.i)(e).toLowerCase();return/linux/.test(t)&&!Pe(e)}(),Js=function(e){void 0===e&&(e=window);const t=(0,Pi.i)(e).toLowerCase();return/mac/.test(t)&&!(0,Zs.P)(e)}(),Qs=Gs();var $s=e(7339);let el,tl,nl,rl;!function(e){e.DESKTOP="d",e.MOBILE="m"}(el||(el={})),function(e){e.DESKTOP="desktop",e.MOBILE="mobile",e.TABLET="tablet"}(tl||(tl={})),function(e){e.UNDEFINED="0",e.DESKTOP="1",e.IOS="2",e.ANDROID="3",e.WINDOWS_MOBILE="4"}(nl||(nl={})),function(e){e.vsid="vsid",e.dl="dl",e.random="random",e.timestamp="timestamp",e.fts="fts",e.vts="vts",e["watched-time"]="watched-time",e["video-time"]="video-time",e["device-type"]="device-type",e["device-type-mediascope"]="device-type-mediascope",e["device-type-tns"]="device-type-tns",e.fullscreen="fullscreen",e.duration="duration",e["old-position"]="old-position",e["error-code"]="error-code",e["audio-track-name"]="audio-track-name",e["audio-track-lang"]="audio-track-lang",e["text-track-name"]="text-track-name",e["text-track-lang"]="text-track-lang",e.muted="muted",e["drm-supported"]="drm-supported",e["drm-type"]="drm-type",e["bitrate-video"]="bitrate-video",e["bitrate-audio"]="bitrate-audio",e["buffering-duration"]="buffering-duration",e["buffering-count"]="buffering-count",e["initial-buffering-time"]="initial-buffering-time",e["ad-position"]="ad-position",e["client-ad-sec"]="client-ad-sec"}(rl||(rl={}));const il=Q(rl),al=new RegExp(/^https:\/\/tracking(-testing){0,1}\.ott\.yandex\.net\/v\d+\/watch-batch/);var ol=e(9183);class sl{setTimeout(e,t){if(t<=0)return void(0,_r.Y)(e,Ne);const n=window.setTimeout(e,t);return()=>window.clearTimeout(n)}now(){return(0,ol.m)()}}class ll{constructor(e){void 0===e&&(e=0),this.time=e,this.tasks=void 0,this.tasks=[]}setTimeout(e,t){const n=this.time+t,r={task:e,time:n,isCanceled:!1,isRunned:!1};if(((e,t,n)=>{let r=0;for(;r<e.length&&!n(e[r]);r+=1);e.splice(r,0,t)})(this.tasks,r,e=>n<e.time),!(t<=0))return()=>r.isCanceled=!0;(0,_r.Y)(()=>this.runTask(r),Ne)}setTime(e){if(isNaN(e))return;let t=0;for(;t<this.tasks.length&&!(e<this.tasks[t].time);t+=1)this.runTask(this.tasks[t]);this.time=e,this.tasks.splice(0,t)}now(){return this.time}tick(e){this.setTime(this.time+e)}reset(){this.time=0,this.tasks=[]}runTask(e){e.isRunned||e.isCanceled||(e.isRunned=!0,this.time=e.time,e.task())}}class cl{constructor(e,t){void 0===t&&(t=new sl),this.distributionFunction=e,this.clock=t,this.stopped=!0,this.cancel=void 0,this.lastNow=0,this.lastKnockTime=void 0,this.lastTimeout=0,this.restTime=0,this.destroyed=!1,this.isFirstKnock=!0,this.count=0}setEnabled(e){return e?this.start():this.stop(),this}stop(){return this.stopped||(this.stopped=!0,this.cancelTimeout(),this.restTime=Math.max(this.restTime-(this.clock.now()-this.lastKnockTime),0)),this}start(){return this.stopped&&!this.destroyed&&(this.stopped=!1,this.lastKnockTime=this.clock.now(),this.setTimeout(()=>this.knock(this.lastNow+this.lastTimeout),this.restTime)),this}destroy(){this.cancelTimeout(),this.stopped=!0,this.destroyed=!0}knock(e){this.lastNow=e,this.lastKnockTime=this.clock.now(),this.isFirstKnock?this.isFirstKnock=!1:this.count++;const t=this.restTime=this.lastTimeout=this.distributionFunction({time:e,count:this.count});this.stopped||this.destroyed||this.setTimeout(()=>this.knock(e+t),t)}cancelTimeout(){void 0!==this.cancel&&this.cancel(),this.cancel=void 0}setTimeout(e,t){this.cancelTimeout();const n=this.clock.setTimeout(e,t);void 0!==n&&(this.cancelTimeout(),this.cancel=n)}}class dl{constructor(){this.handlers=Object.create(null),this.onceHandlers=Object.create(null),this.maxEventListeners=10}setMaxListeners(e){!isFinite(e)||e<=0||(this.maxEventListeners=e)}on(e,t){this.getHandlers(e).push(t),this.checkSubscriptions(e)}once(e,t){this.getOnceHandlers(e).push(t),this.checkSubscriptions(e)}off(e,t){const n=this.getHandlers(e),r=this.getOnceHandlers(e);if(void 0===t)return n.length=0,void(r.length=0);this.removeHandler(t,n),this.removeHandler(t,r)}emit(e,t){const n=this.getHandlers(e),r=this.getOnceHandlers(e).slice();this.getOnceHandlers(e).length=0,n.slice().concat(r).forEach(e=>{try{e(t)}catch(n){setTimeout(()=>{throw n},0)}})}getHandlers(e){return void 0===this.handlers[e]&&(this.handlers[e]=[]),this.handlers[e]}getOnceHandlers(e){return void 0===this.onceHandlers[e]&&(this.onceHandlers[e]=[]),this.onceHandlers[e]}checkSubscriptions(e){const t=this.getHandlers(e).length+this.getOnceHandlers(e).length;t>this.maxEventListeners&&console.warn("There are "+t+" subscriptions on event named "+e)}removeHandler(e,t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}class ul{constructor(){this.value=0,this.measureTime=()=>0}start(){this.measureTime=t()}pause(){this.value=this.value+this.measureTime(),this.measureTime=()=>0}getTime(){return this.value+this.measureTime()}reset(){this.measureTime=t(),this.value=0}}let hl;!function(e){e.LIVE="LIVE",e.EVENT="EVENT",e.VOD="VOD"}(hl||(hl={}));const fl=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test((0,Pi.i)());class pl extends dl{constructor(e){super(),this.params=e,this.MACROS={dl:()=>window.document.referrer||window.location&&window.location.href||"",random:()=>Math.floor(Math.random()*10**16),timestamp:()=>String(Date.now()),vts:()=>{return Math.floor((e=Date.now(),Math.round(e/1e3)));var e},fts:()=>{const e=this.params.getVideoType();return Math.floor(e===hl.VOD?this.params.getCurrentTime():this.params.getUtcPosition())},"watched-time":()=>Math.floor(this.params.getWatchedTime()),"video-time":()=>Math.floor(this.params.getCurrentTime()),"device-type":()=>fl?el.MOBILE:el.DESKTOP,"device-type-mediascope":()=>fl?tl.MOBILE:tl.DESKTOP,"device-type-tns":()=>{if(fl){if(zs)return nl.IOS;if(Ws)return nl.ANDROID;if(Qs)return nl.WINDOWS_MOBILE}else if(Ii||Js||Xs)return nl.DESKTOP;return nl.UNDEFINED},fullscreen:()=>this.params.getIsFullscreen()?"1":"0",duration:()=>Math.floor(this.params.getDuration()),vsid:()=>this.params.vsid,"audio-track-name":()=>{const e=this.params.getAudioTrack();return e?e.name:""},"audio-track-lang":()=>{const e=this.params.getAudioTrack();return e?e.lang:""},"text-track-name":()=>{const e=this.params.getTextTrack();return e?e.name:""},"text-track-lang":()=>{const e=this.params.getTextTrack();return e?e.lang:""},"drm-supported":()=>{switch(this.params.getIsDrmSupported()){case!0:return"1";case!1:return"0";default:return""}},"drm-type":()=>{var e;return null!=(e=this.params.getDrmSystemName())?e:""},"bitrate-video":()=>{var e;const t=null==(e=this.params.getVideoTrack())?void 0:e.bitrate;return t?Math.floor(1e3*t):""},"bitrate-audio":()=>{var e;const t=null==(e=this.params.getAudioTrack())?void 0:e.bitrate;return t?Math.floor(1e3*t):""},"initial-buffering-time":()=>{var e;return null!=(e=this.initialBufferingTime)?e:""},"ad-position":()=>{const{type:e}=this.params.getAdState();return Me(e)},"client-ad-sec":()=>Math.floor(this.clientAdTimeMeasurer.getTime()/1e3),muted:()=>this.params.getMuted()?"1":"0"},this.measureInitialBufferingTime=void 0,this.initialBufferingTime=void 0,this.clientAdTimeMeasurer=new ul,this.watchedTimeClock=new ll,this.heartbeatTimers=[],this.bufferedInfoByTrackKey={},this.trackingEvents={init:[],start:[],end:[],setSource:[],adStart:[],adRequest:[],adError:[],adEnd:[],adPodStart:[],adPodClick:[],adPodEnd:[],adPodSkip:[],sourceStart:[],play:[],pause:[],seek:[],firstQuartile:[],midpoint:[],thirdQuartile:[],viewed:[],heartbeat:[],watchedTime:[],error:[]},this.onError=e=>{let{code:t,isFatal:n}=e;n&&this.trackingEvents.error.forEach(e=>{const n=xe(e);this.parseAndTrackUrls([e],Fe({"error-code":()=>String(t)},this.getBufferedInfoGetters(n))),this.clearBufferedInfo(n)})},this.onReady=()=>{this.parseAndTrackUrls(this.trackingEvents.init)},this.onSetSourceComplete=()=>{this.parseAndTrackUrls(this.trackingEvents.setSource)},this.onWatchedTimeChange=e=>{isNaN(e)||this.watchedTimeClock.setTime(1e3*e)},this.onCurrentTimeChange=e=>{this.emit("CurrentTimeChange",e)},this.onAdLoaded=e=>{this.emit("AdLoaded",e)},this.onAdError=()=>{this.emit("AdError")},this.onAdStateChange=e=>{this.emit("AdStateChange",e)},this.onAdPodStart=()=>{this.emit("AdPodStart")},this.onAdPodEnd=()=>{this.emit("AdPodEnd")},this.onAdPodClick=()=>{this.emit("AdPodClick")},this.onAdPodSkip=()=>{this.emit("AdPodSkip")},this.onStateChange=e=>{this.emit("StateChange",e)}}setTrackings(e){this.resetTrackings(),this.trackingEvents=function(e){if(!Array.isArray(e))return e;const t={init:[],start:[],end:[],setSource:[],adStart:[],adRequest:[],adError:[],adEnd:[],adPodStart:[],adPodClick:[],adPodEnd:[],adPodSkip:[],sourceStart:[],play:[],pause:[],seek:[],firstQuartile:[],midpoint:[],thirdQuartile:[],viewed:[],heartbeat:[],watchedTime:[],error:[]};return e.forEach(e=>{de(e).forEach(e=>{let[n,r]=e;Array.isArray(t[n])||(t[n]=[]),t[n].push(...r)})}),t}(e.trackingEvents);const{start:n,end:r,adStart:i,adError:a,adRequest:o,adEnd:s,adPodStart:l,adPodClick:c,adPodEnd:d,adPodSkip:u,sourceStart:h,play:f,pause:p,error:m,firstQuartile:g,midpoint:y,thirdQuartile:_,viewed:v,heartbeat:E,watchedTime:S}=this.trackingEvents,R=(0,$n.I)(()=>{this.parseAndTrackUrls(h)});let A=[...v,...Le(g,25),...Le(y,50),...Le(_,75)],T=!1;[...E,...p,...m].forEach(e=>{const t=xe(e);this.bufferedInfoByTrackKey[t]={count:0,time:0}});const b=()=>{R(),T=!0,this.parseAndTrackUrls(n),this.heartbeatTimers=E.concat(S.map(De)).map(e=>{const[t,{delay:n,offset:r=n,callsCount:i=1/0,utcStart:a,utcEnd:o}]=e,s=xe(e);let l=0;const c=new cl(()=>{const e=Math.round(this.params.getUtcPosition());return void 0!==a&&e<a||void 0!==o&&e>o?1e3:0===l?(l++,r):(this.parseAndTrackUrls([t],this.getBufferedInfoGetters(s)),this.clearBufferedInfo(s),l++,l>i?(c.destroy(),0):n)},this.watchedTimeClock);return c}),this.heartbeatTimers.forEach(e=>e.start())};let O=!1,C=!1;this.on("CurrentTimeChange",e=>{if(!this.isStreamPlaying())return;!T&&e>0&&b();const t=this.params.getDuration();if(!t)return;if(this.params.getVideoType()!==hl.VOD)return;const n=e/t;A=A.filter(e=>{let[t,{percent:r}]=e;return!(n>r/100)||(this.parseAndTrackUrls([t]),!1)})}),this.on("AdStateChange",e=>{let{state:t,type:n}=e;const r=t===Mi.PLAYING;r&&R(),this.parseAndTrackUrls(r?i:s),this.clientAdTimeMeasurer.reset()}),this.on("AdLoaded",e=>{let{adType:t}=e;this.parseAndTrackUrls(o,{"ad-position":()=>Me(t)})}),this.on("AdError",()=>{this.parseAndTrackUrls(a)});let P=null;this.on("StateChange",e=>{if(this.isAdPlaying())P=null;else if(e===Pr.BUFFERING)P=t();else if(null!==P){const e=P()/1e3;P=null;for(const t in this.bufferedInfoByTrackKey)Object.prototype.hasOwnProperty.call(this.bufferedInfoByTrackKey,t)&&(this.bufferedInfoByTrackKey[t].count++,this.bufferedInfoByTrackKey[t].time=e+this.bufferedInfoByTrackKey[t].time)}}),this.on("StateChange",e=>{this.isAdPlaying()?e===Pr.PLAY?this.clientAdTimeMeasurer.start():this.clientAdTimeMeasurer.pause():this.clientAdTimeMeasurer.reset()}),this.on("StateChange",e=>{if(e===Pr.END)return void this.parseAndTrackUrls(r);if(!O){if(e===Pr.PLAY)this.initialBufferingTime=this.measureInitialBufferingTime?Math.floor(Math.floor(this.measureInitialBufferingTime())):Math.floor(0),this.parseAndTrackUrls(f),O=!0,C=!0;else if(e===Pr.BUFFERING){var n;this.measureInitialBufferingTime=null!=(n=this.measureInitialBufferingTime)?n:t()}return}if(this.isAdPlaying())return;const i=e===Pr.PLAY||e===Pr.BUFFERING;i!==C&&(C=i,i?this.parseAndTrackUrls(f):p.forEach(e=>{const t=xe(e);this.parseAndTrackUrls([e],this.getBufferedInfoGetters(t)),this.clearBufferedInfo(t)}))});let I=!1,w=!1;this.on("AdPodStart",()=>{I=!0,w=!1,this.parseAndTrackUrls(l),this.clientAdTimeMeasurer.reset()}),this.on("AdPodClick",()=>{this.parseAndTrackUrls(c),this.clientAdTimeMeasurer.reset()}),this.on("AdPodSkip",()=>{w=!0,this.parseAndTrackUrls(u),this.clientAdTimeMeasurer.reset()}),this.on("AdPodEnd",()=>{!w&&I?(I=!1,this.parseAndTrackUrls(d),this.clientAdTimeMeasurer.reset()):I=!1})}destroy(){this.resetTrackings(),this.emit("Destroy"),this.off("Destroy")}clearBufferedInfo(e){const t=this.bufferedInfoByTrackKey[e];void 0!==t&&(t.time=0,t.count=0)}getBufferedInfoGetters(e){const t=this.bufferedInfoByTrackKey[e];return{"buffering-duration":()=>void 0===t?"":Math.floor(t.time),"buffering-count":()=>void 0===t?"":t.count}}isStreamPlaying(){return this.params.getPlayingState()===Pr.PLAY&&!this.isAdPlaying()}isAdPlaying(){return this.params.getAdState().state===Mi.PLAYING}resetTrackings(){this.heartbeatTimers.forEach(e=>e.destroy()),this.clientAdTimeMeasurer.reset(),this.watchedTimeClock.reset(),this.bufferedInfoByTrackKey={},this.measureInitialBufferingTime=void 0,this.initialBufferingTime=void 0,this.off("StateChange"),this.off("AdStateChange"),this.off("AdLoaded"),this.off("AdError"),this.off("AdPodStart"),this.off("AdPodClick"),this.off("AdPodSkip"),this.off("AdPodEnd"),this.off("CurrentTimeChange")}parseAndTrackUrls(e,t){void 0===t&&(t={});const n=Fe({},this.MACROS,t);e.forEach(e=>{const t=il.reduce((e,t)=>{const r=n[t];return void 0===r?e:function(e,t,n){return e.replace(new RegExp("{{"+t+"}}","gm"),encodeURIComponent(n))}(e,t,String(r()))},e);if(function(e){return al.test(e)}(e)){const n=(0,$s.c)("data",t);ke({url:e.split("?")[0],data:"["+n+"]",contentType:"application/json"})}else we(t)})}}const ml=function(e){return void 0===e&&(e=window),/YandexSearch|YaSearchBrowser|YaApp_iOS|YaApp_Android/i.test((0,Pi.i)(e))}();let gl=0;const yl=ml?"#feedback__app-problem":"#feedback__browser-problem",_l="function"===typeof Array.isArray?Array.isArray:function(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)};let vl,El;!function(e){e.Start="Start",e.Watched4Sec="4SecWatched",e.Watched10Sec="10SecWatched",e.Watched20Sec="20SecWatched",e.Heartbeat30Sec="30SecHeartbeat",e.End="End"}(vl||(vl={})),function(e){e.PLAY="play",e.PAUSE="pause",e.BUFFERING="buffering",e.END="end"}(El||(El={}));class Sl{constructor(e){this.params=e,this.previousWatchedTime=0}onWatchedTimeChange(e){const{previousWatchedTime:t}=this;t!==e&&(!function(e,t){return 0===e&&t>0}(t,e)?!function(e,t){return e<4&&t>=4}(t,e)?!function(e,t){return e<10&&t>=10}(t,e)?!function(e,t){return e<20&&t>=20}(t,e)?function(e,t){return qe(e)<qe(t)}(t,e)&&this.params.onEvent(vl.Heartbeat30Sec):this.params.onEvent(vl.Watched20Sec):this.params.onEvent(vl.Watched10Sec):this.params.onEvent(vl.Watched4Sec):this.params.onEvent(vl.Start),this.previousWatchedTime=e)}onPlayingStateChange(e){e===El.END&&this.params.onEvent(vl.End)}}class Rl{constructor(e,t){this.onTick=e,this.onFlush=t,this.wasFirstFlush=!1,this.isDestroyed=!1,this.lastFlushTime=void 0,this.startTime=void 0,this.timer=void 0,this.handleTimeout=()=>{this.onTick(),this.handleFlush(),this.nextTick()},this.startTime=this.lastFlushTime=cr(),this.timer=window.setTimeout(()=>{this.onTick(),this.nextTick()},0)}next(){this.isDestroyed||(window.clearTimeout(this.timer),this.handleFlush(),this.nextTick())}destroy(){window.clearTimeout(this.timer),this.isDestroyed=!0}nextTick(){this.isDestroyed||(window.clearTimeout(this.timer),this.timer=window.setTimeout(this.handleTimeout,this.getTimeout()))}handleFlush(){this.needFlush()&&(this.onFlush(),this.lastFlushTime=this.wasFirstFlush?cr():this.startTime,this.wasFirstFlush=!0)}needFlush(){const e=cr();return this.wasFirstFlush?e-this.lastFlushTime>=3e4:e-this.startTime>=1e4}getTimeout(){return cr()-this.startTime<1e4?1e3:5e3}}const Al=Math.max(Math.abs(0),0),Tl={remainingBufferedTime:Math.max(Math.abs(0),0),state:El.BUFFERING,currentTime:Al,watchedTime:Math.max(Math.abs(0),0),duration:Math.max(0,0)},bl=NaN;let Ol,Cl,Pl,Il;!function(e){e[e.PLAYING=1]="PLAYING",e[e.NOT_PLAYING=2]="NOT_PLAYING"}(Ol||(Ol={})),function(e){e.preroll="preroll",e.midroll="midroll",e.postPauseroll="postPauseroll",e.postroll="postroll",e.inroll="inroll"}(Cl||(Cl={}));class wl{constructor(e){this.props=e,this.prevState=void 0,this.states=[],this.timer=void 0,this.destroyHandlers=[],this.writeStateManually=function(e,t,n,r){function i(){null!==a&&clearTimeout(a),a=null}3===arguments.length&&"boolean"!==typeof n&&(r=n,n=!1);let a=null,o=Ze;const s=function(){const s=arguments;r=r||this,o=()=>{i(),o=Ze,e.apply(r,s)},n&&null===a&&e.apply(r,s),i(),a=window.setTimeout((function(){n||e.apply(r,s),a=null}),t)};return s.cancel=i,s.now=()=>{o()},s}(()=>{this.writeState(),this.timer.next()},0),this.timer=new Rl(()=>this.writeState(),()=>this.flushStates())}addDestroyHandler(e){this.destroyHandlers.push(e)}destroy(){this.timer.destroy(),this.flushStates(),this.destroyHandlers.forEach(e=>{e()}),this.destroyHandlers=[]}getStates(){return[...this.states]}flushStates(){this.writeStateManually.now();const e=this.getStates();e.length>0&&this.props.onFlushStates(e),this.states.length=0}writeState(){const e=this.getPlayerAliveState();bi()(this.prevState,e)||(this.prevState=e,this.states.push(Xe({},e,{timestamp:Date.now()})))}getPlayerAliveState(){var e,t;const n=Xe({},Tl,{saveData:Ge(),rtt:We()},this.props.stalledController.getStalledHistory()),r=this.props.getState();if(!r)return Xe({},n);const{watchedTime:i,currentTime:a,duration:o,muted:s,playingState:l,remainingBufferedTime:c,adState:d,liveLatency:u,videoTracks:h,audioTrack:f,videoSize:p,isVisible:m,capHeight:g,capWidth:y,containerHeight:_,containerWidth:v,bandwidthEstimate:E,bandwidthSource:S,droppedFrames:R,shownFrames:A,isFullscreen:T,isPictureInPicture:b}=r,O=h.find(e=>e.selected),C=[...h].sort((e,t)=>t.bitrate-e.bitrate),P=(null==d?void 0:d.state)===Ol.PLAYING,I=!P;return Xe({},n,{watchedTime:Math.max(i,0),currentTime:Math.max(isNaN(a)?0:a,0),duration:Math.max(isNaN(o)?0:o,0),isMuted:s,state:l,remainingBufferedTime:(null==c?void 0:c.total)||0,remainingAudioBufferedTime:void 0===(null==c?void 0:c.audio)?void 0:Math.max(c.audio,0),remainingVideoBufferedTime:void 0===(null==c?void 0:c.video)?void 0:Math.max(c.video,0),ad:P?null==d?void 0:d.type:void 0,liveLatency:void 0===u?void 0:Math.max(u,0),stalledReason:this.props.stalledController.getCurrentStalledReason(),auto:void 0===(null==O?void 0:O.auto)?void 0:O.auto,isVisible:m,bitrate:null!=O&&O.bitrate?Math.max(0,Math.floor(1e3*O.bitrate)):void 0,width:void 0===(null==p?void 0:p.videoWidth)||isNaN(null==p?void 0:p.videoWidth)?void 0:Math.max(Math.floor(null==p?void 0:p.videoWidth)),height:void 0===(null==p?void 0:p.videoHeight)||isNaN(null==p?void 0:p.videoHeight)?void 0:Math.max(Math.floor(null==p?void 0:p.videoHeight)),maxWidth:I&&null!=(e=C[0])&&e.width?Math.max(Math.floor(C[0].width)):void 0,maxHeight:I&&null!=(t=C[0])&&t.height?Math.max(Math.floor(C[0].height)):void 0,audioTrack:(null==f?void 0:f.value)||void 0,audioLang:(null==f?void 0:f.lang)||void 0,audioBitrate:null!=f&&f.bitrate?Math.max(0,Math.floor(1e3*f.bitrate)):void 0,capHeight:I&&g?Math.max(Math.floor(g)):void 0,capWidth:I&&y?Math.max(Math.floor(y)):void 0,containerHeight:void 0!==_?Math.max(Math.floor(_)):void 0,containerWidth:void 0!==v?Math.max(Math.floor(v)):void 0,bandwidthEstimate:void 0===E||isNaN(E)?void 0:Math.max(Math.floor(Math.round(E))),bandwidthSource:S||void 0,droppedFrames:void 0===R?void 0:Math.max(Math.floor(R)),shownFrames:void 0===A?void 0:Math.max(Math.floor(A)),viewport:ze(T,b)})}}!function(e){e.Init="Init",e.SetSource="SetSource",e.Seek="Seek",e.VideoTrackChange="VideoTrackChange",e.AudioTrackChange="AudioTrackChange",e.Recover="Recover",e.MediaError="MediaError",e.Offline="Offline",e.Other="Other",e.Render="Render",e.RepresentationsChange="RepresentationsChange",e.LiveEdge="LiveEdge",e.AdStart="AdStart",e.AdOther="AdOther",e.AdBetween="AdBetween",e.AdEnd="AdEnd"}(Pl||(Pl={})),function(e){e.Internal="internal",e.Api="api",e.Cache="cache"}(Il||(Il={}));const kl=[0,1,4,5];let Nl=0;const Dl=kl.map(e=>(Nl=e+Nl,Nl)),Ll=1e3*Dl[Dl.length-1],xl=[Pl.Init];class Ml{setTimeout(e,t){if(t<=0)return void Qe(e,Je);const n=window.setTimeout(e,t);return()=>window.clearTimeout(n)}now(){return ir()}}class Fl{constructor(e,t){void 0===t&&(t=new Ml),this.distributionFunction=e,this.clock=t,this.stopped=!0,this.cancel=void 0,this.lastNow=0,this.lastKnockTime=void 0,this.lastTimeout=0,this.restTime=0,this.destroyed=!1,this.isFirstKnock=!0,this.count=0}setEnabled(e){return e?this.start():this.stop(),this}stop(){return this.stopped||(this.stopped=!0,this.cancelTimeout(),this.restTime=Math.max(this.restTime-(this.clock.now()-this.lastKnockTime),0)),this}start(){return this.stopped&&!this.destroyed&&(this.stopped=!1,this.lastKnockTime=this.clock.now(),this.setTimeout(()=>this.knock(this.lastNow+this.lastTimeout),this.restTime)),this}destroy(){this.cancelTimeout(),this.stopped=!0,this.destroyed=!0}knock(e){this.lastNow=e,this.lastKnockTime=this.clock.now(),this.isFirstKnock?this.isFirstKnock=!1:this.count++;const t=this.restTime=this.lastTimeout=this.distributionFunction({time:e,count:this.count});this.stopped||this.destroyed||this.setTimeout(()=>this.knock(e+t),t)}cancelTimeout(){void 0!==this.cancel&&this.cancel(),this.cancel=void 0}setTimeout(e,t){this.cancelTimeout();const n=this.clock.setTimeout(e,t);void 0!==n&&(this.cancelTimeout(),this.cancel=n)}}class Ul{constructor(e){let{getState:t,logEvent:n}=e;this.isBuffering=!1,this.timer=void 0,this.stalledId=1,this.preloadDetails=void 0,this.stalledDurationRemainder=0,this.getState=void 0,this.logEvent=void 0,this.expectedStalled=et(Pl.Init,{}),this.currentStalled=void 0,this.stalledTime=0,this.stalledCount=0,this.getState=t,this.logEvent=n}setBuffering(e,t){var n;if(void 0===t&&(t=0),e!==this.isBuffering)if(this.isBuffering=e,this.isBuffering){const e=[],n=kl.filter((n,r)=>{const i=this.currentStalled?this.currentStalled.expectedStalled:this.getExpectedStalled(),a=Dl[r];if(t/1e3>a){const e=this.currentStalled?this.currentStalled.id:this.stalledId++;return this.currentStalled||this.stalledCount++,this.currentStalled={id:e,expectedStalled:i,duration:a,getElapsedTime:$e()},this.send(!1,i,a,e),!1}return e.push(a),!0});this.currentStalled&&(this.stalledDurationRemainder=t/1e3-this.currentStalled.duration),n.length&&(n[0]=n[0]-this.stalledDurationRemainder),this.timer=new Fl(t=>{let{count:r}=t;const i=this.currentStalled?this.currentStalled.expectedStalled:this.getExpectedStalled();if(r>0){const t=e[r-1],n=this.currentStalled?this.currentStalled.id:this.stalledId++;this.currentStalled||this.stalledCount++,this.currentStalled={id:n,expectedStalled:i,duration:t,getElapsedTime:$e()},this.send(!1,i,t,n)}return r>=n.length?(this.destroyTimer(),1/0):1e3*n[r]}),this.timer.start()}else{if(this.currentStalled){var r,i;const{expectedStalled:e,id:t}=this.currentStalled,a=(void 0===(n=this.currentStalled)?0:n.duration+n.getElapsedTime()/1e3)+this.stalledDurationRemainder;this.send(!0,e,a,t),this.currentStalled=void 0,this.stalledDurationRemainder=0,this.stalledTime=a+this.stalledTime;const o=(null==(r=this.getState())||null==(i=r.adState)?void 0:i.state)===Ol.PLAYING?Pl.AdOther:Pl.Other;this.setExpectedStalled(et(o,void 0))}this.destroyTimer()}}setPreloadDetails(e){this.preloadDetails=e}getStalledHistory(){const{stalledCount:e,stalledTime:t}=this;return{stalledCount:Math.max(Math.floor(e)),stalledTime:Math.max(t,0)}}clearStalledHistory(){this.stalledCount=0,this.stalledTime=0}destroy(){this.destroyTimer()}getCurrentStalledReason(){var e;return null==(e=this.currentStalled)?void 0:e.expectedStalled.reason}setExpectedStalled(e){this.expectedStalled=e}isExpiredStalled(e){const{getElapsedTime:t,reason:n}=e;return!(xl.indexOf(n)>-1)&&((!this.currentStalled||this.currentStalled.expectedStalled!==e)&&t()>=Ll)}getExpectedStalled(){const e=this.expectedStalled;return this.isExpiredStalled(e)?et(Pl.Other,void 0):e}destroyTimer(){this.timer&&(this.timer.destroy(),this.timer=void 0)}send(e,t,n,r){const{reason:i,details:a}=t,o=i===Pl.SetSource?this.preloadDetails:void 0,s={id:r,isStalledEnd:e,reason:i,stalledDuration:n,details:tt({},a,o)};o&&e&&this.resetPreloadDetails();let l=tt({},s.details,{stalledDuration:s.stalledDuration,stalledId:s.id});const c=this.getState();if(c){const{muted:e,remainingBufferedTime:t,videoTracks:n}=c;l=tt({},l,{remainingBufferedTime:t,videoTrack:n.find(e=>e.selected),isMuted:e})}this.logEvent({name:s.isStalledEnd?"StalledEnd":"Stalled",data:l,labels:{reason:s.reason}})}resetPreloadDetails(){this.preloadDetails=void 0}}const Vl=e=>"hidden"in e?"hidden":"webkitHidden"in e?"webkitHidden":void 0,Bl=["Start","4SecWatched","10SecWatched","20SecWatched","30SecHeartbeat","End"],jl=!function(e){if(!e||!e.toString)return!1;const t=e.toString();return/\[native code\]/.test(t)||/\/\* source code not available \*\//.test(t)}(Math.random)||Math.random()===Math.random();let Yl=Date.now()*cr()%2147483647;const Hl=jl?function(){return Yl=16807*Yl%2147483647,(Yl-1)/2147483646}:function(){return Math.random()},Kl={enabled:!0,events:[vl.Watched10Sec,vl.Watched20Sec,vl.Heartbeat30Sec]},ql={logVersion:"1.2.0"};class Gl{constructor(e){let{sendLog:t,playerInfo:n,getState:r}=e;this.playbackTracker=void 0,this.playerAliveController=void 0,this.stalledController=void 0,this.remoteProgressSavingInfo=Kl,this.staticParams={},this.playerInfo=void 0,this.sendLog=void 0,this.getState=void 0,this.destroyed=!1,this.initialStalledTimestamp=void 0,this.eventIndex=0,this.playerInfo=n,this.sendLog=t,this.getState=r,this.playbackTracker=new Sl({onEvent:e=>this.logEvent({name:e})}),this.stalledController=new Ul({getState:this.getState,logEvent:e=>this.logEvent(e)}),this.playerAliveController=new wl({getState:r,onFlushStates:e=>this.logEvent({name:"PlayerAlive",data:{states:e}}),stalledController:this.stalledController}),this.initOnVisibilityChangeHandling()}initOnVisibilityChangeHandling(){const e=rt(document,e=>{e||this.playerAliveController.flushStates()});this.playerAliveController.addDestroyHandler(e)}setStaticParams(e,t){this.staticParams=t?st({},e):st({},this.staticParams,e)}enableRemoteProgressSaving(e){this.remoteProgressSavingInfo.enabled=e}updateWatchedTime(e){this.playbackTracker.onWatchedTimeChange(e)}setPlayingState(e){this.playbackTracker.onPlayingStateChange(e),e===El.BUFFERING?this.setBuffering(!0):this.setBuffering(!1)}logEvent(e){if(this.destroyed)return;const t=this.getFullEventLog(e);this.sendData(t,e.labels)}logError(e){let{error:t,labels:n,extraRootFields:r}=e;if(this.destroyed)return;const i=this.getFullErrorLog({error:t,labels:n,extraRootFields:r});this.sendData(i,n)}getFullEventLog(e){const t=this.getState(),n=st({},e.labels,this.staticParams.labels,{videoType:null==t?void 0:t.videoType}),r=Bl.includes(e.name)?st({},e.data,this.getDataToSend(t)):e.data,i={};return this.remoteProgressSavingInfo.events.includes(e.name)&&t&&(i.playbackProgress={time:t.currentTime}),st({},ql,this.staticParams,e.extraRootFields,i,this.playerInfo,{eventType:"event",eventName:e.name,timestamp:Date.now(),documentIsVisible:nt(document),eventIndex:this.eventIndex,data:r,labels:n})}getFullErrorLog(e){let{error:t,labels:n,extraRootFields:r}=e;const i=st({},n,this.staticParams.labels);return t.details=Qe(()=>"string"===typeof t.details?t.details:JSON.stringify(t.details))||t.details,st({},ql,this.playerInfo,this.staticParams,r,{eventType:t.isFatal?"fatal":"error",eventName:String(t.code),timestamp:Date.now(),documentIsVisible:nt(document),eventIndex:this.eventIndex,data:t,labels:i})}getDataToSend(e){if(!e)return{};const{watchedTime:t,duration:n,currentTime:r,utcStartTime:i,isFullscreen:a,volume:o,muted:s}=e;return{watchedSec:t,duration:isNaN(n)?void 0:n,time:r,utcTime:void 0===i?void 0:i+r,isFullscreen:a,isMuted:s||0===o}}sendData(e,t){void 0!==e&&(Qe(()=>this.sendLog(e,t),Je),this.eventIndex++)}checkStalledReason(e){return this.stalledController.getCurrentStalledReason()===e}setBuffering(e,t){this.stalledController.setBuffering(e,t)}setExpectedBuffering(e){let{reason:t,details:n}=e;switch(t){case Pl.SetSource:this.setBuffering(!1),this.clearBufferingHistory();break;case Pl.Init:break;default:this.checkStalledReason(t)||this.setBuffering(!1)}return this.stalledController.setExpectedStalled(et(t,n))}setExternalStalledDuration(e){const t=this.getExpectedStalled();t.reason===Pl.Init&&e&&(t.details={externalStalledDuration:e/1e3},this.setExpectedBuffering(t)),this.initialStalledTimestamp=cr()}onInitBuffering(e){const t=this.initialStalledTimestamp?cr()-this.initialStalledTimestamp:0;e&&this.setExternalStalledDuration(e),this.setBuffering(!0,t),this.initialStalledTimestamp=void 0}destroy(){this.stalledController.destroy(),this.playerAliveController.destroy(),this.destroyed=!0}getExpectedStalled(){return this.stalledController.getExpectedStalled()}clearBufferingHistory(){return this.stalledController.clearStalledHistory()}setPreloadDetails(e){return this.stalledController.setPreloadDetails(e)}writePlayerAliveStateManually(){return this.playerAliveController.writeStateManually()}flushStates(){return this.playerAliveController.flushStates()}onSetSource(e){var t;this.setExpectedBuffering({reason:Pl.SetSource,details:e}),this.flushStates(),(null==(t=this.getState())?void 0:t.playingState)!==El.PAUSE&&this.setBuffering(!0)}onExpectedBuffering(e){let{reason:t,details:n}=e;return this.stalledController.setExpectedStalled(et(t,n))}onSeek(e){this.setExpectedBuffering({reason:Pl.Seek,details:e})}onVideoTrackChange(e){this.setExpectedBuffering({reason:Pl.VideoTrackChange,details:e})}onAudioTrackChange(e){this.setExpectedBuffering({reason:Pl.AudioTrackChange,details:e})}onRecover(e){this.setExpectedBuffering({reason:Pl.Recover,details:e})}onMediaError(e){this.setExpectedBuffering({reason:Pl.MediaError,details:e})}onNetworkStatusChange(e){this.setExpectedBuffering({reason:Pl.Offline,details:e})}onRepresentationsChange(e){this.setExpectedBuffering({reason:Pl.RepresentationsChange,details:e})}onLiveEdge(e){this.setExpectedBuffering({reason:Pl.LiveEdge,details:e})}onAdStart(e){this.setExpectedBuffering({reason:Pl.AdStart,details:e})}onAdBetween(e){this.setExpectedBuffering({reason:Pl.AdBetween,details:e})}onAdEnd(e){this.setExpectedBuffering({reason:Pl.AdEnd,details:e})}}var Wl=e(9878);class Zl{constructor(){this.resolve=void 0,this.reject=void 0,this.promise=void 0;let e=kr.Z,t=kr.Z;this.promise=new Promise((n,r)=>{e=n,t=r}),this.resolve=e,this.reject=t}}const zl=re(window.location.href).hostname.split(".").reverse()[0];var Xl=e(874);const Jl=()=>ft({method:"GET",url:"https://frontend.vh.yandex.ru/csrf_token",retries:3,withCredentials:!0}).then(e=>{try{return{token:e}}catch(t){return{token:""}}}),Ql=()=>ft({method:"GET",url:"https://cloud-api.yandex.ru/videoplayer/v1/personality/profile/yandex_io/devices/",retries:3,withCredentials:!0}).then(e=>{try{const{items:t}=JSON.parse(e);return t&&t.length?t:[]}catch(t){return[]}}),$l=()=>ft({method:"GET",url:"https://quasar.yandex.<tld>/devices_online_stats",retries:3,withCredentials:!0}).then(e=>{try{const{items:t}=JSON.parse(e);return t&&t.length?t:[]}catch(t){return[]}}),ec=(e,t)=>{const n={msg:ht({},e.config,{start_position:e.startPosition}),device:e.externalPlayerId};return ft({method:"POST",url:"https://yandex.ru/video/station",headers:{"X-CSRF-TOKEN":t},data:JSON.stringify(n),retries:3,withCredentials:!0}).then(e=>{const t=JSON.parse(e);if("play"!==t.status)throw new Error("ExternalPlaybackError: "+t.msg)})};let tc;!function(e){e.OK="OK",e.SLOW="SLOW",e.UNKNOWN="UNKNOWN"}(tc||(tc={}));const nc={min:1,max:1/0},rc={min:0,max:1};var ic=e(5654);const ac=(0,$n.I)(()=>Rt(ic.toString()));var oc=e(2988);const sc=(0,oc.N)(),lc=sc>-1&&sc<=15,cc=(e,t)=>t.location.hash=e;var dc=e(2239);let uc;!function(e){e.play="play",e.pause="pause",e.seek="seek",e.setSource="setSource",e.preloadSource="preloadSource",e.abortPreloadSource="abortPreloadSource",e.setVolume="setVolume",e.setMuted="setMuted",e.setFullscreen="setFullscreen",e.setPictureInPicture="setPictureInPicture",e.setPlaybackRate="setPlaybackRate",e.setVideoTrack="setVideoTrack",e.setAudioTrack="setAudioTrack",e.setTextTrack="setTextTrack",e.setNativeTextTrackVisibility="setNativeTextTrackVisibility",e.setNativeAdControlsVisibility="setNativeAdControlsVisibility",e.setHiddenControls="setHiddenControls",e.setVideoStyle="setVideoStyle",e.setPictureInPictureEnabled="setPictureInPictureEnabled",e.setExternalVisualState="setExternalVisualState",e.getExternalVisualState="getExternalVisualState",e.getIsVisibilitySupported="getIsVisibilitySupported",e.getConfig="getConfig",e.requestDebugInfo="requestDebugInfo",e.xhrRequest="xhrRequest",e.stopAd="stopAd",e.playInrollAd="playInrollAd",e.skipAdPod="skipAdPod",e.playAdViewers="playAdViewers",e.destroy="destroy",e.logDelta="logDelta"}(uc||(uc={}));let hc=0;const fc=e=>{let t=e;return yi(e)?[].concat(e).map(e=>fc(e)):si(e)?new Date(e.getTime()):(!(0,Nr.m)(e)&&(0,Rr.K)(e)&&(t={},(0,Dr.M)(e,(e,n)=>{t[n]=fc(e)})),t)},pc=["requestId"];class mc extends dl{getDataFromPostMessageEvent(e){let{data:t}=e;if("object"!==typeof t)return;const{id:n,batch:r}=t;return"string"===typeof n&&0!==n.length&&r&&Array.isArray(r)?{id:n,batch:r}:void 0}constructor(e){let{id:t,sender:n,receiver:r,syncMode:i=!1,internal:a=!1}=e;super(),this.id=void 0,this.key=void 0,this.abortRequestMap=Object.create(null),this.sender=void 0,this.receiver=void 0,this.sendPromise=void 0,this.messagesBatch=[],this.receiverCallback=void 0,this.id=t,this.key=i?"handle_data_"+t:void 0,this.sender=n,this.receiver=r;const o=e=>{const{id:t,batch:n}=e;t===this.id&&n.forEach(e=>{let{answer:t,command:n,event:r}=e;if(t&&void 0!==t.requestId&&this.emit("Answer",t),r&&this.emit("Event",r),!n)return;const o=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(n,pc),s=It({},a&&i?fc(o):o,{sendAnswer:e=>{this.sendAnswer(e,n.requestId)}});this.emit("Command",s)})};this.receiverCallback=e=>{const t=this.getDataFromPostMessageEvent(e);void 0!==t&&o(t)},this.key&&(r[this.key]=o),r.addEventListener("message",this.receiverCallback)}sendEvent(e,t){let{data:n,sourceId:r}=t;const i={eventName:e,data:n,sourceId:r};this.sendPostMessage({event:i})}sendCommand(e,t){const n={commandName:e,params:t};this.sendPostMessage({command:n})}sendRequest(e,t,n){void 0===n&&(n=6e4);const r={commandName:e,params:t,requestId:hc++},i=this.waitForAnswer(r,n);return this.sendPostMessage({command:r}),i}destroy(){this.receiver.removeEventListener("message",this.receiverCallback),this.off("Command"),this.off("Answer"),this.off("Event"),this.off("Error"),(0,Dr.M)(this.abortRequestMap,e=>e())}flush(){if(this.sendPromise=void 0,0===this.messagesBatch.length)return;const e={id:this.id,batch:[...this.messagesBatch]};this.messagesBatch=[];try{this.sender.postMessage(e,"*")}catch(na){this.safeSendClonedData(e,"*")}}waitForAnswer(e,t){let n,r=kr.Z;const i=()=>{clearTimeout(n),r(),delete this.abortRequestMap[e.requestId]};return new Promise(a=>{n=window.setTimeout(()=>{const t=this.abortRequestMap[e.requestId];"function"===typeof t&&t()},t);const o=t=>{t.requestId===e.requestId&&(i(),a(t.data))};this.on("Answer",o),r=()=>this.off("Answer",o),this.abortRequestMap[e.requestId]=i})}sendAnswer(e,t){void 0===t&&(t=-1);const n={data:e,requestId:t};this.sendPostMessage({answer:n})}sendPostMessage(e){let{event:t,command:n,answer:r}=e;if(this.key)try{const e={id:this.id,batch:[{event:t,answer:r,command:n}]};return void this.sender[this.key](e)}catch(i){}this.messagesBatch.push({event:t,answer:r,command:n}),this.planRealSend()}safeSendClonedData(e,t){try{this.sender.postMessage(JSON.parse(JSON.stringify(e)),t)}catch(n){this.emit("Error",n)}}planRealSend(){void 0===this.sendPromise&&(this.sendPromise=Promise.resolve().then(()=>this.flush()))}}const gc=[Er.NO_CODECS,Er.UNSUPPORTED_ENV,Er.CONFIG,Er.NETWORK_PLAYER,Er.BANNED,Er.REGIONAL],yc=wt({},{onReady:!1,onResourcesIdle:!1,onInit:!1,onInitError:!1,onVolumeChange:!1,onFullScreenChange:!1,onVisualStateChange:!1,onStartStageChange:!1,onNextAdRemainingTimeChange:!1,onStreamsWithSupportInfoChange:!1,onNetworkStatusChange:!1,onLogEvent:!1,onPreloadSourceResolve:!1,onPreloadSourceReject:!1,onBandwidthEstimateChange:!1,onRequestFullscreenChange:!1,onPlaybackQualityUpdate:!1,onExpectedStalledChange:!1,onPreloadDetailsUpdate:!1,onCapSizeChange:!1},{onChangeStream:!0,onDrmSystemChange:!0,onStateChange:!0,onAdStateChange:!0,onAdLoaded:!0,onAdError:!0,onBeforeAdPodStart:!0,onAdPodStart:!0,onAdPodClick:!0,onAdPodSkip:!0,onAdPodEnd:!0,onAdSkippableStateChange:!0,onAdVolumeAvailabilityStateChange:!0,onAdPodCloseStateChange:!0,onAdPodDurationChange:!0,onAdPodCurrentTimeChange:!0,onAdPodTimeToSkipChange:!0,onAdInteraction:!0,onPositionChange:!0,onTimelineInfoChange:!0,onError:!0,onRecover:!0,onVideoTrackChange:!0,onVideoTracksChange:!0,onAudioTrackChange:!0,onAudioTracksChange:!0,onTextTrackChange:!0,onTextTracksChange:!0,onSubtitlesChange:!0,onThumbnailTileGeneralMetaInfoChange:!0,onVideoTypeChange:!0,onVideoSizeChange:!0,onOriginalBroadcastAdStateChange:!0,onContentImpression:!0,onBufferingRangesChange:!0,onPlaybackRateChange:!0,onEngineChange:!0,onInrollFrame:!0});var _c=e(3945);const vc=[{enabled:"webkitFullscreenEnabled",element:"webkitFullscreenElement",request:"webkitRequestFullscreen",exit:"webkitExitFullscreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}},{enabled:"fullscreenEnabled",element:"fullscreenElement",request:"requestFullscreen",exit:"exitFullscreen",events:{change:"fullscreenchange",error:"fullscreenerror"}},{enabled:"mozFullScreenEnabled",element:"mozFullScreenElement",request:"mozRequestFullScreen",exit:"mozCancelFullScreen",events:{change:"mozfullscreenchange",error:"mozfullscreenerror"}},{enabled:"msFullscreenEnabled",element:"msFullscreenElement",request:"msRequestFullscreen",exit:"msExitFullscreen",events:{change:"MSFullscreenChange",error:"MSFullscreenError"}},{enabled:"webkitSupportsFullscreen",element:"webkitDisplayingFullscreen",request:"webkitEnterFullscreen",exit:"webkitExitFullscreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}}],Ec=["from_block","stream_block"];let Sc;!function(e){e.PLAY="PLAY",e.PAUSE="PAUSE",e.PREVENT_ACTIONS="PREVENT_ACTIONS",e.CALL_NEXT="CALL_NEXT"}(Sc||(Sc={}));const Rc=()=>e=>{let{next:t}=e;t({actionType:Sc.PREVENT_ACTIONS})},Ac=e=>{let{settings:t}=e;return void 0===t?Rc():e=>{let{next:t,getState:n}=e;const{visualState:r}=n();return r.isFullScreen?t({actionType:r.isDocumentVisible?Sc.PLAY:Sc.PAUSE}):t({actionType:Sc.CALL_NEXT})}},Tc=e=>{let{settings:t}=e;return void 0===t?Rc():e=>{let{next:t,getState:n}=e;const{visualState:r}=n();return t({actionType:(r.isVisibilitySupported?r.isElementVisible:r.isDocumentVisible)?Sc.PLAY:Sc.PAUSE})}},bc=e=>{let{settings:t}=e;return void 0===t?Rc():e=>{let{next:n,getState:r}=e;return t.onlyMuted&&!r().muted?n({actionType:Sc.PREVENT_ACTIONS}):n({actionType:Sc.CALL_NEXT})}},Oc=e=>{let{settings:t}=e;return void 0===t?Rc():e=>{let{next:t,getState:n}=e;return n().visualState.isPip?t({actionType:Sc.PREVENT_ACTIONS}):t({actionType:Sc.CALL_NEXT})}},Cc=(e,t,n,r)=>function(){try{return t.apply(n||this,arguments)}catch(na){if((0,Nr.m)(r)&&r(na),!0===na.preventProtect)throw na;Cc.log(na,e)}};Cc.log=function(e,t){console.log("LOG:"+t+":"+e)},Cc.setTimeout=(e,t,n,r)=>window.setTimeout(Cc("timeout",e,n,r),t);class Pc{}Pc.YaContextCallbacks=Dt("Ya.C","ontext._callbacks"),Pc.YaContextCallbacksCalls=Dt("Ya.C","ontext._callbacks_call"),Pc.AdvManager=Dt("A","dvManager"),Pc.AdvBlock=Dt("A","dvBlock"),Pc.RTB=Dt("R","TB"),Pc.Rtb=Dt("R","tb"),Pc.MetrikaAdtune=Dt("metrika_a","dtune");const Ic=function(e,t){return void 0===t&&(t={}),(n,r)=>{let i;const a={portion:void 0!==t.portion?t.portion:0,interval:void 0!==t.interval?t.interval:300,overlappedPoints:void 0!==t.overlappedPoints?t.overlappedPoints:[[0,0]]},o=e({portion:Math.max(Number.MIN_VALUE,a.portion),interval:a.interval,overlappedPoints:a.overlappedPoints,element:n,callback:Cc("visibilityObserver",e=>{i!==e&&(i=e,r(e))})});if(!o)throw new Error("visibilityObserver: no strategy");return o.start(),(0,$n.I)(()=>o.stop())}};class wc{constructor(e){this.args=e,this.runningCount=0,this.callback=(e,t)=>{const n=e+1;t?n===this.strategies.length?this.args.callback(t):n===this.runningCount&&this.startNext():(this.stopUntil(n),this.args.callback(t))},this.strategies=Ei(e.strategyFactories,(e,t)=>e(e=>this.callback(t,e)))}static from(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{const n=[];for(const r of t){let t=()=>null;const i=r(Lt({},e,{callback:e=>t(e)}));if(!i)return null;n.push(e=>(t=e,i))}return new wc({callback:e.callback,strategyFactories:n})}}start(){!this.runningCount&&this.strategies.length&&this.startNext()}stop(){this.stopUntil(0)}get isDetermined(){for(const e of this.strategies)if(!e.isDetermined)return!1;return!0}getIsVisible(){for(let e=0;e<this.strategies.length;e++)if(!this.strategies[e].getIsVisible())return!1;return!0}startNext(){this.strategies[this.runningCount++].start()}stopUntil(e){for(;this.runningCount>e;)this.strategies[--this.runningCount].stop()}}var kc=e(144),Nc=e(4679);let Dc="hidden",Lc="visibilitychange";if(!(Dc in document)){const e=["webkit","moz","ms","o"];for(const t of e){const e=t+"Hidden";if(e in document){Dc=e,Lc=t+"visibilitychange";break}}}const xc=new class{constructor(e){void 0===e&&(e=window),this.windowObj=e,this.initYaBrowserApi()}canUseYaBroApi(){return Boolean(this.yaBroApiInstance&&this.yaBroApiInstance.isInCustoPage)}isPageHiddenYaBroApi(){return!(this.yaBroApiInstance&&this.yaBroApiInstance.pageVisible)}initYaBrowserApi(){this.windowObj.browser&&this.windowObj.browser.BrowserEmbeddedApi&&this.windowObj.browser.BrowserEmbeddedApi.getInstance().then(e=>{this.yaBroApiInstance=e})}};class Mc{constructor(e){this.args=e,this.isDetermined=!0,this.onVisibilityChangeCallback=()=>{this.args.callback(this.getIsVisible())}}static factory(e){return new Mc(e)}start(){this.timer=window.setTimeout(()=>{this.onVisibilityChangeCallback(),this.subscription=function(e,t,n,r,i){if(!e||!n)return null;let a=Ft(Cc("handler:"+t,n,r));const o={un(){(0,kc.f)(e,t,a)}};var s;return i&&i.once&&!Nc.vE&&(s=a,a=function(e){s.call(this,e),Ut(o)}),Nc.wI?(0,kc.h)(e,t,a,i):(0,kc.h)(e,t,a,i&&i.capture),o}(document,Lc,this.onVisibilityChangeCallback)})}stop(){window.clearTimeout(this.timer),Ut(this.subscription)}getIsVisible(){return!(xc.canUseYaBroApi()?xc.isPageHiddenYaBroApi():Boolean(document[Dc]))}}const Fc=function(e){void 0===e&&(e=window);const t=e.navigator.userAgent;return-1!==t.indexOf("Opera Mini")||(-1!==t.indexOf("; wv)")&&-1!==t.indexOf(" OPR/")||-1!==t.indexOf(" OPiOS/"))}(),Uc=e=>{try{const{left:t,right:n,top:r,bottom:i}=e.getBoundingClientRect();return{left:t,right:n,top:r,bottom:i,width:n-t,height:i-r}}catch(na){return{left:0,width:0,top:0,height:0,right:0,bottom:0}}};class Vc{constructor(e){this.args=e,this.isDetermined=!0,this.callback=e=>{const t=e[0].intersectionRatio>=this.observer.thresholds[0];this.args.callback(t)},this.threshold=Math.max(2**-149,this.args.portion),this.observer=new IntersectionObserver(this.callback,{threshold:this.threshold})}static factory(e){return"undefined"===typeof IntersectionObserver?null:"thresholds"in IntersectionObserver.prototype&&e.element?new Vc(e):null}start(){this.observer.observe(this.args.element)}stop(){this.observer.disconnect()}getIsVisible(){return e=this.args.element,t=this.threshold,Fc?e.offsetWidth>0&&e.offsetHeight>0:Bt(e)>=(t||Number.MIN_VALUE);var e,t}}var Bc=e(3424);class jc extends class{constructor(e){this.args=e,this.isDetermined=!0}start(){this.timer=window.setInterval(Cc("visibilityObserver",()=>{this.args.callback(this.isVisible())}),this.args.interval)}stop(){window.clearInterval(this.timer)}getIsVisible(){return this.isVisible()}}{constructor(e){super(e),this.args=e,this.windowChain=(0,Bc.T)(window).reverse();try{this.isDetermined=Boolean(window.top.location.hostname)}catch(na){this.isDetermined=!1}}static factory(e){return e.element?new jc(e):null}isVisible(){const e=Uc(this.args.element),t=e.width*e.height;if(t<=0)return!1;const n=function(e,t,n){let r=0;for(arguments.length<3&&(r=1,n=e[0]);r<e.length;r++)n=t(n,e[r],r,e);return n}(this.windowChain,(e,t)=>this.getFrameVisiblePart(t,e),void 0),r=Math.max(e.left,n.left),i=Math.max(e.top,n.top);return(Math.min(e.right,n.right)-r)*(Math.min(e.bottom,n.bottom)-i)>=Math.floor(t*this.args.portion)}getFrameVisiblePart(e,t){if(!t||!e.frameElement)return{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight};const n=Uc(e.frameElement);return{left:Math.max(t.left-n.left,0),right:e.innerWidth-Math.max(n.right-t.right,0),top:Math.max(t.top-n.top,0),bottom:e.innerHeight-Math.max(n.bottom-t.bottom,0)}}}let Yc=null;try{"undefined"!==typeof IntersectionObserver&&(Yc=wc.from(class{static from(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{for(const n of t){const t=n(e);if(t)return t}return null}}}.from(Vc.factory,jc.factory),Mc.factory))}catch(hu){}class Hc extends dl{constructor(e,t){super(),this.visibilityThreshold=-1,this.state={isPip:!1,isFullScreen:!1,isDocumentVisible:(0,br.s)(document),isElementVisible:!0,isVisibilitySupported:null!==Yc},this.element=void 0,this.observe=e=>(this.on("Change",e),()=>this.off("Change",e)),this.notifyDocumentVisibility=e=>{this.state.isDocumentVisible!==e&&(this.state=jt({},this.state,{isDocumentVisible:e}),this.handleChange())},this.notifyElementVisibility=e=>{this.state.isElementVisible!==e&&(this.state=jt({},this.state,{isElementVisible:e}),this.handleChange())},this.element=e,this.state.isDocumentVisible=(0,br.s)(e.ownerDocument),t&&(this.visibilityThreshold=Math.min(t.threshold,.99)),this.observeVisibility()}notifyFullScreen(e){this.state.isFullScreen!==e&&(this.state=jt({},this.state,{isFullScreen:e}),this.handleChange())}notifyPip(e){this.state.isPip!==e&&(this.state=jt({},this.state,{isPip:e}),this.handleChange())}destroy(){this.emit("Destroy"),this.off("Change")}getState(){return this.state}observeVisibility(){if(this.state.isVisibilitySupported)try{const e=Ic(Yc,{portion:this.visibilityThreshold})(this.element,this.notifyElementVisibility);this.once("Destroy",e),this.once("Restart",e),this.once("Restart",()=>this.off("Destroy",e))}catch(e){this.state.isVisibilitySupported=!1,this.state.isElementVisible=!0}try{const e=Ic(wc.from(Mc.factory))(this.element,this.notifyDocumentVisibility);this.once("Destroy",e),this.once("Restart",e),this.once("Restart",()=>this.off("Destroy",e))}catch(e){}}restart(){this.emit("Restart"),this.observeVisibility()}handleChange(){this.emit("Change",this.state)}}class Kc{constructor(e){let{element:t,togglePlaybackVisibilitySetting:n,playerStateAdaptor:r,playPauseController:i}=e;this.visibilityObserver=void 0,this.playerStateAdaptor=void 0,this.playPauseController=void 0,this.middlewareInitParams=void 0,this.middlewareList=void 0,this.destroyCallbacks=void 0,this.lastChainId=0,this.done=e=>{switch(e.actionType){case Sc.PLAY:return this.playPauseController.play();case Sc.PAUSE:return this.playPauseController.pause();case Sc.PREVENT_ACTIONS:case Sc.CALL_NEXT:return}},this.destroyCallbacks=[],this.visibilityObserver=new Hc(t,n),this.playPauseController=i;const a=this.visibilityObserver.observe(()=>{this.emitChange()}),o=r.onChange(()=>{this.emitChange()});this.playerStateAdaptor=r,this.destroyCallbacks.push(a,o,()=>this.visibilityObserver.destroy()),this.middlewareInitParams={settings:n},this.middlewareList=n?[Tc(this.middlewareInitParams),Ac(this.middlewareInitParams),Oc(this.middlewareInitParams),bc(this.middlewareInitParams)]:[]}appendMiddleware(e){this.middlewareList.unshift(e(this.middlewareInitParams))}prependMiddleware(e){this.middlewareList.push(e(this.middlewareInitParams))}observeVisualState(e){return this.visibilityObserver.observe(e)}restartVisibilityObserver(){return this.visibilityObserver.restart()}getVisualState(){return this.visibilityObserver.getState()}notifyFullScreen(e){this.visibilityObserver.notifyFullScreen(e)}notifyPip(e){this.visibilityObserver.notifyPip(e)}destroy(){this.destroyCallbacks.forEach(e=>e())}emitChange(){const e=++this.lastChainId,t=Yt({},this.playerStateAdaptor.getState(),{visualState:this.visibilityObserver.getState()}),n=()=>t;this.middlewareList.reduce((t,r)=>()=>{r({getState:n,next:(0,$n.I)(n=>{if(e===this.lastChainId)return n.actionType===Sc.CALL_NEXT?t():this.done(n)})})},kr.Z)()}}class qc{actualizeAutoplay(e){this.expectedAutoplay=e}constructor(e){let{play:t,pause:n,togglePlaybackVisibilitySetting:r,autoplay:i,playerStateAdaptor:a,logEvent:o}=e;this.play=void 0,this.pause=void 0,this.destroy=void 0,this.paused=!1,this.wasEverPlaying=!1,this.pausedViaController=!1,this.expectedAutoplay=!1,this.expectedAutoplay=i,this.paused=!Ht(a.getState()),this.play=()=>{(function(e){let{playingState:t,togglePlaybackVisibilitySetting:n,autoplay:r,wasEverPlaying:i}=e;return!!n&&(i?!Ht({playingState:t}):(n.forceAutoplay||r)&&!Kt({playingState:t}))})(qt({},a.getState(),{togglePlaybackVisibilitySetting:r,autoplay:this.expectedAutoplay,wasEverPlaying:this.wasEverPlaying}))&&(!this.pausedViaController&&this.wasEverPlaying||(this.pausedViaController=!1,t(),o("PlayVideoOnVisibilityChange")))},this.pause=()=>{this.paused||(this.pausedViaController=!0,this.paused=!0,n(),o("PauseVideoOnVisibilityChange"))},this.destroy=a.onChange(()=>{const e=a.getState(),t=Ht(e);this.wasEverPlaying=Kt(e)&&(e.hasWatchedTime||e.adState.state===Mi.PLAYING)||this.wasEverPlaying,this.paused=!t,t&&(this.pausedViaController=!1)})}}class Gc{constructor(e){this.playerApi=void 0,this.handlers=void 0,this.previousWatchedTime=0,this.emitChange=()=>{this.handlers.forEach(e=>e())},this.emitWatchedTimeChange=e=>{let{watchedTime:t}=e;(this.previousWatchedTime>0&&0===t||0===this.previousWatchedTime&&t>0)&&this.emitChange(),this.previousWatchedTime=t},this.playerApi=e;if(!e.getState())throw new Error("PlayerStateAdaptorV2 should use only inited PlayerApi");this.handlers=[],this.playerApi.on(Br.WatchedTimeChange,this.emitWatchedTimeChange),this.playerApi.on(Br.PlayingStateChange,this.emitChange),this.playerApi.on(Br.MutedChange,this.emitChange),this.playerApi.on(Br.AdStateChange,this.emitChange)}getState(){const e=this.playerApi.getState();return{hasWatchedTime:e.watchedTime>0,muted:e.muted,playingState:e.playingState,playingStateReason:e.playingStateReason,adState:e.adState}}onChange(e){return this.handlers.push(e),()=>{this.handlers=this.handlers.filter(t=>t!==e)}}destroy(){this.playerApi.off(Br.WatchedTimeChange,this.emitWatchedTimeChange),this.playerApi.off(Br.PlayingStateChange,this.emitChange),this.playerApi.off(Br.MutedChange,this.emitChange),this.playerApi.off(Br.AdStateChange,this.emitChange),this.handlers=[]}}const Wc="#FFCC00",Zc=navigator&&"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,zc=function(e){void 0===e&&(e=window);const t=e.navigator.userAgent,n=t.indexOf("Android");return-1===n?-1:parseFloat(t.slice(n+8))}();var Xc=e(5940);const Jc=function(e){void 0===e&&(e=window);const{platform:t=""}=e.navigator||{};return function(e){void 0===e&&(e=window);const{vendor:t=""}=e.navigator||{};return 0===t.indexOf("Google")}(e)&&!Pe(e)&&0===t.indexOf("Linux ")&&(0,Xc.b)(e)}(),Qc=[["XiaoMi/MiuiBrowser",11],["UCBrowser",12],["HuaweiBrowser",9]],$c=(function(e){void 0===e&&(e=window);const{major:t,minor:n}=function(e){void 0===e&&(e=window);const t=(0,Pi.i)(e).match(/AppleWebKit\/(\d+)\.(\d+)/);if(!t)return{major:-1,minor:-1};const[,n,r]=t;return{major:parseInt(n,10),minor:parseInt(r,10)}}(e),r=function(e){const t=(0,Pi.i)(e).match(/Chrom(e|ium)\/([0-9]+)\./);return t?parseInt(t[2],10):-1}(e),i=Pe(e)}(window),function(e){return void 0===e&&(e=window),-1!==(0,oc.N)(e)}()),ed=function(e,t){void 0===e&&(e=document);const n=e.currentScript;if(n)return n;{const n=e.getElementsByTagName("script"),r=[];for(let e=0;e<n.length;e++)r.push(n[e]);if("function"===typeof t){const e=r.filter(t);return e[e.length-1]}return r[r.length-1]}}();ed&&ed.src;e(6838);const td=Qr.Z,nd=Qr.Z,rd=Qr.Z,id=e=>{let{win:t,propertyName:n}=e;return{call:e=>td(Jt({win:t,propertyName:n},e)),subscribe:e=>rd(Jt({win:t,propertyName:n},e)),wait:e=>(e=>{let{propertyName:t,win:n}=e;return new Promise(e=>{rd({callback:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e(n)},propertyName:t,win:n})})})(Jt({win:t,propertyName:n},e)),waitUntil:e=>(e=>{let{propertyName:t,win:n,comparator:r}=e;return new Promise(e=>{rd({propertyName:t,win:n,callback:function(){r(...arguments)&&e()}})})})(Jt({win:t,propertyName:n},e)),clear:e=>nd(Jt({win:t,propertyName:n},e))}};id({propertyName:"YANDEX_DESTROYABLE_GLOBAL_CALLBACK_PROPERTY_NAME",win:window});class ad{constructor(){this._isDestroyed=!1,this.destroyHandlers=[]}onDestroy(e){this._addDestroyHandler(e)}addDestroyListener(e){this._addDestroyHandler(e)}addDestroyHandler(e){this._addDestroyHandler(e)}destroy(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[r]=t;this._isDestroyed||(this._isDestroyed=!0,this._destroyReason=r,this.destroyHandlers.forEach(e=>e(...t)),this.destroyHandlers.length=0)}getIsDestroyed(){return this._isDestroyed}get destroyReason(){return this._destroyReason}get isDestroyed(){return this._isDestroyed}ignoreAfterDestroy(e){var t=this;let n=e;return function(){t.isDestroyed&&(n=Qr.Z);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];n.apply(t,r)}}_addDestroyHandler(e){this._isDestroyed?e(this._destroyReason):this.destroyHandlers.push(e)}}const od={position:"absolute",width:"100%",height:"100%",top:"0",left:"0"},sd=Qt({},od,{overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",pointerEvents:"none"}),ld=Qt({},od,{backgroundSize:"cover",backgroundPosition:"center center",backgroundRepeat:"no-repeat"});class cd extends ad{constructor(e){let{container:t,onReady:n=kr.Z,src:r,style:i}=e;super(),this.container=void 0,this.background=void 0,this.src=void 0,this.style=void 0,this.onReady=void 0,this.src=r,this.style=i,this.onReady=(0,$n.I)(n),this.container=document.createElement("div"),this.src?this.setPoster(this.src):L(this.container,{opacity:"0"}),this.addDestroyHandler(()=>{f(this.container),this.onReady=kr.Z}),t.appendChild(this.container)}setPoster(e){if(this.isDestroyed)return;if(!e)return void this.onReady();this.src=e,L(this.container,Qt({},sd,{opacity:"1"}));const t={backgroundImage:"url("+this.src+")"};this.initBackground(t)}setStyle(e){this.isDestroyed||(this.style=e,this.background&&e&&L(this.background,Qt({},e.objectFit?{backgroundSize:e.objectFit}:{})))}async initBackground(e){var t;null==(t=this.background)||t.remove();const n=this.background=document.createElement("div");L(n,ld),this.setStyle(this.style);const r=we(this.src);$c&&await r,L(n,e),this.container.appendChild(n),r.then(()=>this.onReady()).catch(kr.Z)}}const dd=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const{resolver:r,preparers:i}=$t(t);let a,o=null,s=null;return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(o&&o.every((e,n)=>t[n]===e))return a;const l=i.map(e=>e(...t));if(s&&s.every((e,t)=>l[t]===e))return o=t,a;const c=r(...l);return o=t,s=l,a=c,c}},ud={xml:"http://www.w3.org/XML/1998/namespace",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"},hd={};(0,Dr.M)({xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type"},(function(e,t){const n=e.split(":"),r=ud[n[0]];r&&(hd[t]=r)}));const fd="classList"in document.documentElement,pd=dd(e=>e.classList&&e.classList.add,Kr.E),md=(dd(e=>e.classList&&e.classList.remove,Kr.E),dd(e=>e.classList&&e.classList.toggle,Kr.E),(()=>{const e=document.createElement("p");return!!fd&&(e.classList.add("c1","c2"),!!e.classList.contains("c2")&&(e.classList.toggle("c3",!1),!e.classList.contains("c3")))})()),gd=((()=>{const e=document.createElement("p");!!fd&&(e.classList.toggle("a",!1),e.classList.contains("a"))})(),e=>e.split(" ").filter(e=>Boolean(e))),yd=md?(e,t)=>{const n=gd(t);e.classList.add(...n)}:(e,t)=>{const n=gd(t);for(let r=0;r<n.length;r++)e.classList.add(n[r])};var _d=e(856),vd=e.n(_d);const Ed=e(310),Sd=e(7792),Rd=(0,$n.I)(()=>Rt(vd().toString())),Ad={display:"flex",position:"absolute",top:"0",left:"0",bottom:"0",right:"0",padding:"20px",color:"#fff",fontSize:"24px",textAlign:"center",justifyContent:"center",alignItems:"center"},Td=[Br.SourceChange,Br.DrmSystemChange,Br.StreamChange,Br.StartStageChange,Br.PlayingStateChange,Br.VideoTypeChange,Br.UtcStartTimeChange,Br.CurrentTimeChange,Br.WatchedTimeChange,Br.LiveLatencyChange,Br.DurationChange,Br.DVRStartTimeChange,Br.DVRDurationChange,Br.VolumeChange,Br.MutedChange,Br.VolumeChangeReasonChange,Br.FullscreenStateChange,Br.PictureInPictureStateChange,Br.VisibleStateChange,Br.VideoSizeChange,Br.VideoTracksChange,Br.VideoTrackChange,Br.AudioTracksChange,Br.AudioTrackChange,Br.TextTracksChange,Br.TextTrackChange,Br.SubtitlesChange,Br.ErrorChange,Br.PlaybackRateRangeChange,Br.PlaybackRateChange,Br.AdStateChange,Br.NextAdRemainingTimeChange,Br.BufferedRangesChange,Br.TileMetaInfoChange,Br.TileMetaInfoUrlChange,Br.ConnectionQualityChange,Br.AdPodDurationChange,Br.AdPodCurrentTimeChange,Br.AdPodTimeToSkipChange,Br.AdPodFullyClickableStateChange,Br.AdSkippableStateChange,Br.AdPodCloseStateChange,Br.AdVolumeAvailabilityStateChange,Br.UgcLiveStatusChange];class bd{constructor(e,t){this.state=void 0,this.state=ln({},e);const n=e=>{ln(this.state,e)};Td.forEach(e=>{t(e,n)})}getState(){return this.state}}const Od=["object"===typeof document&&document&&"onfreeze"in document?"pagehide":"beforeunload","unload"];var Cd=e(8427);const Pd="<none>",Id=e=>e>=1e6?hn(e/1e6)+" Mbit/s":e>=1e3?hn(e/1e3)+" Kbit/s":hn(e)+" bit/s";class wd extends ad{constructor(e){super(),this.props=e,this.root=document.createElement("div"),this.visible=!1,this.updateInterval=void 0,this.bandwidthEstimate=void 0,this.engine=void 0,this.nodes=void 0,this.initialRender=(0,$n.I)(()=>{const{vsid:e}=this.props.getState();L(this.root,{position:"absolute",top:"10px",left:"10px",marginRight:"10px",padding:"5px",backgroundColor:"rgba(0, 0, 0, 0.9)",color:"#fff",fontFamily:"monospace",fontSize:"10px",lineBreak:"anywhere",whiteSpace:"pre-line",lineHeight:"9px",pointerEvents:"none",zIndex:"2"});const t=document.createElement("img");t.src=function(e){return"https://barcode.yandex.net/qrcode/"+e+".png"}(e),L(t,{position:"absolute",bottom:"0",right:"0",width:"85px",height:"85px",filter:"invert(1)"}),this.root.appendChild(t);const n=document.createElement("table");L(n,{position:"relative",borderCollapse:"collapse"}),this.nodes={vsid:fn(n,"vsid"),time:fn(n,"time"),source:fn(n,"source"),timeline:fn(n,"timeline"),state:fn(n,"state"),buffer:fn(n,"buffer"),bandwidth:fn(n,"bandwidth"),viewport:fn(n,"viewport"),videoTrack:fn(n,"video track"),audioTrack:fn(n,"audio track")},this.nodes.vsid.textContent=e,this.root.appendChild(n),this.props.container.appendChild(this.root);const r=document.createElement("button");r.innerText="[x]",L(r,{border:"none",background:"none",color:"white",padding:"2px",cursor:"pointer",position:"absolute",top:"3px",left:"3px",pointerEvents:"auto"}),this.root.appendChild(r),r.addEventListener("click",()=>this.setVisibility(!1))})}setVisibility(e){if(this.visible!==e){if(this.visible=e,e)return this.initialRender(),this.update(),L(this.root,{display:"block"}),void(this.updateInterval=setInterval(()=>this.update(),1e3));L(this.root,{display:"none"}),void 0===this.updateInterval&&(clearInterval(this.updateInterval),this.updateInterval=void 0)}}onEngineChange(e){this.engine=e,this.update()}onBandwidthEstimateChange(e){this.bandwidthEstimate=e,this.update()}renderTimeline(){const{currentTime:e,duration:t,videoType:n,liveLatency:r}=this.props.getState(),i=void 0===r?"":", latency "+hn(r),a=void 0===n?"":" ("+n+i+")";return hn(e)+"/"+hn(t)+a}renderBuffer(){const{currentTime:e,bufferedRanges:t}=this.props.getState(),n=un(t,e);return void 0===n?Pd:hn(n)}renderVideoTrack(){const{videoTrack:e,videoSize:t}=this.props.getState();if(void 0===e)return void 0===t?Pd:t.videoWidth+"x"+t.videoHeight;let{width:n,height:r,bitrate:i,value:a}=e;if(Ie(a)&&(a=re(a).pathname.split("/").pop()||a),void 0===n||void 0===r){if(void 0===t)return a;n=t.videoWidth,r=t.videoHeight}return n+"x"+r+" "+Id(1e3*i)+" ("+a+")"}renderAudioTrack(){const{audioTrack:e}=this.props.getState();if(void 0===e)return Pd;const{value:t,bitrate:n,lang:r}=e,i=(r+" "+(void 0===n?"":Id(1e3*n))+" ("+t+")").trim();return i.length>0?i:Pd}renderViewport(){let{width:e,height:t}=this.props.container.getBoundingClientRect();return e*=devicePixelRatio,t*=devicePixelRatio,e+"x"+t}renderSource(){var e,t;const n=null!=(e=null==(t=this.props.getState().source)?void 0:t.params.videoInfo.videoContentId)?e:"<unknown content id>",r=this.props.getSourceId(),{watchedTime:i}=this.props.getState();return n+" "+(c(r)?"#"+r:"#-")+(void 0===this.engine?"":", "+this.engine)+" (watched "+hn(i)+")"}update(){var e;this.visible&&!this.isDestroyed&&(this.nodes.time.textContent=String(new Date),this.nodes.source.textContent=this.renderSource(),this.nodes.state.textContent=this.props.getState().playingState,this.nodes.timeline.textContent=this.renderTimeline(),this.nodes.buffer.textContent=this.renderBuffer(),this.nodes.bandwidth.textContent=void 0===(e=this.bandwidthEstimate)?Pd:Id(e.value)+" ("+e.source+")",this.nodes.viewport.textContent=this.renderViewport(),this.nodes.videoTrack.textContent=this.renderVideoTrack(),this.nodes.audioTrack.textContent=this.renderAudioTrack())}destroy(){super.destroy(),function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}(this.root)}}class kd extends dl{destroy(){this.emit("Destroy"),this.off("Destroy"),Object.keys(this.handlers).forEach(e=>{this.off(e)}),Object.keys(this.onceHandlers).forEach(e=>{this.off(e)})}}const Nd=[{width:240,height:135,sizeString:"240x135"},{width:320,height:180,sizeString:"320x180"},{width:480,height:270,sizeString:"480x270"},{width:640,height:360,sizeString:"640x360"},{width:936,height:524,sizeString:"936x524"},{width:1920,height:1080,sizeString:"1920x1080"}],Dd=["get-ott","get-vh"];class Ld{static parse(e,t,n){const r={};if(!e||!yn(e))return r;let i=e;"?"!==i[0]&&"#"!==i[0]||(i=i.slice(1));const a=i.split(t||"&");for(let o=0;o<a.length;o++){const e=a[o].indexOf("=");if(-1===e){n&&(r[decodeURIComponent(a[o])]=!0);continue}r[decodeURIComponent(a[o].slice(0,e))]=Ld.parseJSON(decodeURIComponent(a[o].slice(e+1)))}return r}static parseJSON(e){try{return JSON.parse(e)}catch(t){return e}}constructor(e,t,n){const r={},i={};if(vn(t))for(const o in t){if(!t.hasOwnProperty(o))continue;const e=t[o];vn(e)?(pn(e.value)||(this[o]=e.value),_n(e.set)&&(r[o]=e.set),e.unsafe&&(i[o]=!0)):pn(e)||(this[o]=e)}let a;if(e){const t=vn(e)?e:Ld.parse(e);for(const e in t){if(!t.hasOwnProperty(e))continue;const n=this[e],o=r[e];r.hasOwnProperty(e)&&_n(o)?o.call(this,t[e],e):this[e]=t[e],this[e]!==n&&i[e]&&(a=a||{},a[e]=this[e])}}a&&_n(n)&&n(a,this)}toString(e,t,n){void 0===e&&(e="&"),void 0===t&&(t=!1),void 0===n&&(n=[]);const r=encodeURIComponent,i=this;let a,o=Object.keys(this).filter((function(e){return!pn(i[e])&&!_n(i[e])})).map((function(e){return a=i[e],vn(a)&&(a=JSON.stringify(a)),n.indexOf(e)>-1?e+"="+a:r(e)+"="+r(a)})).join(e);return t&&(o+=e),o}appendTo(e){const t=this.toString();return t?(e+=e.indexOf("?")>-1?"&":"?",e+=t):e}}const xd="undefined"!==typeof window&&"http:"===location.protocol?"http:":"https:",Md=["init","error","adStart","adEnd","start","play","pause","end","seek"],Fd=["rnd","fullscreen","mute","duration","timestamp","user_ts","watchedTime","vsid","error_code","position_from"];let Ud="",Vd="";const Bd={none:0,always:1,start:2,ui:3,restriction_age:4},jd={plain:0,colourful:1,with_subscribe_info:2,with_subscribe_label:3},Yd=["desktop","touch","pad","app","tv","tvapp"],Hd=["default","live","paid","avod","alive"],Kd=["be","en","id","kk","ru","tr","tt","uk","uz"];let qd=!1;const Gd=function(e,t){return function(n,r){if(!_n(r))throw new Error("VHQuery: missing method for handling unsafe params.");const i=new Ld(n,e(),r.bind(this));return t(i)}}((function(){return wn()}),(function(e){return e.reqid&&vn(e.counters)&&!e.counters.reqid&&(e.counters.reqid=e.reqid),vn(e.counters)&&e.counters.reqid&&!e.reqid&&(e.reqid=e.counters.reqid),(e.tv||e.nativeui||e.test_mode)&&(e.recommendations=""),function(e){const t={};yn(e.slots)&&e.slots.split(";").forEach((function(e){const n=e.split(",",1)[0];n&&(t[n]=e)}));Array.isArray(e["test-id"])&&e["test-id"].forEach((function(e){e&&(t[e]||(t[e]=e+",0,-1"))}));let n="";const r=[];for(const i in t)t.hasOwnProperty(i)&&(n+=n.length>0?";"+t[i]:t[i],r.push(i));n&&(e.slots=n);r.length>0&&(e["test-id"]=r)}(e),e}));class Wd{static parse(){const e=Wd.getDefault();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];const i=n.filter(Boolean).join(";"),a=Ld.parse(i,";",!0);return new Ld(a,e)}static getDefault(){return{"videoplayer-version":void 0,version:void 0,force_unmute:{value:void 0,set:An},restore_playback_progress:{value:void 0,set:An},use_friendly_frame:{value:void 0,set:An},progress:{value:void 0,set:An},start_position_confirmation:{value:void 0,set:An},hide_brand_play_button:{value:void 0,set:An},disable_autoplay_slow_connection:{value:!1,set:An},disable_autoplay_save_data:{value:!1,set:An},max_buffer_length:{value:void 0,set:Cn},bandwidth_estimate_offset:{value:void 0,set:Cn},soft_max_res_height:{value:void 0,set:Cn},poll_id:{value:void 0,set:On},poll_timeout:{value:21600,set:Cn},poll_show_before_midroll:{value:!1,set:An}}}}class Zd{static create(e,t){var n,r,i;const a=re(e||"").search,o=Gd(a,()=>{});null!=(n=t.content)&&n.ottParams&&gn(null==(r=t.content)?void 0:r.restriction_age)&&(o.meta=Bd.restriction_age,o.m_duration=8,o.m_title=t.content.restriction_age+"+");const s=Wd.parse(null==(i=t.request_info)?void 0:i.flags,o.mb_flags);return function(e,t){e.version=e["videoplayer-version"]||t.version,e.progress=mn(e.progress)?e.progress:t.progress,e.start_position_confirmation=mn(e.start_position_confirmation)?e.start_position_confirmation:t.start_position_confirmation,e.force_unmute=mn(e.force_unmute)?e.force_unmute:t.force_unmute,e.restore_playback_progress=mn(e.restore_playback_progress)?e.restore_playback_progress:t.restore_playback_progress,e.hide_brand_play_button=mn(e.hide_brand_play_button)?e.hide_brand_play_button:t.hide_brand_play_button}(s,o),new Zd({query:o,expFlags:s,params:{data:t},player:{trigger:()=>{}},ids:Dn(t,o)})}constructor(e){this.params=void 0,this.query=void 0,this.ids=void 0,this.expFlags=void 0,this.player=void 0,this.requestInfo=void 0,this.params=e.params,this.query=e.query,this.ids=e.ids,this.expFlags=e.expFlags,this.player=e.player,this.requestInfo=e.params.data.request_info||{}}prepareVHParams(){const e=this.params.data.content||{},t=Object.create(e),n=e.actual_episode;if(n)for(const o in n)n.hasOwnProperty(o)&&(t[o]=n[o]);t.stream&&(t.withCredentials=Boolean(t.stream.withCredentials)),t.loop=Boolean(t.loop);const r=window.innerWidth,i=window.innerHeight,a="undefined"!==typeof window?window.devicePixelRatio:1;return t.meta&&(t.meta.announce_thumbnail=En(t.meta.announce_thumbnail,r,i,a)),t.thumbnail=En(t.thumbnail,r,i,a),t.onto_poster=En(t.thumbnail,r,i,a),t.cover=En(t.cover,r,i,a),t}getHiddenControls(e){if(this.query.tv)return"*";let t=[];vn(null==e?void 0:e.auto_fields)&&null!=e&&e.auto_fields.player_controls_hidden&&(t=e.auto_fields.player_controls_hidden);const n=[].concat(t,this.query.hidden.split(","));return Object.keys(n.reduce((function(e,t){return yn(t=t.trim())&&t&&(e[t]=!0),e}),{})).join(", ")}getLiveOffset(e){return gn(this.query.live_offset)?this.query.live_offset:null!=e&&e.ugc_live?15:void 0}getSkinConfig(e){const t=this.getFeatureParams(e),n=this.getHiddenControls(e),r=this.getLogoConfig(e),i=this.getTitleSettings(),a=this.getSubscribeButton();return{showReportButton:this.query.report,showUnmuteButtonForAll:this.expFlags.force_unmute,logoConfig:r,features:t,hiddenControls:n,showSubscribeButton:a,title:i}}getPlayerConfig(){const e=this.prepareVHParams(),t=this.getSourceConfig(e),n=this.getAutoplay(),r=this.getLiveOffset(e),i={source:t,skinParams:{skinConfig:this.getSkinConfig(e)},autoplay:n,volume:this.query.volume,muted:this.query.mute,lang:this.query.lang||this.requestInfo.lang,preload:this.query.preload,platform:this.query.platform,togglePlaybackOnVisibilityChange:this.query.play_on_visible,useAbdBundle:this.requestInfo.use_aab_bundle,useFriendlyFrame:this.query.use_friendly_frame,disableAndroidPlayer:this.query.disable_android_player,flags:this.expFlags,usePlayerApiMock:this.query.test_mode,liveOffset:r,slowConnection:this.requestInfo.slow_connection||this.query.slow_connection,maxBufferLength:this.expFlags.max_buffer_length,bandwidthEstimateOffset:this.expFlags.bandwidth_estimate_offset,logUrl:this.requestInfo.use_aab_bundle?this.requestInfo.logging_url:void 0,device:{id:this.query.device_id},objectFit:this.query.object_fit,backgroundColor:this.query.background_color,zenPreload:this.query.zen_preload,cacheSourcesCount:this.query.cache_sources_count,restoreTabSessionPlaybackProgress:this.expFlags.restore_playback_progress,loadSkin:this.query.skin};return this.params.disableOTTPlayerLoader&&(i.disableOTTPlayerLoader=!0),i}getSourceConfig(e){this.preparePlaybackParams(e),this.prepareAdParams(e);const t=String(this.getStreamParams(e)),n=this.getAdConfig(e),r=this.getVideoInfo(e),i=this.getTrackings(e),a=this.getOTTParams(e),o=this.getStartPosition(e),s=this.getAdditionalParams(e),l=this.getPreview(e),c=this.getPosterStyle();let d=this.getStreamsConfig(e);d=d.map((function(e){return e.url+=e.url.indexOf("?")>-1?"&":"?",e.url+=t,e}));const u={streams:d,adConfig:n,videoInfo:r,trackings:i,preview:l,startPosition:o,enableRemoteProgressSaving:this.query.remote_progress_saving||this.expFlags.progress,withCredentials:this.query.with_credentials||(null==e?void 0:e.withCredentials),loop:(null==e?void 0:e.loop)||this.query.loop,additionalParams:s,preferredTracks:{preferredAudioLangs:this.query.preferable_audio,preferredTextLangs:this.query.preferable_text},context:a,passportRetpath:this.query.retpath};return c&&(u.posterStyle=c),this.params.data.scriptedEvents&&(u.scriptedEvents=this.params.data.scriptedEvents),yn(s.slots)&&vn(u.context)&&(u.context.testIds=s.slots.split(";").map(e=>parseInt(e,10)).join(",")),this.query.scriptedEvents&&(u.scriptedEvents=this.query.scriptedEvents,delete this.query.scriptedEvents),u}preparePlaybackParams(e){e&&(e.start_time=parseInt(e.start_time,10)||void 0,e.finish_time=parseInt(e.finish_time,10),e.finish_time=isNaN(e.finish_time)?void 0:e.finish_time-1,e.dvr=parseInt(e.dvr,10)||void 0)}prepareAdParams(e){e&&(e.imp_id=1,vn(e.adConfig)&&!e.adConfig.category&&(e.adConfig.category=1017))}getStreamParams(e){function t(e,t){const n=parseFloat(e);n===n&&(this[t]=n)}function n(e,t){pn(e)||(this[t]=e)}const r={clid:495,uuid:null==e?void 0:e.uuid,yandexuid:this.ids.yandexuid,slots:this.query.slots,from:this.query.from,audio_only:this.query.audio_only,start:null==e?void 0:e.start_time,end:null==e?void 0:e.finish_time,dvr:null==e?void 0:e.dvr,soft_max_res_height:this.expFlags.soft_max_res_height};return(this.query.with_ad_insertion||this.requestInfo.with_ad_insertion)&&(r.imp_id=null==e?void 0:e.imp_id,r.video_category_id=vn(null==e?void 0:e.adConfig)?null==e?void 0:e.adConfig.category:void 0,r.target_ref=this.ids.bundle,r.partner_id=vn(null==e?void 0:e.adConfig)?null==e?void 0:e.adConfig.partner_id:void 0),new Ld(r,{uuid:{set(e,t){yn(e)&&(this[t]=e)}},audio_only:{set(e,t){e&&(this[t]=1)}},imp_id:{set:t},video_category_id:{set:t},partner_id:{set:t},yandexuid:{set:n},slots:{set:n},start:{set:n},end:{set:n},dvr:{set:n},target_ref:{set:n},soft_max_res_height:{set:t}})}getStreamsConfig(e){const t=Array.isArray(this.query.streams)?this.query.streams:null==e?void 0:e.streams;return(Array.isArray(t)?t:[]).reduce((function(e,t){const n={};for(const i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);if(!n.url)return e;const r=n.id||"default";return e.defId||(e.defId=r),n.drmConfig=n.drmConfig||n.drm_config||void 0,delete n.id,delete n.options,delete n.drm_config,r===e.defId&&e.result.push(n),e}),{result:[],defId:""}).result}getAdConfig(e){if(vn(this.query.adConfig))return this.query.adConfig;const t=vn(null==e?void 0:e.adConfig)?null==e?void 0:e.adConfig:{},n=t||{};if(t){n.partnerId=t.partner_id||t.partnerId,n.category=t.category,n.videoContentId=t.video_content_id||t.videoContentId,n.videoContentName=t.video_content_name||t.videoContentName,n.videoGenreId=t.video_genre_id,n.videoGenreName=t.video_genre_name,n.hasPreroll=mn(this.query.has_preroll)?this.query.has_preroll:t.hasPreroll,n.distrId=this.query.distr_id||t.distr_id,n.useAdSession=mn(this.query.use_ad_session)?this.query.use_ad_session:t.useAdSession;const e=parseInt(n.partnerId,10);e&&(n.partnerId=e);const r=parseInt(n.category,10);r&&(n.category=r),t.video_publisher_id&&(n.videoPublisherId=t.video_publisher_id),t.video_publisher_name&&(n.videoPublisherName=t.video_publisher_name)}return this.query.vmap_id&&(n.vmapId=this.query.vmap_id),this.query.vmap_scenario_id&&(n.vmapScenarioId=this.query.vmap_scenario_id),gn(this.query.preferable_width)&&gn(this.query.preferable_height)&&(n.preferableAdSize={width:this.query.preferable_width,height:this.query.preferable_height}),n}getVideoInfo(e){const t=vn(null==e?void 0:e.adConfig)?null==e?void 0:e.adConfig:{},n={videoContentId:null==e?void 0:e.content_id,videoContentName:null==e?void 0:e.title,videoPublisherId:(null==t?void 0:t.video_publisher_id)||"",videoPublisherName:(null==t?void 0:t.video_publisher_name)||""};return n.videoGenreId=String((null==t?void 0:t.video_genre_id)||""),n.videoGenreName=String((null==e?void 0:e.genres)||(null==t?void 0:t.video_genre_name)||""),Object.keys(n).reduce((function(e,t){const r=n[t];return r&&(e[t]=r),e}),{})}getTrackings(e){if("zen"===this.ids.from)return{trackingEvents:[]};let t=[];vn(null==e?void 0:e.trackingEvents)&&(t=t.concat(e.trackingEvents)),vn(null==e?void 0:e.stream)&&vn(null==e?void 0:e.stream.trackings)&&vn(null==e?void 0:e.stream.trackings.trackingEvents)&&(t=t.concat(e.stream.trackings.trackingEvents));const n=this.getYaVideoTrackings(e);return n&&(t=t.concat(n).filter(Boolean)),{trackingEvents:t}}getSubscribeButton(){return{type:this.query.subscribe_button}}getPreview(e){return this.query.preview_src?this.query.preview_src:this.query.preview&&!this.query.streams?null==e?void 0:e.thumbnail:""}getPosterStyle(){let e;return this.query.poster_object_fit&&(e={objectFit:String(this.query.poster_object_fit)}),e}getFeatureParams(e){const t={};return Array.isArray(null==e?void 0:e.skippableFragments)&&null!=e&&e.skippableFragments.length&&this.query.skippable_fragments&&(t.SkippableFragments={skippableFragments:e.skippableFragments,autoSkipTimeout:5,buttonTitles:e.skippableFragmentsButtonTitles||{},controlsShowDuration:5}),t}getLogoConfig(e){return null!=e&&e.logoConfig?e.logoConfig:vn(null==e?void 0:e.watermark)&&yn(null==e?void 0:e.watermark.src)?null==e?void 0:e.watermark:void 0}getTitleSettings(){if(this.query.meta===Bd.none)return null;const e={name:this.query.m_title,description:this.query.m_desc};switch(this.query.meta){case Bd.always:e.isVisible=!0;break;case Bd.start:e.isVisible=!0,e.duration=this.query.m_duration;break;case Bd.restriction_age:e.isVisible=!0,e.visibleOnPlay=!0,e.duration=this.query.m_duration;break;case Bd.ui:e.isVisible=!0,e.visibleWithSkinOnly=!0}return e}getOTTParams(e){const t=null==e?void 0:e.ottParams;return vn(t)?(t.from=this.query.from,t.contentTypeID&&!t.contentTypeId&&(t.contentTypeId=t.contentTypeID),"cover"in(e||{})&&(t.cover=null==e?void 0:e.cover,t.thumbnailLogos=null==e?void 0:e.thumbnail_logos),t.container={context:this.query.platform||"",init:this.createOttEventTrigger.call(this,"placeholder:init"),mod:this.query.mod,paymentWidget:this.createOttEventTrigger.call(this,"placeholder:pay")},t):null}createOttEventTrigger(e){return t=>{t.event===e&&this.player.trigger(t.event,[t])}}getStartPosition(e){return gn(this.query.t)?this.query.t:gn(null==e?void 0:e.progress)&&gn(null==e?void 0:e.duration)&&e.progress/e.duration>.95?0:this.expFlags.progress&&gn(null==e?void 0:e.progress)?null==e?void 0:e.progress:void 0}getYaVideoTrackings(e){if(!vn(e))return null;const t={from:this.ids.from,from_block:this.ids.fromBlock,reqid:this.ids.reqid,yandexuid:this.ids.yandexuid,content_id:this.ids.contentId,channel_id:e.channel_id,stream_block:this.ids.streamBlock,duration:e.duration};return vn(e.ottParams)&&(t.licence=e.ottParams.monetizationModel,t.svod=e.ottParams.subscriptionType),function(e){const t={};var n;return t.heartbeat=[[Rn("heartbeat",e),{delay:3e4}],[Rn("deep_watch",e),{delay:1e3*(n=e.duration,n<=180?.57*n:n<=1200?72+.17*n:n<=3600?252+.02*n:216+.03*n),callsCount:1}]],Md.forEach((function(n){t[n]=[Rn(n,e)]})),t}(t)}getAdditionalParams(e){const t=vn(null==e?void 0:e.additionalParams)?e.additionalParams:{};if(this.ids.frontendVhReqid&&(t.frontend_vh_reqid=this.ids.frontendVhReqid),this.ids.reqid&&(t.reqid=this.ids.reqid),(null!=e&&e.puid||this.query.puid)&&(t.puid=(null==e?void 0:e.puid)||this.query.puid),null!=e&&e.content_id&&(t.content_id=e.content_id),null!=e&&e.folder_id&&(t.folder_id=e.folder_id),this.ids.from&&(t.from=this.ids.from),this.ids.fromBlock&&(t.from_block=this.ids.fromBlock),this.ids.slots&&(t.slots=this.ids.slots),this.ids.streamBlock&&(t.stream_block=this.ids.streamBlock),null!=e&&e.channel_id&&(t.channel_id=e.channel_id),!Array.isArray(this.query["brand-safety-categories"])||vn(null==e?void 0:e.adTags)&&null!=e&&e.adTags["brand-safety-categories"]||(t["brand-safety-categories"]=this.prepareCategory("brand-safety-categories")),vn(null==e?void 0:e.adTags))for(const n in null==e?void 0:e.adTags)null!=e&&e.adTags.hasOwnProperty(n)&&(t[n]=this.prepareCategory(n,e.adTags[n]));return t.sandboxVersion=this.ids.sandboxVersion,t}prepareCategory(e,t){const n=this.query[e];let r=[];if(Array.isArray(t)&&Array.isArray(n))r=t.concat(n);else if(Array.isArray(t))r=t;else{if(!Array.isArray(n))return null;r=n}return"brand-safety-categories"===e?"["+r.join(",")+"]":r.join("\n")}getAutoplay(){const e=navigator&&navigator.connection&&navigator.connection.saveData,t=this.requestInfo.slow_connection||this.query.slow_connection;return!(this.expFlags.disable_autoplay_slow_connection&&this.expFlags.disable_autoplay_save_data&&t&&e)&&(!(this.expFlags.disable_autoplay_slow_connection&&!this.expFlags.disable_autoplay_save_data&&t)&&(!(!this.expFlags.disable_autoplay_slow_connection&&this.expFlags.disable_autoplay_save_data&&e)&&(mn(this.query.allow_muted)?{allowMuted:this.query.allow_muted}:Boolean(this.query.autoplay))))}}class zd{constructor(e){this.url=e,this.iframeParams=void 0,this.iframeParams=function(e){const t=oe(e||"");return{eventPrefix:(n=t.event_prefix,(Array.isArray(n)?n[0]:n)||void 0)};var n}(e)}getSourceConfig(e){return Ln({},Zd.create(this.url,e).getSourceConfig(e.content),{update:async()=>{var t;const{sourceConfig:n}=await xn(null==(t=e.content)?void 0:t.content_id,this.url);return Ln({},n,{startPosition:void 0})}})}getPlayerConfig(e){return Ln({},Zd.create(this.url,e).getPlayerConfig(),{source:this.getSourceConfig(e),skinParams:{skinConfig:this.getSkinConfig(e)}})}getSkinConfig(e){return Zd.create(this.url,e).getSkinConfig(e.content)}getIframeParams(){return this.iframeParams}}const Xd={no_licenses:{message:"ACCESS_ERROR_NO_LICENSE",code:151},invalid_region:{message:"ACCESS_ERROR_INVALID_REGION",code:153},old_browser:{message:"ACCESS_ERROR_OLD_BROWSER",code:5},future_vod_release:{message:"ACCESS_ERROR_FUTURE_VOD_RELEASE",code:100},unexpected:{message:"ACCESS_ERROR_UNEXPECTED",code:100},unsupported_browser:{message:"ACCESS_ERROR_UNSUPPORTED_BROWSER",code:412},not_found:{message:"ACCESS_ERROR_NOT_FOUND",code:404}},Jd=(function(e){const t=Object.values;if("function"===typeof t)return t(e);{const t=[];for(const n in e)(0,Ko.n)(e,n)&&t.push(e[n]);return t}}(Xd).map(e=>{let{code:t}=e;return String(t)}),["startPosition"]);class Qd extends kd{constructor(e){super(),this.params=e,this.destroyed=!1,this.requestSourceConfigTimeout=void 0,this.currentPoster=void 0,this.currentUgcLiveStatus=void 0,this.once("Destroy",()=>{this.destroyed=!0,window.clearTimeout(this.requestSourceConfigTimeout),void 0!==this.currentUgcLiveStatus&&(this.currentUgcLiveStatus=void 0,this.emit("UgcLiveStatusChange",void 0))}),Promise.resolve().then(()=>{this.start()})}start(){if(this.params.vhParams){const e=new zd(this.params.sandboxMode?location.href:void 0);this.handleVhAnswer({vhParams:this.params.vhParams,sourceConfig:e.getSourceConfig(this.params.vhParams),skinConfig:e.getSkinConfig(this.params.vhParams)})}Mn(this.params.vhParams)||this.params.contentId&&this.run()}async run(){try{await this.requestSourceConfig()}catch(e){this.emit("Error",new Tr({code:dr.REQUEST_SOURCE_ERROR,isFatal:!1}))}}async requestSourceConfig(){if(this.destroyed||!this.params.contentId)return;const e=await xn(this.params.contentId,this.params.sandboxMode?location.href:void 0),{vhParams:t,skinConfig:n}=e,r=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e.sourceConfig,Jd);this.destroyed||this.handleVhAnswer({vhParams:t,sourceConfig:r,skinConfig:n})}handleVhAnswer(e){var t;let{sourceConfig:n,skinConfig:r,vhParams:i}=e;const a=Mn(i);if(a)return this.requestSetPoster(null==n?void 0:n.preview),this.emit("ShowAnnotation",a.message),void this.emit("Error",new Tr({code:String(a.code),message:a.message,details:{isVhError:!0},isFatal:!0}));if(null==(t=i.content)||!t.ugc_live)return void this.requestSetSource({sourceConfig:n,skinConfig:r});const{ugc_live_status:o,reload_on_ready:s}=i.content;if(this.currentUgcLiveStatus!==o&&(this.currentUgcLiveStatus=o,this.emit("UgcLiveStatusChange",this.currentUgcLiveStatus)),"onair"===o||"finished"===o||"ready"===o&&s)return void this.requestSetSource({sourceConfig:n,skinConfig:r});let l;this.requestSetPoster(n.preview),"cancelled"===o?l="UGC_LIVE_CANCELLED":("offline"===o||"ready"===o&&!s)&&(l="UGC_LIVE_OFFLINE"),void 0!==l&&this.emit("ShowAnnotation",l),window.clearTimeout(this.requestSourceConfigTimeout);const c=Math.max(i.content.auto_reload_ms||6e4,5e3);this.requestSourceConfigTimeout=window.setTimeout(()=>this.run(),c)}requestSetSource(e){this.emit("SetSource",e)}requestSetPoster(e){this.currentPoster!==e&&(this.currentPoster=e,this.emit("SetPoster",e))}}let $d=function(){try{return JSON.parse(ts.getItem("videoplayer-prefer-hd")||"{}")}catch(e){return{}}}();var eu=e(2142),tu=e.n(eu);id({propertyName:"YANDEX_STATS_GLOBAL_CALLBACK_PROPERTY_NAME",win:window});const nu=Vn(),ru=Math.floor(5),iu=Math.floor(20),au=(()=>{const e=Yn();return void 0===e||e.includes("encrypted-media")})(),ou=["contentId"],su=["contentId"],lu=(0,Cd.x)(window),cu=tu()();class du extends class{constructor(e){this.handlers=Object.create(null),this.filters=Object.create(null),this.batchFn=e=>e(),(0,Rr.K)(e)&&(0,Nr.m)(e.eventListenersBatch)&&(this.batchFn=e.eventListenersBatch)}on(e,t){Gt((e,t)=>this.getHandlers(e).push(t),e,t)}once(e,t){Gt((e,t)=>{const n=()=>{this.off(e,n),this.off(e,t)};this.getHandlers(e).push(t,n)},e,t)}off(e,t){const n=this.getHandlers(e),r=n.indexOf(t);-1!==r&&n.splice(r,1)}setFilter(e,t){this.filters[e]=t}unsetFilter(e){delete this.filters[e]}emit(e,t){const n=this.filters[e];n&&!n(t)||this.batchFn(()=>{this.getHandlers(e).slice().forEach(e=>{try{e(t)}catch(n){setTimeout(()=>{throw n},0)}})})}destroy(){Q(this.handlers).forEach(e=>{this.handlers[e]=void 0})}getHandlers(e){return void 0===this.handlers[e]&&(this.handlers[e]=[]),this.handlers[e]}}{publicEmit(e,t){if(e.indexOf("/")>-1)return this.emit(e,t);const n=new Error("Event "+e+" is invalid. Namespace is required: NAMESPACE/"+e);setTimeout(()=>{throw n},0)}emit(e,t){this.debug.logEvents&&console.log("[PLAYER] [EVENT]",e,t),super.emit(e,t)}getDebugConfig(){return this.debug}constructor(e){if(super(e),this.skin=void 0,this.container=void 0,this.vhHelper=void 0,this.sandboxMode=void 0,this.loadIframeDeferred=new Zl,this.performOnIframeLoad=function(e){function t(){if(0===n.length)return;const e=n.slice();n.length=0,e.forEach(e=>{let{task:t,onPromiseReject:n}=e;if(o)n(i);else try{t(r)}catch(hu){}}),n.length>0&&t()}const n=[];let r,i,a=!1,o=!1;return e.then(e=>{r=e,a=!0,t()}),e.catch(e=>{i=e,o=!0,t()}),function(e,t){if(void 0===t&&(t=kr.Z),o)t(i);else if(!a||n.length>0)n.push({task:e,onPromiseReject:t});else try{e(r)}catch(s){}}}(this.loadIframeDeferred.promise),this.isIframeLoaded=!1,this.playingStateSynchronization=sn(),this.iframe=void 0,this.playerNode=void 0,this.postMessenger=void 0,this.visiblePlaybackController=void 0,this.getSourceConfigForRecover=()=>{},this.completeInitAfterGettingSourceConfig=void 0,this.store=void 0,this.errorScreen=void 0,this.preloadSkin=void 0,this.reportConfig=void 0,this.additionalParams=void 0,this.setSourceDeferred=void 0,this.telemetry=void 0,this.playerAliveData={bandwidthEstimate:0},this.playerTracker=void 0,this.setSourceStage=Wi.LOADING,this.sourceIdSignal=new Ai(NaN,(e,t)=>!!isNaN(t)||!isNaN(e)&&t<=e),this.debugPanel=void 0,this.externalPlaybackCsrfToken=void 0,this.externalPlaybackTokenExpireTimeout=void 0,this.playerApiSourceConfig=void 0,this.loggingForExternalToolsAllowed=void 0,this.isReady=!1,this.debug={logCalls:!1,logEvents:!1,logInternals:!1,showDebugPanel:!1},this.destroyed=!1,this.config=void 0,this.readyPendingEvents=[],this.nextPreloadRequestId=0,this.loadComponents=(0,$n.I)(()=>{return S({src:(e=jr.i18nLang,A("components_"+e+(qs?".modern":"")+".js",parseInt("1.0-10769".slice(4),10),!1)),retries:3,dropCacheOnRetry:!0,onBeforeLoad:e=>{e.crossOrigin="anonymous"},checkLoad:()=>(0,Nr.m)(jr.initErrorScreen)}).catch(e=>{const t=new Tr(e).toJSON(),n=new Tr(Kn({},t,{details:{errorDetails:t.details},code:dr.ERROR_SCREEN_LOAD_ERROR,isFatal:!1}));throw this.emitError(n,ct((0,Wl.w)(document))),n});var e}),this.sendReportToTelemetry=async e=>{var t;let{reportId:n,reported:r}=e;const i=this.isReady?await this.requestDebugInfo():{vsid:this.additionalParams.vsid,version:"1.0-10769",clientTimestamp:Date.now(),streamUrl:null==(t=this.getState().stream)?void 0:t.url,system:Et(),playerApiState:this.getState()};!function(e){let{reportId:t,reported:n,telemetry:r,reportData:i}=e;r.logEvent({name:"ReportLog",data:{reportId:t,reported:n,reportData:Ke(i)}})}({reportId:n,reported:r,telemetry:this.telemetry,reportData:i})},!(0,Rr.K)(e))throw new Tr("Params is not an object");O(e);const t=e;t.useNativeAdControls=!0;const n=function(e,t){if(3!==t.length)throw new Error("playerType should contains exact 3 symbols");return[it(44),t,ot(e),at(Date.now().toString().slice(0,10),10,"0")].join("x")}(10769,"WEB"),r=(0,_r.Y)(()=>{var e;const n=null==t||null==(e=t.source.additionalParams)?void 0:e.from;return n&&(0,vr.H)(n)?n:void 0})||ls;this.additionalParams={vsid:n,from:r},this.sandboxMode=void 0!==t.vhParams;const i=(0,Nr.m)(lu),a={vsid:n,version:"1.0-10769",service:"StreamPlayer",isVideoADB:i};this.telemetry=new Gl({playerInfo:a,sendLog:(t,n)=>{const r=Ke(t);if(!r)return;const a=(0,vr.H)(e.logUrl)?e.logUrl:void 0,o=Kn({},n,{StreamPlayer:"1.0-10769",[t.eventType]:t.eventName}),s=a||(i?Bn():nu);ke({url:s===nu?ce(nu,o):s,data:r})},getState:()=>{const e=this.getState();if(!e)return;const t=e.audioTrack,n=e.videoTrack,r=e.videoTracks.map(e=>Kn({},e,{selected:(null==n?void 0:n.value)===e.value,auto:Boolean(null==n?void 0:n.auto)})),i={total:un(e.bufferedRanges,e.currentTime)||0};return Kn({},e,this.playerAliveData,{videoTracks:r,remainingBufferedTime:i,audioTrack:t})}}),this.telemetry.setStaticParams({from:r}),function(e){let{vsid:t}=e;we(ce("https://mc.yandex.ru/watch/37773110",{vsid:t}))}({vsid:n});const o=e=>{let{watchedTime:t}=e;t>0&&(this.off(Br.WatchedTimeChange,o),(0,_r.Y)(()=>function(e){let{vsid:t}=e;return we(ce("https://mc.yandex.ru/watch/37773110",{vsid:t,"page-url":"goal://"+window.location.hostname+"/start"}))}({vsid:n}),Je))};this.on(Br.WatchedTimeChange,o),this.container=(()=>{try{return function(e){if(!(0,Rr.K)(e))throw new Tr("paramsObject must be an object");if(!e.element)throw new Tr("paramsObject must have property [element]");const{element:t}=e;let n;if("string"===typeof t){const e=document.getElementById(t);if(!e)throw new Tr("cannot find element with id: ["+t+"]");n=e}else{if(!_i(t))throw new Tr("paramsObject.element must be a string or HTMLElement id");n=t}return n}(e)}catch(t){const e=Tr.from(t,{code:dr.INVALID_CONFIG_ELEMENT_IN_CREATE_PLAYER,isFatal:!0});throw this.emitError(e,ct((0,Wl.w)(document))),e}})(),this.savePlayerAliveData({containerHeight:this.container.clientHeight*devicePixelRatio,containerWidth:this.container.clientWidth*devicePixelRatio});const s=(()=>{try{return function(e){if(!(0,Rr.K)(e))throw new Tr("paramsObject must be an object");return Fo.parse(e.lang)}(e)}catch(t){const e=Tr.from(t,{code:dr.INVALID_CONFIG_LANG_IN_CREATE_PLAYER,isFatal:!1});return this.emitError(e,ct((0,Wl.w)(document))),"ru"}})();var l,c;jr.i18nLang=s,this.initErrorScreen(),this.prepareContainerNode(),this.playerNode=this.createPlayerNode(),l=this.container,c=this.playerNode,l.firstChild?l.insertBefore(c,l.firstChild):l.appendChild(c);const d=(()=>{try{return function(e){return ss.parse(e)}(e)}catch(t){const n=Tr.from(t),r=new Tr(Kn({},n,{details:{errorDetails:n.details,config:(0,_r.Y)(()=>Ke(e))||"UNSERIALIZABLE"},code:dr.INVALID_CONFIG_IN_CREATE_PLAYER,isFatal:!0}));throw this.emitError(r,ct((0,Wl.w)(document))),Je(t),Je(r),r}})();this.config=Kn({},d,{vsid:n}),d.objectFit&&this.setVideoStyle({objectFit:d.objectFit}),this.store=this.initPlayerStore({config:d,vsid:n});const h=(t,n)=>{try{return Ce(t,this.config)}catch(r){if(n)return;const t=Tr.from(r),i=new Tr(Kn({},t,{details:{errorDetails:t.details,config:(0,_r.Y)(()=>Ke(e))||"UNSERIALIZABLE"},code:dr.INVALID_CONFIG_IN_CREATE_PLAYER,isFatal:!0}));throw this.emitError(i,ct((0,Wl.w)(document))),Je(r),Je(i),i}},p=(()=>{try{return h(t.source,this.sandboxMode)}catch(hu){return}})();this.once(Br.Destroy,function(e){const t=()=>Od.forEach(e=>window.removeEventListener(e,n)),n=n=>{"pagehide"===n.type&&n.persisted||(e(n),t())};return Od.forEach(e=>window.addEventListener(e,n)),t}(()=>this.destroyInternal(Yi.Unload))),this.reportConfig=d.reportConfig,this.debug=d.debugConfig,this.initPlaybackTracking(),this.playerTracker=this.initPlayerTracker(),this.once(Br.Destroy,()=>this.playerTracker.destroy());const m=this.iframe=At({vsid:n,container:this.playerNode}),g=this.postMessenger=this.initPostMessenger();var y,_;(this.once(Br.Destroy,()=>this.postMessenger.destroy()),this.subscribeExternalFullscreenChange(this.container),this.once(Br.Destroy,()=>{clearTimeout(this.externalPlaybackTokenExpireTimeout)}),d.savedMutedRestored&&this.emit(Br.VolumeChangeReasonChange,{volumeChangeReason:Ui.RestoreSavedMuted}),this.on(Br.VolumeChangeReasonChange,e=>{let{volumeChangeReason:t}=e;if((n=t)===Ui.RequestAutoplaySettings||void 0===n)return;var n;const{volume:r,muted:i}=this.store.getState();ns.setSavedVolume(r),ns.setSavedMuted(i)}),this.once(Br.Ready,()=>{this.initTrackChangeLogging()}),p&&(p.source.params.additionalParams=this.addRequiredFieldsToAdditionalParams(p.source.params.additionalParams),this.additionalParams=p.source.params.additionalParams,this.applySourceInfoToTelemetry(p)),this.telemetry.setStaticParams({device:d.streamPlayerParams.device?d.streamPlayerParams.device:{}}),this.telemetry.enableRemoteProgressSaving(dn(this.playerApiSourceConfig)),this.telemetry.logEvent({name:"CreatePlayer",data:Kn({},e,{element:void 0,v2:!0,preferHd:Un(r||void 0)}),extraRootFields:ct((0,Wl.w)(document))}),this.on(Br.Ready,()=>{this.isReady=!0,this.setSourceStage=Wi.READY,this.readyPendingEvents.forEach(e=>this.postMessenger.emit("Event",e)),this.readyPendingEvents.length=0}),this.visiblePlaybackController=this.initVisiblePlaybackController(d.streamPlayerParams.togglePlaybackOnVisibilityChange,d.streamPlayerParams.autoplay),this.loggingForExternalToolsAllowed=void 0===e.loadSkin,this.preloadSkin=this.initPreloadSkin(d),p)&&(null==(y=this.preloadSkin)||y.setPoster(p.source.params.preview),null==(_=this.preloadSkin)||_.setStyle(p.source.params.posterStyle));!function(e){let t=!1,n=!1,r="start";const i=()=>t&&n,a=(0,$n.I)(()=>{e.emit(Br.UserReady,{type:r})}),o=()=>{i()&&(r="poster",a())},s=()=>{if(e.off(Br.ContentImpression,a),e.off(Br.BeforeAdPodStart,u),e.off(Br.AdPodStart,d),i())return r="poster",a();t||e.once(Br.PosterReady,o),n||e.once(Br.SkinReady,o)},l=()=>{t=!0},c=()=>{t=!0,n=!0},d=()=>(r="start",a()),u=()=>{e.off(Br.ResourcesIdle,s),e.once(Br.AdPodStart,d)};e.once(Br.BeforeAdPodStart,u),e.once(Br.PosterReady,l),e.once(Br.SkinReady,c),e.once(Br.ResourcesIdle,s),e.once(Br.ContentImpression,a),e.once(Br.UserReady,()=>{e.off(Br.BeforeAdPodStart,u),e.off(Br.ResourcesIdle,s),e.off(Br.AdPodStart,d),e.off(Br.ContentImpression,a),e.off(Br.PosterReady,l),e.off(Br.SkinReady,c)})}(this),this.setFiltersForSourceRelatedEvents();try{this.debugPanel=this.initDebugPanel()}catch(T){}let v;this.once(Br.Destroy,()=>{var e;return null==(e=v)?void 0:e.unsubscribe()});let E=()=>{throw new Error("getStreamPlayerParams is not implemented")};if(this.postMessenger.on("Command",e=>{e.commandName===uc.getConfig&&e.sendAnswer(E())}),this.completeInitAfterGettingSourceConfig=e=>{var r,i;if(this.playerApiSourceConfig||this.destroyed)return;const{source:a}=e;this.playerApiSourceConfig=e,this.emit(Br.SourceChange,{source:a}),null==(r=this.preloadSkin)||r.setPoster(a.params.preview),null==(i=this.preloadSkin)||i.setStyle(a.params.posterStyle);const o=Kn({},d.streamPlayerParams,{source:e.source});var s,l;E=()=>o,this.playerTracker.setTrackings(e.trackings),this.telemetry.setExternalStalledDuration(o.source.externalStalledDuration||cr()-Math.min(t.timeLoaderInit||1/0,Qn.timeAPIInit||1/0)),function(e,t){try{u(e.contentWindow).initialStreamPlayerParams=t}catch(n){console.warn&&console.warn(n)}}(m,o),s={from:o.source.params.additionalParams.from,slots:o.source.params.additionalParams.slots,project:"video-player",version:"1.0-10769",yandexuid:li(document,"yandexuid"),yandex_login:li(document,"yandex_login")},m.contentDocument&&(null==(l=v)||l.unsubscribe(),v=new Bi.CSPLogger(s,{vsid:n}),v.subscribe(m.contentDocument)),a.params.additionalParams=this.addRequiredFieldsToAdditionalParams(a.params.additionalParams),this.additionalParams=a.params.additionalParams,this.applySourceInfoToTelemetry(e),async function(e){let{useAbdBundle:t,additionalParams:n,vsid:r,iframe:i,postMessenger:a,shouldRetry:o=(()=>!0),shouldLoadAdSdk:s,adConfig:l,flags:c,sendDelta:d}=e;const{from:u,reqid:h,slots:f}=n;return await Pt({iframe:i,vsid:r,useAbdBundle:t,from:u,reqid:h,slots:f,shouldLoadAdSdk:s,adConfig:l,flags:c,sendDelta:d}),1}({useAbdBundle:d.useAbdBundle,additionalParams:this.additionalParams,version:"1.0-10769",vsid:n,iframe:m,postMessenger:g,shouldLoadAdSdk:cn({source:a}),adConfig:a.params.adConfig,shouldRetry:()=>U(this.container)&&!this.destroyed,flags:(k(),(0,_r.Y)(()=>JSON.stringify(ri.flags))||"{}"),sendDelta:(e,t)=>{this.logDelta(e,t)}}).then(e=>{this.isIframeLoaded=!0,this.loadIframeDeferred.resolve(),e<=1||this.telemetry.logEvent({name:"IframeReloadSuccess",labels:{attempt:String(e)},data:{attempt:e}})}).catch(e=>{if(!U(this.container)){f(this.iframe);const e=new Tr({code:dr.ELEMENT_NOT_IN_DOM,details:{tagName:this.container.tagName,id:this.container.id,className:this.container.className},isFatal:!1});throw this.emitError(e,ct((0,Wl.w)(document))),this.debug.logInternals&&console.warn("element does not present in DOM",this.container),this.emit(Br.ErrorChange,{error:new Tr("element does not present in DOM")}),this.destroy(),e}this.playerApiSourceConfig=void 0;const t=new Tr(e);throw this.emitError(t),t}),this.getSourceConfigForRecover=d.useFallbackStream?this.createSourceConfigForRecoverGetter(e):kr.Z},p&&void 0===p.source.contentId&&!this.sandboxMode)return void this.completeInitAfterGettingSourceConfig(p);const R=this.initVhHelper({contentId:null==p?void 0:p.source.contentId,poster:null==p?void 0:p.source.params.preview,vhParams:t.vhParams});this.vhHelper=R,R.on("SetSource",e=>{let{sourceConfig:n,skinConfig:r}=e;this.configureSkin(r);const i=Hn(cu(n,t.source),ou);this.completeInitAfterGettingSourceConfig(h(i,!1))})}getState(){var e;return null==(e=this.store)?void 0:e.getState()}async destroy(){return this.destroyInternal(Yi.PublicApiCall)}async sendReportLog(){const e=Ue(this.getState().vsid);return this.sendReportToTelemetry({reportId:e,reported:!0}),{reportId:e}}openReportWindow(){const{reportId:e,reported:t}=function(e,t){let{reportUrl:n}=e,{vsid:r,from:i=ls}=t;const a=Ue(r),o={"form-logId":a,"form-from":i},s=function(e){switch(e){case"ott-kp":case"discovery":case"kinopoisk":return"10463870";case"disk":return"58127089";case"telemost":return"58141887";case"yavideo":case"ottwidget_ya-serp":case"serp":case"ya-market":case"ya-music":case"ya-music-android":case"quantum":case"vconf":return"10491213";case"partner":case"turbo":case"zen":case"yanews":case"yanewstragic":case"woman.ru":case"ru.tv":case"tvrain.ru":return"10491214";default:return}}(i);void 0!==s&&(o["form-from_group"]=s);const l=ce(n,o).substr(0,2048)+yl;return{reportId:a,reported:null!==window.open(l,"_blank")}}(this.reportConfig,this.additionalParams);this.sendReportToTelemetry({reportId:e,reported:t})}play(e){void 0===e&&(e=Ir.ExternalApi);const{error:t,playingState:n}=this.getState();if(null!=t&&t.isFatal)return Promise.reject();this.emit(Br.RequestPlayingState,{playingState:Pr.PLAY,playingStateReason:e}),(!this.config.streamPlayerParams.autoplay&&this.telemetry.getExpectedStalled().reason===Pl.Init||n===Pr.PAUSE&&this.telemetry.getExpectedStalled().reason===Pl.SetSource)&&this.emit(Br.RequestPlayingState,{playingState:Pr.BUFFERING,playingStateReason:Ir.Unknown});const r=new Promise((t,n)=>{this.performOnIframeLoad(()=>{this.postMessenger.sendRequest(uc.play,e).then(e=>e?t():n()).catch(()=>n())},n)});return r.catch(()=>{this.emit(Br.RequestPlayingState,{playingState:Pr.PAUSE,playingStateReason:Ir.PlayRejected})}),this.playingStateSynchronization.addLock(r)}pause(e){void 0===e&&(e=Ir.ExternalApi),this.emit(Br.RequestPlayingState,{playingState:Pr.PAUSE,playingStateReason:e}),this.performOnIframeLoad(()=>{this.playingStateSynchronization.addLock(this.postMessenger.sendRequest(uc.pause,e))})}seek(e){this.postMessenger.sendCommand(uc.seek,e)}setDebugPanelVisibility(e){var t;this.debug.showDebugPanel=e,null==(t=this.debugPanel)||t.setVisibility(e)}async requestDebugInfo(){var e;return Kn({},await this.postMessenger.sendRequest(uc.requestDebugInfo,void 0),{playerApiState:this.getState(),streamUrl:null==(e=this.getState().stream)?void 0:e.url})}async requestExternalPlay(e){this.logEventInternal(xi.ExternalPlaybackPlayerActivate);const t=await this.requestExternalCsrfToken();try{return await ec(e,t),this.logEventInternal(xi.ExternalPlaybackPlayerActivateSucceed),e.externalPlayerId}catch(n){throw this.updateExternalPlaybackCsrfToken(void 0),this.logEventInternal(xi.ExternalPlaybackPlayerActivateFailed),new Error(e.externalPlayerId)}}async requestExternalPlayerList(e){let{currentPlayerListLength:t}=e,n=!1;await this.requestExternalCsrfToken();try{if(0===t){n=!0,this.logEventInternal(xi.ExternalPlaybackPlayerListFetching,{cachedList:n});const e=await Ql();if(this.logEventInternal(xi.ExternalPlaybackPlayerListFetchSuccess,{cachedList:n}),!e.length)return[];this.logEventInternal(xi.ExternalPlaybackPlayerListHasAnyDevice)}n=!1,this.logEventInternal(xi.ExternalPlaybackPlayerListFetching,{cachedList:n});const e=await $l();return this.logEventInternal(xi.ExternalPlaybackPlayerListFetchSuccess,{cachedList:n}),e.filter(e=>e.screen_capable).map(e=>({id:e.id,name:e.name,status:e.online?Oi.IDLE:Oi.OFFLINE})).sort(dt)}catch(r){throw this.logEventInternal(xi.ExternalPlaybackPlayerListFetchError,{cachedList:n,status:(0,Rr.K)(r)?r.status:0}),r}}setVolume(e){this.postMessenger.sendCommand(uc.setVolume,e)}setMuted(e){this.postMessenger.sendCommand(uc.setMuted,e)}setVideoTrack(e){this.postMessenger.sendCommand(uc.setVideoTrack,e)}setAudioTrack(e){this.postMessenger.sendCommand(uc.setAudioTrack,e)}setTextTrack(e){this.postMessenger.sendCommand(uc.setTextTrack,e)}changeAdditionalParams(e){(e=>{if(!(0,Rr.K)(e))throw new Tr("changeAdditionalParams payload must be an Object");if(Q(e).some(e=>-1===Ec.indexOf(e)))throw new Tr("changeAdditionalParams payload must contain only following keys: "+Ec.toString())})(e),this.telemetry.flushStates(),this.additionalParams=Kn({},this.additionalParams,e),this.telemetry.setStaticParams({additionalParameters:jn(this.additionalParams)})}setNativeTextTrackVisibility(e){this.postMessenger.sendCommand(uc.setNativeTextTrackVisibility,e)}setPlaybackRate(e){this.postMessenger.sendCommand(uc.setPlaybackRate,e)}async setSource(e){var t,n,r;null==(t=this.setSourceDeferred)||t.reject(new Error("SetSource rejected cause of new #setSource()")),this.setSourceDeferred=new Zl;const i=this.setSourceDeferred;var a;if((a=i.promise)&&"function"===typeof a.catch&&a.catch(e=>{}),this.isReady||this.store.getState().error||await Promise.race([this.waitForEvent(Br.Ready),this.waitForEvent(Br.ErrorChange),i.promise]),!ge(e))throw this.logEventInternal("SetSource"),new Tr("setSource method receive a non-serializable object");this.logEventInternal("SetSource",e),null==(n=this.vhHelper)||n.destroy(),this.vhHelper=void 0;const o=e=>{try{return Ce(e,this.config)}catch(t){const e=Tr.from(t,{code:dr.INVALID_CONFIG_IN_SET_SOURCE,isFatal:!0});throw this.emitError(e),e}},s=o(e);this.emit(Br.ErrorChange,{error:void 0}),null==(r=this.errorScreen)||r.removeErrorMessage();const l=async e=>{if(!ge(e.source))throw new Tr("setSource method receive a serializable object");if(void 0===this.playerApiSourceConfig)return this.completeInitAfterGettingSourceConfig(e),void await Promise.race([this.waitForEvent(Br.Ready),this.waitForEvent(Br.ErrorChange).then(e=>{let{error:t}=e;throw t})]);this.playerTracker.setTrackings(be(e.trackings)),await this.setSourceInternal(e)};if(s.source.contentId){const t=this.initVhHelper({contentId:s.source.contentId,poster:s.source.params.preview,vhParams:void 0});return this.vhHelper=t,void t.on("SetSource",async t=>{var n;let{sourceConfig:r,skinConfig:i}=t;this.configureSkin(i);const a=Hn(cu(r,e),su);try{await l(o(a)),await this.waitForPlay()}catch(s){}null==(n=this.preloadSkin)||n.setVisibility(!1)})}await Promise.race([l(s),i.promise])}async preloadSource(e,t){const{signal:n}=t||{},r=(()=>{try{return Ce(e,this.config)}catch(t){return}})();if(void 0===r)return Promise.reject(new Error("source is invalid"));if(r.source.params.additionalParams=this.addRequiredFieldsToAdditionalParams(r.source.params.additionalParams),null!=n&&n.aborted)return Promise.reject(new Error("preload was aborted"));if(!ge(r))return console.warn("preloadSource: sourceConfig is not serializable"),Promise.reject(new Error("sourceConfig is not serializable"));const i=String(this.nextPreloadRequestId++),a=new Promise((e,t)=>{let r=kr.Z;const a=()=>{r(),t(),this.postMessenger.sendCommand(uc.abortPreloadSource,i)};null==n||n.addEventListener("abort",a);const o=n=>{switch(n.eventName){case"onPreloadSourceResolve":n.data===i&&(r(),e());break;case"onPreloadSourceReject":n.data===i&&(r(),t())}};this.postMessenger.on("Event",o);const s=()=>this.postMessenger.off("Event",o);r=()=>{s(),null==n||n.removeEventListener("abort",a)}});return this.postMessenger.sendCommand(uc.preloadSource,{sourceConfig:r.source,requestId:i}),a}async requestVideoElementFullscreen(){this.postMessenger.sendCommand(uc.setFullscreen,!0)}exitVideoElementFullscreen(){this.postMessenger.sendCommand(uc.setFullscreen,!1)}setNativeControlsVisibility(e){this.postMessenger.sendCommand(uc.setHiddenControls,function(e){return(0,Rr.K)(e)?!1===e.showTimeline?[qo.TIMELINE]:[]:e?[]:[qo.ALL]}(e))}setNativeAdControlsVisibility(e){this.postMessenger.sendCommand(uc.setNativeAdControlsVisibility,e)}setPictureInPictureAllowed(e){this.postMessenger.sendCommand(uc.setPictureInPictureEnabled,e)}setVideoStyle(e){this.performOnIframeLoad(()=>{this.postMessenger.sendCommand(uc.setVideoStyle,e)})}playInrollAd(e){this.postMessenger.sendCommand(uc.playInrollAd,e)}skipAdPod(){this.postMessenger.sendCommand(uc.skipAdPod,{})}async playAdViewers(e,t,n){if("inroll"===e&&!n)throw new Error("playAdViewers error: no cueId for inroll");const r=t.map(t=>({adViewer:t,additionalData:"inroll"===e?{cueId:n}:{},adType:e})),{success:i}=await this.postMessenger.sendRequest(uc.playAdViewers,{adType:e,adViewers:r});if(!i)throw new Error("playAdViewers error")}logEvent(e){let{event:t,params:n={}}=e;this.loggingForExternalToolsAllowed&&this.logEventInternal(t,n)}logError(e){this.loggingForExternalToolsAllowed&&this.telemetry.logError({error:e})}logSkinDelta(e,t,n){this.loggingForExternalToolsAllowed&&this.postMessenger.sendCommand(uc.logDelta,{deltaId:e,value:t,params:n})}logDelta(e,t,n){this.postMessenger.sendCommand(uc.logDelta,{deltaId:e,value:t,params:n})}async insertInto(e){const{playingState:t}=this.getState();await this.postMessenger.sendRequest(uc.stopAd,{});const n=function(e){if(!e)return[];const t=[];for(let n=0;n<e.length;n++)t.push(e[n]);return t}(this.container.querySelectorAll("video")).map(e=>function(e){const t=ji(e);return t?()=>{ji(e)!==t&&yr()(e,t)}:kr.Z}(e));e.appendChild(this.container),function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];yi(e)&&e.forEach(e=>{"function"===typeof e&&e(...n)})}(n),this.visiblePlaybackController.restartVisibilityObserver(),t!==Pr.PLAY&&t!==Pr.BUFFERING||this.play(Ir.RestoreAfterInsertInto)}getReadyState(){return this.destroyed?wr.destroyed:wr.ready}getContainer(){return this.container}async setSourceInternal(e,t){let{shouldSaveProgress:n=!1}=void 0===t?{}:t;const{source:r}=e;this.logEventInternal("SetSourceInternal",Kn({},r,{shouldSaveProgress:n})),r.params.additionalParams=this.addRequiredFieldsToAdditionalParams(r.params.additionalParams),this.playerApiSourceConfig=e,this.updateStateForSetSource(r,{shouldSaveProgress:n});const i=this.waitForSetSourceComplete();this.setSourceStage=Wi.LOADING,this.telemetry.onSetSource({stream:r.streams[0],params:r.params,externalStalledDuration:e.source.externalStalledDuration?e.source.externalStalledDuration/1e3:void 0}),this.resetPlayerAliveData(),await this.postMessenger.sendRequest(uc.setSource,{sourceConfig:r,shouldSaveProgress:n}),this.additionalParams=r.params.additionalParams,this.applySourceInfoToTelemetry(e),await i,this.playerTracker.onSetSourceComplete(r)}async destroyInternal(e){var t;this.destroyed||(this.destroyed=!0,this.logEventInternal("DestroyPlayer",{reason:e}),null==(t=this.setSourceDeferred)||t.reject(new Error("SetSource rejected cause destroy player")),await this.destroyIFrame(e),f(this.playerNode),this.emit(Br.Destroy,{}),this.emit(Br.StartStageChange,{startStage:Ci.destroyed}),this.telemetry.destroy(),super.destroy())}initTrackChangeLogging(){let e=this.getState().videoTrack,t=this.getState().audioTrack,n=this.getState().textTrack;this.on(Br.VideoTrackChange,t=>{let{videoTrack:n}=t;const r=e;e=n,!(0,Rr.K)(r)||!(0,Rr.K)(n)||r.auto&&n.auto||r.value===n.value&&r.auto===n.auto||this.telemetry.logEvent({name:"SetVideoTrack",data:{previous:gt(r),next:gt(n)}})}),this.on(Br.AudioTrackChange,e=>{let{audioTrack:n}=e;(0,Rr.K)(t)&&(0,Rr.K)(n)&&t.name!==n.name&&this.telemetry.logEvent({name:"SetAudioTrack",data:{previous:pt(t),next:pt(n)}}),t=n}),this.on(Br.TextTrackChange,e=>{let{textTrack:t}=e;void 0===n&&void 0===t||this.telemetry.logEvent({name:"SetTextTrack",data:{previous:mt(n),next:mt(t)}}),n=t})}initVisiblePlaybackController(e,t){const n=new Gc(this);this.once(Br.Destroy,()=>{n.destroy()});const r=new qc({play:()=>{this.playingStateSynchronization.waitAndLock(()=>this.play(Ir.VisiblePlayback))},pause:()=>{this.playingStateSynchronization.waitAndLock(async()=>{this.pause(Ir.VisiblePlayback)})},togglePlaybackVisibilitySetting:e,autoplay:t,playerStateAdaptor:n,logEvent:e=>this.telemetry.logEvent({name:e})}),i=e=>{let{playingState:t,playingStateReason:n}=e;n!==Ir.VisiblePlayback&&r.actualizeAutoplay(t===Pr.PLAY)};this.on(Br.RequestPlayingState,i),this.once(Br.WatchedTimeChange,()=>{this.off(Br.RequestPlayingState,i)}),this.once(Br.Destroy,()=>{r.destroy()});const a=new Kc({element:this.container,togglePlaybackVisibilitySetting:e,playerStateAdaptor:n,playPauseController:r}),{isVisibilitySupported:o}=a.getVisualState();!function(e,t){try{u(e.contentWindow).isVisibilitySupported=t}catch(n){console.warn&&console.warn(n)}}(this.iframe,o),this.once(Br.Destroy,()=>{a.destroy()}),a.observeVisualState(e=>{!function(e,t){try{u(e.contentWindow).initialVisibility=t}catch(n){console.warn&&console.warn(n)}}(this.iframe,e.isElementVisible),this.performOnIframeLoad(()=>{this.postMessenger.sendCommand(uc.setExternalVisualState,{isVisible:e.isElementVisible})})}),this.postMessenger.on("Command",e=>{e.commandName===uc.getExternalVisualState&&e.sendAnswer({isVisible:a.getVisualState().isElementVisible}),e.commandName===uc.getIsVisibilitySupported&&e.sendAnswer({isVisibilitySupported:o})});const s=e=>{a.notifyFullScreen(e.isFullscreen)};this.on(Br.FullscreenStateChange,s),this.once(Br.Destroy,()=>{this.off(Br.FullscreenStateChange,s)});const l=e=>{a.notifyPip(e.isPictureInPicture)};return this.on(Br.PictureInPictureStateChange,l),this.once(Br.Destroy,()=>{this.off(Br.PictureInPictureStateChange,l)}),a}initErrorScreen(){this.once(Br.ResourcesIdle,this.loadComponents),this.on(Br.ErrorChange,async e=>{var t;let{error:n}=e;void 0!==n?Fn(n)||(await this.loadComponents(),this.destroyed||(void 0===this.errorScreen&&(this.errorScreen=jr.initErrorScreen(Kn({},this.additionalParams,{element:this.container,onReportClick:this.sendReportToTelemetry})),this.once(Br.Destroy,()=>this.errorScreen.destroy())),n=void 0===this.store?n:this.store.getState().error,void 0!==n&&(null==(t=this.postMessenger)||t.sendCommand(uc.setPictureInPicture,!1),this.errorScreen.showErrorMessage(n.messageDetails||j(n.code))))):this.errorScreen&&this.errorScreen.changeVisibility(!1)})}addRequiredFieldsToAdditionalParams(e){return Kn({},e,{vsid:this.additionalParams.vsid,from:e.from||this.additionalParams.from,puid:e.puid||this.additionalParams.puid,folder_id:e.folder_id||this.additionalParams.folder_id})}waitForSetSourceComplete(){return new Promise((e,t)=>{const n=this.sourceIdSignal.addOne(()=>{this.setSourceStage=Wi.READY,e(),a()}),r=e=>{let{error:n}=e;n&&n.isFatal&&(this.setSourceStage=Wi.ERROR,t(n),a())},i=()=>{t({message:"CANCELED",isFatal:!1}),a()},a=()=>{n(),this.off(Br.ErrorChange,r),this.off(Br.SourceChange,i)};this.on(Br.ErrorChange,r),this.once(Br.SourceChange,i)})}prepareContainerNode(){const e=x(this.container,function(e){const{ownerDocument:t}=e;if(!t)return;const{defaultView:n}=t;return n||void 0}(this.container)).position;L(this.container,{position:e&&"static"!==e?e:"relative"})}createPlayerNode(){const e=this.container.ownerDocument.createElement("div");return L(e,{width:"100%",height:"100%",position:"absolute",top:"0",left:"0"}),e}initPlayerStore(e){let{config:t,vsid:n}=e;return new bd(Kn({},Gi,{volume:t.streamPlayerParams.volume,muted:t.streamPlayerParams.muted,vsid:n}),(e,t)=>this.on(e,t))}initPostMessenger(){const e=new mc({id:this.getState().vsid,receiver:window,sender:this.iframe.contentWindow,syncMode:!0});return e.on("Event",e=>{var t,n,r,i;if("onInitError"===e.eventName)return this.emitError(new Tr(e.data)),void(e.data.code===dr.PLAYER_CONTAINER_NOT_FOUND&&this.destroyInternal(Yi.PlayerContainerNotFound));if(!this.isReady&&"onReady"!==e.eventName)return this.debug.logInternals&&console.warn("// not ready",e.eventName,e.data),void this.readyPendingEvents.push(e);const{sourceId:a}=e;this.sourceIdSignal.dispatch(a);const o=function(e){return yc[e]}(e.eventName),s=(e=>{let{eventName:t,data:n}=e;if("onError"!==t)return!1;try{return n=n,n.isFatal&&JSON.parse(n.details).stage===Fi.SET_SOURCE}catch(hu){return!1}})(e);if(this.setSourceStage!==Wi.LOADING||!o||s)if(this.setSourceStage===Wi.READY&&o&&a<this.sourceIdSignal.getValue())this.debug.logInternals&&console.warn("// skip public and internal "+e.eventName+" because of old source",e.eventName,e.data);else switch(e.eventName){case"onInit":this.config.streamPlayerParams.autoplay&&this.telemetry.onInitBuffering();break;case"onVideoTypeChange":this.emit(Br.VideoTypeChange,{videoType:e.data});break;case"onStateChange":const{playingState:a,reason:o}=e.data;this.getState().playingState!==a&&(this.emit(Br.PlayingStateChange,{playingState:a,playingStateReason:o}),this.telemetry.writePlayerAliveStateManually());break;case"onExpectedStalledChange":this.telemetry.onExpectedBuffering(e.data);break;case"onAdStateChange":const{nextAdState:s,prevAdState:l}=e.data;this.emit(Br.AdStateChange,{adState:s}),s.state===Mi.NOT_PLAYING&&this.emit(Br.AdPodFullyClickableStateChange,{adPodFullyClickableState:void 0});l.state===Mi.NOT_PLAYING&&s.state===Mi.PLAYING&&this.telemetry.onAdStart({adType:s.type});l.state===Mi.PLAYING&&s.state===Mi.NOT_PLAYING&&this.telemetry.onAdEnd({adType:l.type});break;case"onBeforeAdPodStart":this.emit(Br.BeforeAdPodStart,e.data);break;case"onAdLoaded":this.playerTracker.onAdLoaded(e.data),this.emit(Br.AdLoaded,e.data);break;case"onAdError":this.playerTracker.onAdError(),this.emit(Br.AdError,{});break;case"onAdPodClick":this.playerTracker.onAdPodClick(),this.emit(Br.AdPodClick,{});break;case"onAdPodStart":const{adState:{type:c},source:{params:{adConfig:d={}}={}}={}}=this.getState();void 0!==c&&(this.emit(Br.AdPodFullyClickableStateChange,{adPodFullyClickableState:e.data.isFullyClickable}),this.emit(Br.AdPodStart,{type:c,adConfig:d}));break;case"onAdPodSkip":this.emit(Br.AdPodSkip,{});break;case"onAdPodEnd":this.emit(Br.AdPodEnd,{}),this.telemetry.onAdBetween({adType:this.getState().adState.type});break;case"onAdSkippableStateChange":this.emit(Br.AdSkippableStateChange,{adSkippableState:e.data});break;case"onAdVolumeAvailabilityStateChange":this.emit(Br.AdVolumeAvailabilityStateChange,{adVolumeAvailabilityState:e.data});break;case"onAdPodCloseStateChange":this.emit(Br.AdPodCloseStateChange,{adPodCloseState:e.data});break;case"onAdPodDurationChange":this.emit(Br.AdPodDurationChange,{adPodDuration:e.data});break;case"onAdPodCurrentTimeChange":this.emit(Br.AdPodCurrentTimeChange,{adPodCurrentTime:e.data});break;case"onAdPodTimeToSkipChange":this.emit(Br.AdPodTimeToSkipChange,{adPodTimeToSkip:e.data});break;case"onAdInteraction":this.emit(Br.AdInteraction,void 0);break;case"onNextAdRemainingTimeChange":this.emit(Br.NextAdRemainingTimeChange,{nextAdRemainingTime:e.data});break;case"onTimelineInfoChange":const{currentTime:u,duration:h,utcStartTime:f,dvrStartTime:p,dvrDuration:m}=e.data;this.emit(Br.CurrentTimeChange,{currentTime:u}),this.emit(Br.DurationChange,{duration:h}),this.emit(Br.UtcStartTimeChange,{utcStartTime:f}),this.emit(Br.DVRStartTimeChange,{dvrStartTime:p}),this.emit(Br.DVRDurationChange,{dvrDuration:m}),this.emit(Br.PlaybackRateRangeChange,{playbackRateRange:St({videoType:this.getState().videoType,currentTime:u,dvrStartTime:p,dvrDuration:m})});break;case"onPositionChange":const{watchedTime:g,liveLatency:y}=e.data;this.emit(Br.WatchedTimeChange,{watchedTime:g}),this.emit(Br.LiveLatencyChange,{liveLatency:y});break;case"onFullScreenChange":this.emit(Br.FullscreenStateChange,{isFullscreen:e.data});break;case"onRequestFullscreenChange":this.emit(Br.RequestFullscreenStateChange,{nextFullscreenState:e.data});break;case"onVolumeChange":this.emit(Br.MutedChange,{muted:e.data.muted}),this.emit(Br.VolumeChange,{volume:e.data.volume}),this.emit(Br.VolumeChangeReasonChange,{volumeChangeReason:e.data.changeReason});break;case"onReady":this.emit(Br.Ready,this);break;case"onError":this.emitError(new Tr(e.data));break;case"onRecover":this.telemetry.logEvent({name:"RecoverStreamError",data:{details:e.data}}),this.telemetry.onRecover({recoverReason:e.data.reason}),this.emit(Br.RecoverStart,e.data);break;case"onVideoTrackChange":this.emit(Br.VideoTrackChange,{videoTrack:e.data});break;case"onVideoTracksChange":this.emit(Br.VideoTracksChange,{videoTracks:e.data});break;case"onAudioTrackChange":this.emit(Br.AudioTrackChange,{audioTrack:e.data});break;case"onAudioTracksChange":this.emit(Br.AudioTracksChange,{audioTracks:e.data});break;case"onTextTrackChange":this.emit(Br.TextTrackChange,{textTrack:e.data});break;case"onTextTracksChange":this.emit(Br.TextTracksChange,{textTracks:e.data});break;case"onSubtitlesChange":this.emit(Br.SubtitlesChange,{subtitles:e.data});break;case"onPlaybackRateChange":this.emit(Br.PlaybackRateChange,{playbackRate:e.data});break;case"onBufferingRangesChange":this.emit(Br.BufferedRangesChange,{bufferedRanges:e.data});break;case"onThumbnailTileGeneralMetaInfoChange":this.emit(Br.TileMetaInfoChange,{tileMetaInfo:e.data});break;case"onOriginalBroadcastAdStateChange":const{cueId:_,originalBroadcastAdDuration:v}=e.data;this.logEventInternal(void 0===_?"OriginalBroadcastAdEnd":"OriginalBroadcastAdStart",{cueId:_,originalBroadcastAdDuration:v});break;case"onDrmSystemChange":this.telemetry.setStaticParams({drm:e.data}),this.emit(Br.DrmSystemChange,{drmSystem:e.data});break;case"onChangeStream":e.data&&this.telemetry.setStaticParams({streamUrl:e.data.url}),this.emit(Br.StreamChange,{stream:e.data}),this.emit(Br.TileMetaInfoUrlChange,{tileMetaInfoUrl:Nt(e.data?e.data.url:void 0)});break;case"onStreamsWithSupportInfoChange":this.emit(Br.StreamsWithSupportInfoChange,e.data);break;case"onContentImpression":this.emit(Br.ContentImpression,e.data);break;case"onResourcesIdle":this.emit(Br.ResourcesIdle,{});break;case"onVisualStateChange":const{isFullscreen:E,isPictureInPicture:S}=this.getState();E===e.data.isFullScreen&&S===e.data.isPip||this.telemetry.writePlayerAliveStateManually(),this.emit(Br.PictureInPictureStateChange,{isPictureInPicture:e.data.isPip}),this.emit(Br.VisibleStateChange,{isVisible:e.data.isVisible}),this.telemetry.setStaticParams({visualState:e.data}),this.savePlayerAliveData({containerWidth:e.data.width*devicePixelRatio,containerHeight:e.data.height*devicePixelRatio});break;case"onCapSizeChange":this.savePlayerAliveData({capWidth:null==(t=e.data)?void 0:t.width,capHeight:null==(n=e.data)?void 0:n.height});break;case"onPlaybackQualityUpdate":const R=e.data.droppedVideoFrames,A=e.data.totalVideoFrames-e.data.droppedVideoFrames;this.savePlayerAliveData({droppedFrames:R,shownFrames:A});break;case"onEngineChange":null==(r=this.debugPanel)||r.onEngineChange(e.data),this.telemetry.setStaticParams({engine:e.data});break;case"onStartStageChange":this.emit(Br.StartStageChange,{startStage:e.data});break;case"onVideoSizeChange":this.emit(Br.VideoSizeChange,{videoSize:e.data});break;case"onNetworkStatusChange":this.emit(Br.NetworkStatusChange,e.data);break;case"onBandwidthEstimateChange":const T=Math.round(e.data.value),b=e.data.source;this.savePlayerAliveData({bandwidthEstimate:T,bandwidthSource:b});const O=function(e){return e.value<=5e5?tc.SLOW:tc.OK}(e.data);this.getState().connectionQuality!==O&&this.emit(Br.ConnectionQualityChange,{connectionQuality:O}),null==(i=this.debugPanel)||i.onBandwidthEstimateChange(e.data);break;case"onInrollFrame":this.emit(Br.InrollFrame,e.data);break;case"onLogEvent":this.telemetry.logEvent({name:e.data.event,data:e.data.params,labels:e.data.additionalStatsLabels});break;case"onPreloadDetailsUpdate":this.telemetry.setPreloadDetails(e.data.details)}else this.debug.logInternals&&console.warn("// skip public and internal "+e.eventName+" because setSource is in progress",e.eventName,e.data)}),e}async requestExternalCsrfToken(){if(this.externalPlaybackCsrfToken)return this.externalPlaybackCsrfToken;try{this.logEventInternal(xi.ExternalPlaybackPlayerCsrfFetching);const{token:e}=await Jl();return this.logEventInternal(xi.ExternalPlaybackPlayerCsrfFetchSuccess),this.updateExternalPlaybackCsrfToken(e),e}catch(e){return this.logEventInternal(xi.ExternalPlaybackPlayerCsrfFetchError),""}}updateExternalPlaybackCsrfToken(e){this.externalPlaybackCsrfToken=e,void 0!==e&&(clearTimeout(this.externalPlaybackTokenExpireTimeout),this.externalPlaybackTokenExpireTimeout=window.setTimeout(()=>{this.externalPlaybackCsrfToken=void 0,this.logEventInternal(xi.ExternalPlaybackCsrfTokenExpired)},6e4))}logEventInternal(e,t,n){void 0===t&&(t={}),this.telemetry.logEvent({name:e,data:t,extraRootFields:n})}async destroyIFrame(e){const{iframe:t}=this;if(!t||!t.parentElement)return;this.isIframeLoaded||this.store.getState().error||(await Promise.race([this.loadIframeDeferred.promise.catch(kr.Z),this.waitForEvent(Br.ErrorChange)]),this.loadIframeDeferred.reject(void 0));const{isFullscreen:n}=this.getState();if(n)return new Promise(t=>{this.iframe.style.display="none",n&&(this.once(Br.FullscreenStateChange,()=>{this.destroyIFrame(e).then(t)}),this.exitVideoElementFullscreen())});this.isIframeLoaded&&await this.postMessenger.sendRequest(uc.destroy,{reason:e}),t.src="",f(t)}subscribeExternalFullscreenChange(e){this.once(Br.Destroy,function(e){let{element:t,onChange:n}=e;const r=t.ownerDocument||window.document;let i=!1;n(i);const a=vc.map(e=>(i=i||kt(r,t),(0,_c.O)(r,e.events.change,()=>{try{const e=kt(r,t);if(e===i)return;n(e),i=e}catch(e){}},{passive:!0})));return()=>{a.forEach(e=>e())}}({element:e,onChange:e=>{this.performOnIframeLoad(()=>{this.postMessenger.sendCommand(uc.setExternalVisualState,{isFullscreen:e})})}}))}initPlaybackTracking(){this.on(Br.WatchedTimeChange,e=>{let{watchedTime:t}=e;return this.telemetry.updateWatchedTime(t)}),this.on(Br.PlayingStateChange,e=>{let{playingState:t}=e;return this.telemetry.setPlayingState(t)})}initPlayerTracker(){const e=new pl({vsid:this.getState().vsid,getAdState:()=>this.getState().adState,getVideoTrack:()=>this.getState().videoTrack,getAudioTrack:()=>this.getState().audioTrack,getTextTrack:()=>this.getState().textTrack,getVideoType:()=>this.getState().videoType,getIsFullscreen:()=>this.getState().isFullscreen,getDrmSystemName:()=>this.getState().drmSystem,getIsDrmSupported:()=>{var e;if(void 0!==(null==(e=this.getState().stream)?void 0:e.drmConfig))return void 0===this.getState().error},getMuted:()=>this.getState().muted||0===this.getState().volume,getDuration:()=>this.getState().duration||0,getPlayingState:()=>this.getState().playingState,getCurrentTime:()=>this.getState().currentTime,getWatchedTime:()=>this.getState().watchedTime,getUtcPosition:()=>{const{utcStartTime:e,currentTime:t}=this.getState();return void 0===e?0:e+t}});return this.on(Br.Ready,e.onReady),this.on(Br.ErrorChange,t=>{let{error:n}=t;void 0!==n&&e.onError(n)}),this.on(Br.CurrentTimeChange,t=>{let{currentTime:n}=t;return e.onCurrentTimeChange(n)}),this.on(Br.WatchedTimeChange,t=>{let{watchedTime:n}=t;return e.onWatchedTimeChange(n)}),this.on(Br.AdStateChange,t=>{let{adState:n}=t;return e.onAdStateChange(n)}),this.on(Br.PlayingStateChange,t=>{let{playingState:n}=t;return e.onStateChange(n)}),this.on(Br.AdPodStart,()=>{e.onAdPodStart()}),this.on(Br.AdPodEnd,()=>{e.onAdPodEnd()}),this.on(Br.AdPodSkip,()=>{e.onAdPodSkip()}),e}initDebugPanel(){const e=new wd({container:this.container,getState:()=>this.getState(),getSourceId:()=>this.sourceIdSignal.getValue()});this.once(Br.Destroy,()=>e.destroy());const t=()=>e.update();return this.on(Br.CurrentTimeChange,t),this.on(Br.DurationChange,t),this.on(Br.WatchedTimeChange,t),this.on(Br.PlayingStateChange,t),this.on(Br.LiveLatencyChange,t),this.on(Br.VideoTypeChange,t),this.on(Br.SourceChange,t),this.on(Br.VideoTrackChange,t),this.on(Br.AudioTrackChange,t),this.on(Br.BufferedRangesChange,t),e.setVisibility(this.debug.showDebugPanel),e}requestSourceConfigForRecover(e){if(e.isFatal&&function(e){return e.category===Er.DRM?e.code===dr.SHAKA_EXPIRED_6014||e.code===Sr.DRM_PROXY_ERROR_SIGNATURE_EXPIRED:e.category===Er.REGIONAL||e.category===Er.ACCESS}(e))return Promise.resolve().then(()=>{var e;const t=null==(e=this.playerApiSourceConfig)?void 0:e.update();return vi(t)&&(this.emit(Br.PlayingStateChange,{playingState:Pr.BUFFERING,playingStateReason:Ir.WaitForSourceConfigUpdate}),t.catch(e=>{throw this.emit(Br.PlayingStateChange,{playingState:Pr.PAUSE,playingStateReason:Ir.Unknown}),e})),t})}async tryRecoverSourceConfigInAsyncMode(e){const t=await this.requestSourceConfigForRecover(e);if(void 0===t)return!1;const n=(()=>{try{return Ce(t,this.config)}catch(e){const t=Tr.from(e,{code:dr.INVALID_CONFIG_IN_SOURCE_UPDATE,isFatal:!1});return void this.emitError(t)}})();return void 0!==n&&(setTimeout(()=>{this.logEventInternal("UpdateSourceConfig"),this.setSourceInternal(n,{shouldSaveProgress:!0})}),!0)}tryRecoverSourceConfigInSyncMode(e){const t=this.getSourceConfigForRecover(e);return!!t&&(setTimeout(()=>{this.logEventInternal("UpdateSourceConfigSync"),this.setSourceInternal(t,{shouldSaveProgress:!0})}),!0)}async tryRecoverSourceConfig(e){try{if(this.tryRecoverSourceConfigInSyncMode(e))return!0;if(await this.tryRecoverSourceConfigInAsyncMode(e))return!0}catch(t){}return!1}async emitError(e,t){if(e.isFatal&&e.category===Er.DRM&&!au&&(e=new Tr({code:Ri?dr.IFRAME_DOES_NOT_ALLOW_DRM:dr.DRM_IS_NOT_ALLOWED,isFatal:!0,details:{originalCode:e.code,originalDetails:e.details,allowedFeaturePolicies:Yn()}},this.additionalParams.vsid)),(e=new Tr(Kn({},e.toJSON(),{isFatal:e.isFatal&&!this.destroyed}),this.additionalParams.vsid)).isFatal&&this.emit(Br.PlayingStateChange,{playingState:Pr.PAUSE,playingStateReason:Ir.Unknown}),e.isFatal&&function(e){return-1===gc.indexOf(e.category)}(e)){let t=Ht(this.getState())?Pr.PLAY:Pr.PAUSE;const n=e=>{let{playingState:n}=e;t=n};this.on(Br.RequestPlayingState,n);const r=await this.tryRecoverSourceConfig(e);this.off(Br.RequestPlayingState,n),r&&(e=new Tr(Kn({},e.toJSON(),{isFatal:!1})),Ht({playingState:t})&&this.play(Ir.CompletedRecoverSourceConfig))}var n;e.isFatal&&(null==(n=this.setSourceDeferred)||n.reject(new Error("SetSource rejected cause fatal error")),this.emit(Br.ErrorChange,{error:e}));Fn(e)?this.telemetry.logError({error:Tr.from(e,{code:"VH_"+e.message,isFatal:!1}),extraRootFields:t}):this.telemetry.logError({error:e,extraRootFields:t})}initPreloadSkin(e){if(!1===e.loadSkin)return;if(this.getState().playingState===Pr.PLAY)return;const t=on({document:this.container.ownerDocument,poster:void 0,style:void 0,hiddenControls:e.originalHiddenControls,primaryColor:e.primaryColor,backgroundColor:e.streamPlayerParams.backgroundColor,onReady:()=>{this.emit(Br.PosterReady,{})}});return this.container.appendChild(t.element),this.once(Br.SkinReady,()=>{var e;!(this.vhHelper&&null!=(e=this.getState().error)&&e.isFatal)&&t.setVisibility(!1)}),this.once(Br.Destroy,()=>t.destroy()),this.waitForPlay().then(()=>{t.setVisibility(!1)}).catch(kr.Z),t}updateStateForSetSource(e,t){let{shouldSaveProgress:n=!1}=void 0===t?{}:t;this.unsetFiltersForSourceRelatedEvents(),this.emit(Br.StreamChange,{stream:void 0}),this.emit(Br.SourceChange,{source:e}),this.emit(Br.StreamsWithSupportInfoChange,void 0),this.emit(Br.DrmSystemChange,{drmSystem:void 0}),this.emit(Br.VideoTrackChange,{videoTrack:void 0}),this.emit(Br.VideoTracksChange,{videoTracks:[]}),this.emit(Br.AudioTrackChange,{audioTrack:void 0}),this.emit(Br.AudioTracksChange,{audioTracks:[]}),this.emit(Br.TextTrackChange,{textTrack:void 0}),this.emit(Br.TextTracksChange,{textTracks:[]}),this.emit(Br.TileMetaInfoChange,{tileMetaInfo:void 0}),this.emit(Br.CurrentTimeChange,{currentTime:Gi.currentTime}),this.emit(Br.DurationChange,{duration:Gi.duration}),this.emit(Br.UtcStartTimeChange,{utcStartTime:Gi.utcStartTime}),this.emit(Br.DVRStartTimeChange,{dvrStartTime:Gi.dvrStartTime}),this.emit(Br.DVRDurationChange,{dvrDuration:Gi.dvrDuration}),n||this.emit(Br.WatchedTimeChange,{watchedTime:Gi.watchedTime}),this.emit(Br.VideoTypeChange,{videoType:Gi.videoType}),this.emit(Br.AdStateChange,{adState:Gi.adState}),this.setFiltersForSourceRelatedEvents()}setFiltersForSourceRelatedEvents(){this.setFilter(Br.CurrentTimeChange,e=>{let{currentTime:t}=e;return!bi()(t,this.getState().currentTime)}),this.setFilter(Br.WatchedTimeChange,e=>{let{watchedTime:t}=e;return!bi()(t,this.getState().watchedTime)}),this.setFilter(Br.DurationChange,e=>{let{duration:t}=e;return!bi()(t,this.getState().duration)}),this.setFilter(Br.UtcStartTimeChange,e=>{let{utcStartTime:t}=e;return!bi()(t,this.getState().utcStartTime)}),this.setFilter(Br.DVRStartTimeChange,e=>{let{dvrStartTime:t}=e;return!bi()(t,this.getState().dvrStartTime)}),this.setFilter(Br.DVRDurationChange,e=>{let{dvrDuration:t}=e;return!bi()(t,this.getState().dvrDuration)}),this.setFilter(Br.PlaybackRateRangeChange,e=>{let{playbackRateRange:t}=e;return!bi()(t,this.getState().playbackRateRange)}),this.setFilter(Br.AdStateChange,e=>{let{adState:t}=e;return!bi()(t,this.getState().adState)}),this.setFilter(Br.VolumeChange,e=>{let{volume:t}=e;return!bi()(t,this.getState().volume)}),this.setFilter(Br.VideoTracksChange,e=>{let{videoTracks:t}=e;return!(0===this.getState().videoTracks.length&&0===t.length)}),this.setFilter(Br.AudioTracksChange,e=>{let{audioTracks:t}=e;return!(0===this.getState().audioTracks.length&&0===t.length)}),this.setFilter(Br.TextTracksChange,e=>{let{textTracks:t}=e;return!(0===this.getState().textTracks.length&&0===t.length)})}unsetFiltersForSourceRelatedEvents(){this.unsetFilter(Br.CurrentTimeChange),this.unsetFilter(Br.WatchedTimeChange),this.unsetFilter(Br.DurationChange),this.unsetFilter(Br.UtcStartTimeChange),this.unsetFilter(Br.DVRStartTimeChange),this.unsetFilter(Br.DVRDurationChange),this.unsetFilter(Br.PlaybackRateRangeChange),this.unsetFilter(Br.VolumeChange),this.unsetFilter(Br.VideoTracksChange),this.unsetFilter(Br.AudioTracksChange),this.unsetFilter(Br.TextTracksChange)}savePlayerAliveData(e){this.playerAliveData=Kn({},this.playerAliveData,e)}resetPlayerAliveData(){this.playerAliveData={bandwidthEstimate:0,containerHeight:this.playerAliveData.containerHeight,containerWidth:this.playerAliveData.containerWidth}}applySourceInfoToTelemetry(e){try{var t;const{source:r}=e,{puid:i,from:a}=r.params.additionalParams;this.telemetry.setStaticParams({additionalParameters:jn(r.params.additionalParams),slots:(n=r.params.additionalParams,void 0===n?"":n.slots||""),testIds:H(r.params.additionalParams),videoContentId:r.params.videoInfo.videoContentId,streamUrl:null==(t=r.streams[0])?void 0:t.url,labels:{from:a},engine:void 0,drm:void 0,puid:i}),this.telemetry.enableRemoteProgressSaving(dn(e))}catch(na){setTimeout(()=>{throw na})}var n}createSourceConfigForRecoverGetter(e){let t,n=e.source;return this.on(Br.SourceChange,e=>{let{source:t}=e;n=t}),this.on(Br.StreamsWithSupportInfoChange,e=>{t=e}),r=>{const i=void 0===t?void 0:t.filter(Y);if(!this.canRecoverBySourceUpdate(r,n,i))return;const a=function e(t,n){void 0===n&&(n={preserveConstructors:!0});let r=t;if(yi(t)){return t.map(t=>e(t,n))}return si(t)?new Date(t.getTime()):(!(0,Nr.m)(t)&&(0,Rr.K)(t)&&(r=n.preserveConstructors?mi(t):{},(0,Dr.M)(t,(t,i)=>{r[i]=e(t,n)})),r)}(n),o=i.map(e=>{let{stream:t}=e;return t});return a.streams=this.removeCurrentStream(o),Kn({},e,{source:a})}}canRecoverBySourceUpdate(e,t,n){if(!e.isFatal||!t||!n)return!1;const r=n.map(e=>{let{stream:t}=e;return t}),i=this.removeCurrentStream(r);return 0!==i.length&&i.length!==t.streams.length}removeCurrentStream(e){const{stream:t}=this.getState();return e.filter(e=>!bi()(e,t))}waitForEvent(e){return new Promise(t=>this.once(e,t))}initVhHelper(e){let{contentId:t,poster:n,vhParams:r}=e;t&&this.emit(Br.SourceChange,{source:{contentId:t,streams:[],initialStalledDuration:0,params:{additionalParams:{},startPosition:{},withCredentials:void 0,loop:!1,preview:n,videoInfo:{},preferredTracks:vs}}});const i=new Qd({contentId:t,vhParams:r,sandboxMode:this.sandboxMode});return i.on("ShowAnnotation",async e=>{var t,n,r;await this.loadComponents(),null==(t=this.preloadSkin)||t.setSpinnerVisibility(!1),null==(n=this.preloadSkin)||n.setAnnotationText(jr.i18nTranslateSandbox(e)),null==(r=this.preloadSkin)||r.setVisibility(!0)}),i.on("SetPoster",e=>{var t,r;null==(t=this.preloadSkin)||t.setPoster(n||e||""),null==(r=this.preloadSkin)||r.setVisibility(!0)}),i.on("Destroy",()=>{var e,t,n;null==(e=this.preloadSkin)||e.setVisibility(!1),null==(t=this.preloadSkin)||t.setSpinnerVisibility(!1),null==(n=this.preloadSkin)||n.setPoster("")}),i.on("SetSource",()=>{var e,t;null==(e=this.preloadSkin)||e.setAnnotationText(""),null==(t=this.preloadSkin)||t.setSpinnerVisibility(!0)}),i.on("Error",e=>{var t;e.code===dr.REQUEST_SOURCE_ERROR&&(null==(t=this.preloadSkin)||t.setVisibility(!1));this.emitError(new Tr(Kn({},e.toJSON(),{isFatal:!0})))}),i.on("UgcLiveStatusChange",e=>{this.emit(Br.UgcLiveStatusChange,{ugcLiveStatus:e})}),i}waitForPlay(){return new Promise((e,t)=>{var n;this.once(Br.Destroy,t),null==(n=this.setSourceDeferred)||n.promise.catch(t);const r=()=>{const e=this.getState();if(!e)return!1;const{playingState:t,adState:{state:n}}=e;return t===Pr.PLAY||n===Mi.PLAYING};if(r())return void e();const i=()=>{r()&&(e(),this.off(Br.PlayingStateChange,i),this.off(Br.AdStateChange,i))};this.on(Br.PlayingStateChange,i),this.on(Br.AdStateChange,i)})}configureSkin(e){if(void 0!==this.config.loadSkin)return;const t=()=>this.skin.configure(e);this.skin?t():this.once(Br.SkinReady,e=>{let{error:n}=e;n||t()})}}const uu=e=>D(e,e=>new du(e));Qn.create=uu,Jn.init=uu})()})();